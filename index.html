<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta http-equiv="X-Content-Type-Options" content="nosniff">
<meta http-equiv="Referrer-Policy" content="strict-origin-when-cross-origin">
<!-- Advanced Content Security Policy -->
<meta http-equiv="Content-Security-Policy" content="
    default-src 'self'; 
    script-src 'self' 'unsafe-inline' 'unsafe-eval' https://www.googletagmanager.com https://cdnjs.cloudflare.com https://www.clarity.ms https://js.stripe.com; 
    style-src 'self' 'unsafe-inline' https://fonts.googleapis.com https://cdnjs.cloudflare.com; 
    font-src 'self' https://fonts.gstatic.com https://cdnjs.cloudflare.com; 
    img-src 'self' data: https: blob:; 
    connect-src 'self' https: wss:;
    media-src 'self' https:;
    object-src 'none';
    base-uri 'self';
    form-action 'self';
    frame-ancestors 'none';">
    <title>Central Otago Luxury Glamping Dome Accommodation in Cromwell, on Lake Dunstan by Lakeside Retreat </title>
    
    <!-- Critical CSS - Inline for performance -->
    <style>
      /* Critical above-the-fold styles */
      body { font-family: 'Space Grotesk', sans-serif; margin: 0; line-height: 1.6; background: #F6F1F4; }
      .hero { min-height: 100vh; background: linear-gradient(135deg, #0f172a 0%, #1e293b 100%); }
      .nav { position: fixed; top: 0; width: 100%; z-index: 50; background: rgba(15, 23, 42, 0.9); backdrop-filter: blur(10px); }
      .text-4xl { font-size: 2.25rem; line-height: 2.5rem; }
      .text-white { color: #ffffff; }
      .font-bold { font-weight: 700; }
      .mb-6 { margin-bottom: 1.5rem; }
    </style>
    
    <!-- Enhanced SEO Meta Tags -->
    <meta name="description" content="Luxury solar-powered accommodation near Queenstown (55min) and Wanaka (30min) on Lake Dunstan. Central Otago's premier energy-positive glamping. Perfect base for adventures, peaceful luxury retreat.">
    <meta name="keywords" content="Central Otago accommodation, Lake Dunstan glamping, Cromwell luxury accommodation, solar powered glamping NZ, Central Otago wine country accommodation, Otago Rail Trail accommodation, wine tours Central Otago, eco glamping New Zealand, Tesla Powerwall accommodation, sustainable tourism NZ, Cromwell to Clyde cycle trail accommodation, Lake Dunstan views, Central Otago domes, Queenstown accommodation alternative, Wanaka nearby accommodation, Queenstown region luxury stays, accommodation near Queenstown, Wanaka day trip base, Queenstown alternative accommodation, Central Otago base for Queenstown adventures, Queenstown Wanaka accommodation packages, luxury accommodation packages Central Otago, ski accommodation packages, wine tour accommodation packages, adventure holiday packages, seasonal accommodation deals Central Otago, winter ski packages, summer adventure packages">
    <meta name="author" content="Stephen & Sandy - Lakeside Retreat">
    
    <!-- Advanced SEO meta tags -->
    <meta name="language" content="en-NZ">
    <meta name="revisit-after" content="3 days">
    <meta name="distribution" content="web">
    <meta name="rating" content="general">
    <meta name="robots" content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1">
    <meta name="googlebot" content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1">
    <meta name="bingbot" content="index, follow">
    
    <!-- Geographic Targeting (CRITICAL for local SEO) -->
    <meta name="geo.region" content="NZ-OTA">
    <meta name="geo.placename" content="Cromwell, Central Otago, New Zealand">
    <meta name="geo.position" content="-45.038710, 169.197693">
    <meta name="ICBM" content="-45.038710, 169.197693">
    
    <!-- Mobile optimization -->
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="theme-color" content="#2d5a5a">
    
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://lakesideretreat.co.nz/">
    <meta property="og:title" content="Central Otago Luxury Accommodation | Lake Dunstan Glamping Domes">
    <meta property="og:description" content="Luxury glamping domes and cottage in Central Otago wine country with Lake Dunstan views. Grid-tied solar powered, 300m to cycle trail, near Cromwell.">
    <meta property="og:site_name" content="Lakeside Retreat">
    <meta property="og:image" content="https://lakesideretreat.co.nz/images/vineyard.jpeg">
    <meta property="og:image:width" content="1200">
    <meta property="og:image:height" content="630">
    <meta property="og:image:alt" content="Luxury glamping dome with panoramic Lake Dunstan views in Central Otago wine country">
    <meta property="og:locale" content="en_NZ">
    
    <!-- Twitter Cards for Social Sharing -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:url" content="https://lakesideretreat.co.nz/">
    <meta name="twitter:title" content="Central Otago Luxury Accommodation | Lake Dunstan Glamping">
    <meta name="twitter:description" content="Luxury glamping domes with Lake Dunstan views in Central Otago wine country. Grid-tied solar powered, 300m to cycle trail. 4.9★ rated sustainable accommodation.">
    <meta name="twitter:image" content="images/dome-pinot-hero.jpeg">
    <meta name="twitter:image:alt" content="Luxury glamping dome with panoramic Lake Dunstan views in Central Otago wine country near Cromwell">
    
    <!-- Canonical URL -->
    <link rel="canonical" href="https://lakesideretreat.co.nz/">
    
    <!-- Multilingual Support -->
    <link rel="alternate" hreflang="en-nz" href="https://lakesideretreat.co.nz/">
    <link rel="alternate" hreflang="en-au" href="https://lakesideretreat.co.nz/">
    <link rel="alternate" hreflang="en" href="https://lakesideretreat.co.nz/">
    
    <!-- Performance Optimizations -->
    <link rel="preconnect" href="https://fonts.googleapis.com" crossorigin>
    <link rel="preconnect" href="https://cdnjs.cloudflare.com" crossorigin>
    <link rel="dns-prefetch" href="//images.unsplash.com">
    <link rel="preload" href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@300;400;500;600;700&display=swap" as="style" onload="this.onload=null;this.rel='stylesheet'">
    <link rel="preload" href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;500;600;700&display=swap" as="style" onload="this.onload=null;this.rel='stylesheet'">
    <!-- Enhanced Performance Optimizations -->
    <link rel="preconnect" href="https://images.unsplash.com" crossorigin>
    <link rel="preconnect" href="https://www.googletagmanager.com" crossorigin>

    <!-- Resource hints for better loading -->
    <meta name="format-detection" content="telephone=no">
    <meta name="msapplication-tap-highlight" content="no">

    <!-- Enhanced viewport for better mobile experience -->
    <meta name="HandheldFriendly" content="true">
    <meta name="MobileOptimized" content="width">
    <!-- Favicons -->
    <link rel="icon" type="image/x-icon" href="images/favicon.ico">
    <link rel="icon" type="image/png" sizes="32x32" href="images/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="images/favicon-16x16.png">
    <link rel="apple-touch-icon" sizes="180x180" href="images/apple-touch-icon.png">

    <!-- Font Awesome -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">

    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@300;400;500;600;700&family=Playfair+Display:wght@400;500;600;700&display=swap" rel="stylesheet">
 <!-- Google Analytics 4 -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-M6TC9MB5CR"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-M6TC9MB5CR', {
        'enhanced_ecommerce': true,
        'send_page_view': true,
        'custom_map': {
          'custom_parameter_1': 'accommodation_type',
          'custom_parameter_2': 'booking_source'
        }
      });
      
      // Enhanced tracking for accommodation bookings
      function trackBookingIntent(accommodationType) {
        gtag('event', 'booking_intent', {
          'accommodation_type': accommodationType,
          'page_location': window.location.href
        });
      }
      
      // Wine tour interest tracking
      function trackWineTourInterest() {
        gtag('event', 'wine_tour_interest', {
          'content_category': 'central_otago_activities'
        });
      }
    </script>

    <!-- Search Console Verification - Add your verification code when available -->
    <!-- <meta name="google-site-verification" content=""> -->
  <!-- Clarity Analytics for heat mapping -->
    <script type="text/javascript">
        (function(c,l,a,r,i,t,y){
            c[a]=c[a]||function(){(c[a].q=c[a].q||[]).push(arguments)};
            t=l.createElement(r);t.async=1;t.src="https://www.clarity.ms/tag/"+i;
            y=l.getElementsByTagName(r)[0];y.parentNode.insertBefore(t,y);
        })(window, document, "clarity", "script", "sxhpz96ywu");
    </script>
    
    <!-- Performance monitoring -->
    <script>
      // Core Web Vitals monitoring
      new PerformanceObserver((entryList) => {
        for (const entry of entryList.getEntries()) {
          if (entry.entryType === 'navigation') {
            gtag('event', 'page_load_time', {
              'event_category': 'Performance',
              'event_label': 'Navigation',
              'value': Math.round(entry.loadEventEnd - entry.loadEventStart)
            });
          }
        }
      }).observe({entryTypes: ['navigation']});
    </script>

<!-- Service Worker for Enhanced Caching -->
<script>
// Register service worker for caching and offline support
if ('serviceWorker' in navigator && 'caches' in window) {
    window.addEventListener('load', () => {
        // Simple service worker for caching static assets
        const swCode = `
            const CACHE_NAME = 'lakeside-retreat-v1';
            const urlsToCache = [
                '/',
                '/index.html',
                'https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@300;400;500;600;700&display=swap',
                'https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css'
            ];
            
            self.addEventListener('install', (event) => {
                event.waitUntil(
                    caches.open(CACHE_NAME)
                        .then((cache) => cache.addAll(urlsToCache))
                );
            });
            
            self.addEventListener('fetch', (event) => {
                event.respondWith(
                    caches.match(event.request)
                        .then((response) => {
                            return response || fetch(event.request);
                        }
                    )
                );
            });
        `;
        
        // Create and register service worker
        const blob = new Blob([swCode], { type: 'application/javascript' });
        const swUrl = URL.createObjectURL(blob);
        
        navigator.serviceWorker.register(swUrl)
            .then(() => // Console statement removed for production)
            .catch(() => // Console statement removed for production'));
    });
}

// Enhanced WebP detection and image optimization
function detectWebPSupport() {
    const webP = new Image();
    webP.onload = webP.onerror = () => {
        document.documentElement.classList.add(webP.height === 2 ? 'webp' : 'no-webp');
    };
    webP.src = 'data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA';
}

// Initialize optimizations
document.addEventListener('DOMContentLoaded', () => {
    detectWebPSupport();
    
    // Optimize images with lazy loading
    if ('IntersectionObserver' in window) {
        const imageObserver = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    const img = entry.target;
                    if (img.dataset.src) {
                        img.src = img.dataset.src;
                        img.classList.remove('lazy');
                        imageObserver.unobserve(img);
                    }
                }
            });
        });
        
        // Observe images with data-src attribute
        document.querySelectorAll('img[data-src]').forEach(img => {
            imageObserver.observe(img);
        });
    }
});
</script>
</head>
<body>
 
    <!-- COMPREHENSIVE STRUCTURED DATA -->
    <!-- Main Business Schema -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "LodgingBusiness",
      "@id": "https://lakesideretreat.co.nz/#organization",
      "name": "Lakeside Retreat Central Otago",
      "alternateName": "Lakeside Glamping",
      "description": "Central Otago's premier luxury glamping accommodation on Lake Dunstan with solar power system, Powerwall, direct Otago Rail Trail access, and proximity to 30+ wineries",
      "url": "https://lakesideretreat.co.nz/",
      "logo": "https://lakesideretreat.co.nz/images/logo.png",
      "image": [
        "https://lakesideretreat.co.nz/images/dome-pinot-exterior.jpg",
        "https://lakesideretreat.co.nz/images/dome-rose-spa1.jpg",
        "https://lakesideretreat.co.nz/images/lakeside-cottage-lake-view.jpg"
      ],
      "telephone": "+64-21-368-682",
      "email": "info@lakesideretreat.co.nz",
      "address": {
        "@type": "PostalAddress",
        "streetAddress": "96 Smiths Way, Mount Pisa",
        "addressLocality": "Cromwell",
        "addressRegion": "Otago",
        "postalCode": "9310",
        "addressCountry": "NZ"
      },
      "geo": {
        "@type": "GeoCoordinates",
        "latitude": -45.038710,
        "longitude": 169.197693
      },
      "openingHoursSpecification": {
        "@type": "OpeningHoursSpecification",
        "dayOfWeek": [
          "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday", "Sunday"
        ],
        "opens": "08:00",
        "closes": "20:00"
      },
      "aggregateRating": {
        "@type": "AggregateRating",
        "ratingValue": "4.9",
        "reviewCount": "127",
        "bestRating": "5",
        "worstRating": "1"
      },
      "amenityFeature": [
        {
          "@type": "LocationFeatureSpecification",
          "name": "Commercial-Grade Solar System",
          "value": "16.72kW Solar Array with 38 x 440W Helios Panels"
        },
        {
          "@type": "LocationFeatureSpecification", 
          "name": "Energy Storage System",
          "value": "Signergy Battery Storage)"
        },
        {
          "@type": "LocationFeatureSpecification",
          "name": "Smart Energy Management",
          "value": "20kW Hybrid Inverter with Real-time Monitoring"
        },
        {
          "@type": "LocationFeatureSpecification",
          "name": "Energy Independence",
          "value": "Energy-Positive Operations Contributing to NZ Grid"
        },
        {
          "@type": "LocationFeatureSpecification",
          "name": "Private Hot Tub",
          "value": true
        },
        {
          "@type": "LocationFeatureSpecification",
          "name": "Lake Access",
          "value": "Direct Lake Dunstan access"
        },
        {
          "@type": "LocationFeatureSpecification",
          "name": "Cycle Trail Access",
          "value": "Otago Rail Trail - 300 metre walk"
        },
        {
          "@type": "LocationFeatureSpecification",
          "name": "Wine Country Location",
          "value": "15+ wineries within 15km"
        }
      ],
      "starRating": {
        "@type": "Rating",
        "ratingValue": "5"
      },
      "priceRange": "$$$",
      "currenciesAccepted": "NZD",
      "paymentAccepted": "Cash, Credit Card, Debit Card",
      "checkinTime": "15:00",
      "checkoutTime": "10:00",
      "petsAllowed": "Lakeside Cottage only",
      "smokingAllowed": false,
      "numberOfRooms": "3",
      "maximumAttendeeCapacity": "6",
      "hasMap": "https://maps.google.com/?q=-45.038710,169.197693",
      "sameAs": [
        "https://www.facebook.com/lakesideretreat",
        "https://www.instagram.com/lakesideretreat",
        "https://www.airbnb.com/h/lakesideretreat",
        "https://www.booking.com/hotel/nz/lakeside-retreat.html"
      ]
    }
    </script>

    <!-- Organization Schema -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "Organization",
      "name": "Lakeside Retreat Central Otago",
      "alternateName": "Lakeside Retreat",
      "url": "https://lakesideretreat.co.nz",
      "logo": "https://lakesideretreat.co.nz/images/logo.png",
      "foundingDate": "2019",
      "founder": {
        "@type": "Person",
        "name": "Stephen & Sandy"
      },
      "description": "Sustainable luxury accommodation specialists in Central Otago, pioneering grid-tied solar tourism experiences",
      "knowsAbout": [
        "Solar Energy Systems",
        "Sustainable Tourism", 
        "Central Otago Wine Region",
        "Otago Rail Trail",
        "Lake Dunstan Activities",
        "Eco Glamping"
      ],
      "contactPoint": {
        "@type": "ContactPoint",
        "telephone": "+64-21-368-682",
        "contactType": "customer service",
        "availableLanguage": ["English"],
        "areaServed": "NZ"
      },
      "sameAs": [
        "https://www.facebook.com/lakesideretreat",
        "https://www.instagram.com/lakesideretreat",
        "https://www.tripadvisor.com/lakesideretreat",
        "https://www.booking.com/lakesideretreat"
      ]
    }
    </script>

    <!-- FAQ Schema Markup for SEO -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "FAQPage",
      "mainEntity": [{
        "@type": "Question",
        "name": "Where is Lakeside Retreat located in Central Otago?",
        "acceptedAnswer": {
          "@type": "Answer",
          "text": "Lakeside Retreat is located at 96 Smiths Way, Mount Pisa, just 12km from Cromwell town centre. We're positioned directly on Lake Dunstan in the heart of Central Otago wine country, with the cycle trail just 300m from our accommodation."
        }
      },{
        "@type": "Question",
        "name": "What type of accommodation do you offer in Central Otago?",
        "acceptedAnswer": {
          "@type": "Answer",
          "text": "We offer luxury glamping domes and a family cottage, all with Lake Dunstan and mountains view. Dome Pinot (50sqm) and Dome Rosé (40sqm) are perfect for couples, while our Lakeside Cottage accommodates families with direct lake access. All accommodation is powered by grid-tied solar with battery backup."
        }
      },{
        "@type": "Question",
        "name": "How close are you to Central Otago wineries?",
        "acceptedAnswer": {
          "@type": "Answer",
          "text": "We're located in the heart of Central Otago wine country with 15+ wineries within 15km. Our own vineyard setting puts you amongst award-winning Pinot Noir producers, with many cellar doors accessible by bike via the cycle trail."
        }
      },{
        "@type": "Question",
        "name": "How does your 16.72kW solar power system work?",
        "acceptedAnswer": {
          "@type": "Answer",
          "text": "Our 16.72kW grid-tied solar system with 16kWh Signergy battery provides clean energy while maintaining 100% reliability for guests. Being grid-tied means you'll never experience power outages, while we contribute excess renewable energy back to New Zealand's grid."
        }
      },{
        "@type": "Question",
        "name": "Can I access the Otago Rail Trail from your accommodation?",
        "acceptedAnswer": {
          "@type": "Answer",
          "text": "Yes! The famous Otago Rail Trail is just a 300-metre walk from our domes. You can easily access the Cromwell to Clyde section, rent bikes in Cromwell, and arrange luggage transfers. It's perfect for wine country cycling and exploring Central Otago's heritage."
        }
      },{
        "@type": "Question",
        "name": "What activities are available on Lake Dunstan?",
        "acceptedAnswer": {
          "@type": "Answer",
          "text": "Lake Dunstan offers kayaking, paddleboarding, fishing, and scenic walks right from our doorstep. The lake is perfect for photography, bird watching, and water sports. The Cromwell Gorge walks provide stunning views and heritage sites."
        }
      }]
    }
    </script>

    <!-- Breadcrumb Schema Markup -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "BreadcrumbList",
      "itemListElement": [{
        "@type": "ListItem",
        "position": 1,
        "name": "Central Otago Accommodation",
        "item": "https://lakesideretreat.co.nz/"
      },{
        "@type": "ListItem", 
        "position": 2,
        "name": "Lake Dunstan Accommodation",
        "item": "https://lakesideretreat.co.nz/#accommodations"
      },{
        "@type": "ListItem",
        "position": 3,
        "name": "Cromwell Wine Country Activities", 
        "item": "https://lakesideretreat.co.nz/#explore"
      }]
    }
    </script>

    <!-- Website Schema -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "WebSite",
      "name": "Lakeside Retreat Central Otago",
      "url": "https://lakesideretreat.co.nz",
      "potentialAction": {
        "@type": "SearchAction",
        "target": "https://lakesideretreat.co.nz/search?q={search_term_string}",
        "query-input": "required name=search_term_string"
      },
      "sameAs": [
        "https://www.facebook.com/lakesideretreat",
        "https://www.instagram.com/lakesideretreat"
      ]
    }
    </script>

    <!-- Blog Collection Schema -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "Blog",
      "name": "Central Otago Wine Country & Solar Energy Blog",
      "description": "Expert guides for Central Otago wine country, sustainable travel, and renewable energy tourism",
      "url": "https://lakesideretreat.co.nz/blog",
      "author": {
        "@type": "Organization",
        "name": "Lakeside Retreat Central Otago"
      },
      "publisher": {
        "@type": "Organization",
        "name": "Lakeside Retreat Central Otago",
        "logo": {
          "@type": "ImageObject",
          "url": "https://lakesideretreat.co.nz/images/logo.png"
        }
      },
      "inLanguage": "en-NZ"
    }
    </script>

    <!-- Security and Performance optimization -->
    <script src="security-fixes-immediate.js"></script>
    <script src="secure-payment-integration.js"></script>
    <script>
      // WebP support detection
      function supportsWebP() {
        return new Promise(resolve => {
          const webP = new Image();
          webP.onload = webP.onerror = () => resolve(webP.height === 2);
          webP.src = 'data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA';
        });
      }
      
      supportsWebP().then(supported => {
        document.documentElement.classList.add(supported ? 'webp' : 'no-webp');
      });
      
      // Service Worker for caching
      if ('serviceWorker' in navigator) {
        navigator.serviceWorker.register('/sw.js');
      }
      
      // Initialize security on page load
      document.addEventListener('DOMContentLoaded', function() {
        // Initialize secure frontend functions
        if (window.SecureFrontend) {
          window.SecureFrontend.logSecurityEvent('page_loaded', {
            url: window.location.href,
            timestamp: new Date().toISOString()
          });
        }
      });
    </script>
    
    <style>
        :root {
            --primary: linear-gradient(135deg, #2d5a5a 0%, #1e4040 100%);
            --secondary: linear-gradient(135deg, #7a8471 0%, #6b7562 100%);
            --accent: linear-gradient(135deg, #2d5a5a 0%, #7a8471 100%);
            --brand-teal: #2d5a5a;
            --brand-sage: #7a8471;
            --dark: #0f172a;
            --light: #f8fafc;
            --text: #334155;
            --border: #e2e8f0;
            --shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
            --shadow-lg: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Space Grotesk', sans-serif;
            line-height: 1.6;
            color: var(--text);
            background: var(--light);
            overflow-x: hidden;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 2rem;
        }

        /* Navigation */
        .navbar {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            z-index: 1000;
            border-bottom: 1px solid var(--border);
            transition: all 0.3s ease;
        }

        .nav-container {
            display: flex;
            align-items: center;
            justify-content: flex-start;
            gap: 2rem;
        }

        /* Navigation Styles */
        .logo {
            margin-right: 0.25rem;
            font-family: 'Space Grotesk', sans-serif;
            font-size: 1.5rem;
            font-weight: 600;
            color: var(--brand-teal);
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            gap: 0.75rem;
        }

        .logo-icon {
            width: auto;
            height: 3.0rem;
            max-width: 100%;
            max-height: 100%;
            object-fit: contain;
            fill: var(--brand-teal);
        }

        .nav-links {
            display: flex;
            list-style: none;
            gap: 2rem;
            align-items: center;
        }

        .nav-link {
            text-decoration: none;
            color: var(--text);
            font-weight: 500;
            transition: color 0.3s ease;
            cursor: pointer;
        }

        .nav-link:hover, .nav-link.active {
            background: var(--primary);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .mobile-menu-btn {
            display: none;
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            color: var(--text);
        }

        /* Mobile Navigation */
        .mobile-nav {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(255, 255, 255, 0.98);
            backdrop-filter: blur(20px);
            z-index: 1001;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            gap: 2rem;
        }

        .mobile-nav.active {
            display: flex;
        }

        .mobile-nav .nav-link {
            font-size: 1.5rem;
            padding: 1rem;
        }

        .close-mobile-menu {
            position: absolute;
            top: 2rem;
            right: 2rem;
            background: none;
            border: none;
            font-size: 2rem;
            cursor: pointer;
            color: var(--brand-teal);
        }

        /* Search Overlay */
        .search-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(10px);
            z-index: 2000;
            align-items: center;
            justify-content: center;
        }

        .search-overlay.active {
            display: flex;
        }

        .search-container {
            background: white;
            border-radius: 20px;
            padding: 2rem;
            max-width: 500px;
            width: 90%;
            position: relative;
        }

        .search-input {
            width: 100%;
            padding: 1rem;
            border: 2px solid var(--border);
            border-radius: 10px;
            font-size: 1.1rem;
            margin-bottom: 1rem;
        }

        .search-results {
            max-height: 300px;
            overflow-y: auto;
        }

        .search-result {
            padding: 1rem;
            border-bottom: 1px solid var(--border);
            cursor: pointer;
            transition: background 0.3s ease;
        }

        .search-result:hover {
            background: var(--light);
        }

        .close-search {
            position: absolute;
            top: 1rem;
            right: 1rem;
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
        }

        /* Cookie Consent */
        .cookie-consent {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: var(--dark);
            color: white;
            padding: 1rem;
            z-index: 1000;
            display: none;
            align-items: center;
            justify-content: space-between;
            flex-wrap: wrap;
            gap: 1rem;
        }

        .cookie-consent.active {
            display: flex;
        }

        /* Social Proof Notifications */
        .social-proof {
            position: fixed;
            bottom: 2rem;
            left: 2rem;
            background: white;
            border-radius: 10px;
            padding: 1rem 1.5rem;
            box-shadow: var(--shadow);
            z-index: 999;
            transform: translateX(-120%);
            transition: transform 0.5s ease;
            max-width: 300px;
        }

        .social-proof.show {
            transform: translateX(0);
        }

        /* Skeleton Loading */
        .skeleton {
            background: linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%);
            background-size: 200% 100%;
            animation: loading 1.5s infinite;
        }

        @keyframes loading {
            0% { background-position: 200% 0; }
            100% { background-position: -200% 0; }
        }

        /* Main Content */
        main {
            margin-top: 80px;
        }

        .page {
            display: none;
            min-height: calc(100vh - 80px);
        }

        .page.active {
            display: block;
        }

        /* Hero Section */
        .hero {
            background: linear-gradient(rgba(0, 0, 0, 0.4), rgba(0, 0, 0, 0.4)), url('https://images.unsplash.com/photo-1506905925346-21bda4d32df4?ixlib=rb-4.0.3&auto=format&fit=crop&w=2000&q=80') center/cover;
            color: white;
            padding: 8rem 0 4rem;
            text-align: center;
            position: relative;
            overflow: hidden;
            min-height: 70vh;
            display: flex;
            align-items: center;
        }

        .hero-content {
            position: relative;
            z-index: 2;
            width: 100%;
        }

        .hero h1 {
            font-family: 'Playfair Display', serif;
            font-size: 3.5rem;
            font-weight: 600;
            margin-bottom: 1rem;
            background: var(--primary);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            line-height: 1.2;
        }

        .hero .tagline {
            font-size: 1.4rem;
            font-weight: 600;
            letter-spacing: 2px;
            margin-bottom: 1.5rem;
            color: var(--brand-teal);
            text-transform: uppercase;
        }

        .hero p {
            font-size: 1.25rem;
            margin-bottom: 2rem;
            max-width: 700px;
            margin-left: auto;
            margin-right: auto;
            opacity: 0.9;
            line-height: 1.7;
        }

        /* Buttons */
        .btn {
            display: inline-block;
            padding: 1rem 2rem;
            border: none;
            border-radius: 50px;
            font-weight: 600;
            text-decoration: none;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 1rem;
            text-align: center;
        }

        .btn-primary {
            background: linear-gradient(135deg, #8b2635 0%, #6b1a26 100%);
            color: white;
            box-shadow: var(--shadow);
            border: 2px solid #8b2635;
        }

        .btn-primary:hover {
            background: linear-gradient(135deg, #a02d3f 0%, #8b2635 100%);
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(139, 38, 53, 0.3);
        }

        .btn-secondary {
            background: linear-gradient(135deg, #7a8471 0%, #6b7562 100%);
            color: white;
            box-shadow: var(--shadow);
            border: 2px solid #7a8471;
        }

        .btn-secondary:hover {
            background: linear-gradient(135deg, #8a9480 0%, #7a8471 100%);
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(122, 132, 113, 0.3);
        }

        .btn-outline {
            background: transparent;
            color: var(--text);
            border: 2px solid var(--border);
        }

        .btn-outline:hover {
            background: var(--primary);
            color: white;
            border-color: transparent;
        }

        /* Sections */
        .section {
            padding: 4rem 0;
        }

        .section-header {
            text-align: center;
            margin-bottom: 3rem;
        }

        .section-title {
            font-family: 'Playfair Display', serif;
            font-size: 2.5rem;
            font-weight: 600;
            margin-bottom: 1rem;
            background: var(--primary);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .section-subtitle {
            font-size: 1.1rem;
            opacity: 0.7;
            max-width: 600px;
            margin: 0 auto;
        }

        /* Grid */
        .grid {
            display: grid;
            gap: 2rem;
        }

        .grid-2 {
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
        }

        .grid-3 {
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
        }

        .grid-4 {
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        }

        /* Cards */
        .card {
            background: white;
            border-radius: 20px;
            overflow: hidden;
            box-shadow: var(--shadow);
            transition: all 0.3s ease;
            opacity: 0;
            transform: translateY(30px);
        }

        .card.visible {
            opacity: 1;
            transform: translateY(0);
        }

        .card:hover {
            transform: translateY(-10px);
            box-shadow: var(--shadow-lg);
        }

        .card-image {
            width: 100%;
            height: 250px;
            object-fit: cover;
            transition: transform 0.3s ease;
            cursor: pointer;
        }

        .card-image:hover {
            transform: scale(1.05);
        }

        .card-content {
            padding: 2rem;
        }

        .card-title {
            font-family: 'Playfair Display', serif;
            font-size: 1.5rem;
            font-weight: 600;
            margin-bottom: 1rem;
            color: var(--dark);
        }

        .card-text {
            margin-bottom: 1.5rem;
            opacity: 0.8;
        }

        /* Amenities Grid */
        .amenities-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
            margin: 1.5rem 0;
        }

        .amenity-category {
            background: rgba(45, 90, 90, 0.05);
            padding: 1rem;
            border-radius: 10px;
            border-left: 3px solid var(--brand-teal);
        }

        .amenity-category h5 {
            margin-bottom: 0.5rem;
            font-weight: 600;
            color: var(--dark);
            font-size: 0.9rem;
        }

        .amenity-category ul {
            list-style: none;
            padding: 0;
        }

        .amenity-category li {
            margin-bottom: 0.25rem;
            font-size: 0.8rem;
            display: flex;
            align-items: center;
        }

        .amenity-category li i {
            color: #10b981;
            margin-right: 0.5rem;
            font-size: 0.7rem;
        }

        /* Stats */
        .stats {
            display: flex;
            justify-content: space-around;
            background: white;
            border-radius: 20px;
            padding: 2rem;
            box-shadow: var(--shadow);
            margin: 2rem 0;
        }

        .stat {
            text-align: center;
        }

        .stat-number {
            font-size: 2rem;
            font-weight: 700;
            background: var(--primary);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .stat-label {
            font-size: 0.9rem;
            opacity: 0.7;
            margin-top: 0.5rem;
        }

        /* STREAMLINED 3-BUTTON BOOKING MODAL STYLES */
        .booking-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(10px);
            z-index: 3000;
            align-items: center;
            justify-content: center;
            padding: 2rem;
            overflow-y: auto;
        }

        .booking-modal.active {
            display: flex;
        }

        .booking-modal-content {
            background: white;
            border-radius: 20px;
            max-width: 700px;
            width: 100%;
            max-height: 90vh;
            overflow-y: auto;
            position: relative;
        }

        .booking-modal-header {
            background: var(--primary);
            color: white;
            padding: 2rem;
            border-radius: 20px 20px 0 0;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .booking-modal-header h2 {
            font-family: 'Playfair Display', serif;
            font-size: 2rem;
            margin: 0;
        }

        .close-booking-modal {
            background: none;
            border: none;
            color: white;
            font-size: 2rem;
            cursor: pointer;
            padding: 0;
        }

        .booking-modal-body {
            padding: 2rem;
        }

        .booking-step {
            display: none;
        }

        .booking-step.active {
            display: block;
        }

        /* Voucher Modal Styles */
        .voucher-purchase-step {
            display: none;
        }

        .voucher-purchase-step.active {
            display: block;
        }

        .voucher-options-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
            margin-bottom: 1.5rem;
        }

        .voucher-option {
            background: white;
            border: 2px solid var(--border);
            border-radius: 15px;
            padding: 1.5rem;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .voucher-option:hover {
            border-color: var(--brand-teal);
            transform: translateY(-2px);
        }

        .voucher-option.selected {
            border-color: var(--primary);
            background: rgba(45, 90, 90, 0.05);
        }

        .voucher-option-header h4 {
            margin: 0.5rem 0;
            color: var(--brand-teal);
        }

        .voucher-price {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--brand-teal);
            margin: 0.5rem 0;
        }

        .voucher-option p {
            font-size: 0.9rem;
            color: var(--text);
            margin: 0;
        }

        .booking-form-group {
            margin-bottom: 1.5rem;
        }

        .booking-form-label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 600;
            color: var(--brand-teal);
        }

        .booking-form-input, .booking-form-select {
            width: 100%;
            padding: 1rem;
            border: 2px solid var(--border);
            border-radius: 10px;
            font-size: 1rem;
            transition: border-color 0.3s ease;
        }

        .booking-form-input:focus, .booking-form-select:focus {
            outline: none;
            border-color: var(--brand-teal);
        }

        .booking-date-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1rem;
        }

        .booking-guests-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1rem;
        }

        .booking-accommodation-selector {
            display: grid;
            gap: 1rem;
            margin: 1.5rem 0;
        }

        .accommodation-option {
            border: 2px solid var(--border);
            border-radius: 15px;
            padding: 1.5rem;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .accommodation-option:hover {
            border-color: var(--brand-teal);
            background: rgba(45, 90, 90, 0.05);
        }

        .accommodation-option.selected {
            border-color: var(--brand-teal);
            background: rgba(45, 90, 90, 0.1);
        }

        .accommodation-option h4 {
            color: var(--brand-teal);
            margin-bottom: 0.5rem;
        }

        .accommodation-price {
            font-weight: 600;
            color: var(--brand-teal);
            font-size: 1.1rem;
            margin-top: 0.5rem;
        }

        .availability-result {
            padding: 1.5rem;
            border-radius: 10px;
            margin: 1rem 0;
            text-align: center;
        }

        .availability-success {
            background: #dcfdf7;
            border: 1px solid #10b981;
            color: #047857;
        }

        .availability-error {
            background: #fee2e2;
            border: 1px solid #f87171;
            color: #dc2626;
        }

        .price-breakdown {
            background: #f8fafc;
            border-radius: 15px;
            padding: 1.5rem;
            margin: 1.5rem 0;
        }

        .price-row {
            display: flex;
            justify-content: space-between;
            margin-bottom: 0.5rem;
            padding: 0.25rem 0;
        }

        .price-total {
            border-top: 2px solid var(--border);
            padding-top: 1rem;
            margin-top: 1rem;
            font-weight: 600;
            font-size: 1.2rem;
        }

        .guest-details-form {
            display: grid;
            gap: 1rem;
        }

        .guest-form-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1rem;
        }

        .booking-success {
            text-align: center;
            padding: 2rem;
        }

        .success-icon {
            font-size: 4rem;
            color: #10b981;
            margin-bottom: 1rem;
        }

        .booking-security-badges {
            display: flex;
            justify-content: center;
            gap: 1rem;
            margin-top: 1.5rem;
            font-size: 0.9rem;
            color: #666;
            flex-wrap: wrap;
        }

        .loading-spinner {
            border: 3px solid #f3f3f3;
            border-top: 3px solid var(--brand-teal);
            border-radius: 50%;
            width: 20px;
            height: 20px;
            animation: spin 1s linear infinite;
            display: inline-block;
            margin-left: 10px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* Footer */
        .footer {
            background: var(--dark);
            color: white;
            padding: 3rem 0 2rem;
            margin-top: 4rem;
        }

        .footer-content {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 3rem;
            margin-bottom: 2rem;
        }

        .footer-section h3 {
            font-family: 'Playfair Display', serif;
            font-size: 1.5rem;
            margin-bottom: 1rem;
            background: var(--primary);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .footer-section p, .footer-section a {
            color: rgba(255, 255, 255, 0.8);
            text-decoration: none;
            margin-bottom: 0.5rem;
            display: block;
        }

        .footer-section a:hover {
            color: white;
        }

        .footer-bottom {
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            padding-top: 2rem;
            text-align: center;
            opacity: 0.7;
        }

        /* Form Styles */
        .form-group {
            margin-bottom: 1.5rem;
        }

        .form-label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 500;
        }

        .form-input, .form-textarea {
            width: 100%;
            padding: 1rem;
            border: 2px solid var(--border);
            border-radius: 10px;
            font-size: 1rem;
            transition: border-color 0.3s ease;
        }

        .form-input:focus, .form-textarea:focus {
            outline: none;
            border-color: var(--brand-teal);
        }

        .form-input.valid {
            border-color: #10b981;
        }

        .form-input.invalid {
            border-color: #ef4444;
        }

        .form-error {
            color: #ef4444;
            font-size: 0.9rem;
            margin-top: 0.5rem;
            display: none;
        }

        .form-error.show {
            display: block;
        }

        /* Gallery Lightbox */
        .lightbox {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.9);
            z-index: 2000;
            align-items: center;
            justify-content: center;
        }

        .lightbox.active {
            display: flex;
        }

        .lightbox-content {
            max-width: 90%;
            max-height: 90%;
            position: relative;
        }

        .lightbox-image {
            width: 100%;
            height: 100%;
            object-fit: contain;
        }

        .lightbox-close {
            position: absolute;
            top: -40px;
            right: 0;
            color: white;
            font-size: 2rem;
            cursor: pointer;
            background: none;
            border: none;
        }

        .lightbox-nav {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            color: white;
            font-size: 2rem;
            cursor: pointer;
            background: rgba(0, 0, 0, 0.5);
            border: none;
            padding: 1rem;
            border-radius: 50%;
        }

        .lightbox-prev {
            left: -60px;
        }

        .lightbox-next {
            right: -60px;
        }

        /* Breadcrumbs */
        .breadcrumbs {
            background: rgba(255, 255, 255, 0.8);
            padding: 1rem 0;
            font-size: 0.9rem;
            border-bottom: 1px solid var(--border);
        }

        .breadcrumb-item {
            display: inline;
            opacity: 0.6;
        }

        .breadcrumb-item.active {
            opacity: 1;
            font-weight: 500;
        }

        .breadcrumb-item:not(:last-child)::after {
            content: ' / ';
            margin: 0 0.5rem;
        }

        /* Animations */
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .fade-in-up {
            animation: fadeInUp 0.6s ease forwards;
        }

        /* Accordion Styles */
        .accordion-container {
            margin: 1.5rem 0;
        }

        .accordion-item {
            border: 1px solid var(--border);
            border-radius: 10px;
            margin-bottom: 0.5rem;
            overflow: hidden;
        }

        .accordion-header {
            width: 100%;
            padding: 1rem 1.5rem;
            background: white;
            border: none;
            text-align: left;
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-weight: 600;
            color: var(--brand-teal);
            transition: all 0.3s ease;
        }

        .accordion-header:hover {
            background: rgba(45, 90, 90, 0.05);
        }

        .accordion-header.active {
            background: rgba(45, 90, 90, 0.1);
        }

        .accordion-icon {
            transition: transform 0.3s ease;
        }

        .accordion-header.active .accordion-icon {
            transform: rotate(180deg);
        }

        .accordion-content {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease;
            background: white;
        }

        .accordion-content.active {
            max-height: 1000px;
        }

        .accordion-content > div {
            padding: 1.5rem;
            border-top: 1px solid var(--border);
        }

        /* Mobile-First Responsive Design */
        
        /* Small Mobile Devices (320px - 480px) */
        @media (max-width: 480px) {
            .container {
                padding: 0 1rem;
            }

            .hero h1 {
                font-size: 2rem;
                line-height: 1.1;
            }

            .hero .tagline {
                font-size: 1rem;
            }

            .hero p {
                font-size: 1rem;
                margin-bottom: 1.5rem;
            }

            .section-title {
                font-size: 1.8rem;
                line-height: 1.2;
            }

            .section-subtitle {
                font-size: 1rem;
            }

            .card-content {
                padding: 1rem;
            }

            .card-title {
                font-size: 1.2rem;
            }

            .btn {
                padding: 0.8rem 1.5rem;
                font-size: 0.9rem;
                width: 100%;
                margin-bottom: 0.5rem;
            }

            /* Mobile Booking Modal */
            .booking-modal {
                padding: 1rem;
                align-items: flex-start;
                padding-top: 2rem;
            }

            .booking-modal-content {
                width: 100%;
                max-height: 95vh;
                margin: 0;
            }

            .booking-modal-header {
                padding: 1.5rem 1rem;
                border-radius: 20px 20px 0 0;
            }

            .booking-modal-header h2 {
                font-size: 1.4rem;
            }

            .booking-modal-body {
                padding: 1rem;
            }

            .booking-form-input, .booking-form-select {
                padding: 0.8rem;
                font-size: 1rem;
                border-radius: 8px;
            }

            .accommodation-option {
                padding: 1rem;
                margin-bottom: 0.5rem;
            }

            .accommodation-option h4 {
                font-size: 1.1rem;
            }

            .accommodation-price {
                font-size: 1rem;
            }
        }

        /* Medium Mobile Devices (481px - 768px) */
        @media (max-width: 768px) {
            .nav-links {
                display: none;
            }

            .mobile-menu-btn {
                display: block;
                padding: 0.5rem;
                touch-action: manipulation;
            }

            .hero {
                padding: 3rem 0;
                text-align: center;
            }

            .hero h1 {
                font-size: 2.5rem;
                margin-bottom: 1rem;
            }

            .hero .tagline {
                font-size: 1.1rem;
            }

            .hero p {
                font-size: 1.1rem;
                margin-bottom: 2rem;
            }

            .section {
                padding: 3rem 0;
            }

            .section-title {
                font-size: 2rem;
                margin-bottom: 0.8rem;
            }

            .container {
                padding: 0 1.5rem;
            }

            /* Mobile Grid Adjustments */
            .grid-2, .grid-3, .grid-4 {
                grid-template-columns: 1fr;
                gap: 1.5rem;
            }

            .stats {
                flex-direction: column;
                gap: 1.5rem;
                padding: 1.5rem;
            }

            .stat {
                padding: 1rem;
                border-bottom: 1px solid var(--border);
            }

            .stat:last-child {
                border-bottom: none;
            }

            /* Mobile Card Optimizations */
            .card {
                margin-bottom: 1rem;
                border-radius: 15px;
            }

            .card-content {
                padding: 1.5rem;
            }

            .card-image {
                height: 200px;
            }

            /* Mobile Amenities */
            .amenities-grid {
                grid-template-columns: 1fr;
                gap: 1rem;
            }

            .amenity-category {
                padding: 1rem;
                border-radius: 8px;
            }

            .amenity-category h5 {
                font-size: 0.95rem;
                margin-bottom: 0.8rem;
            }

            .amenity-category li {
                font-size: 0.85rem;
                margin-bottom: 0.3rem;
            }

            /* Mobile Booking Form */
            .booking-date-row,
            .booking-guests-row,
            .guest-form-row {
                grid-template-columns: 1fr;
                gap: 1rem;
            }

            .booking-form-group {
                margin-bottom: 1rem;
            }

            .booking-form-label {
                font-size: 0.9rem;
                margin-bottom: 0.3rem;
            }

            .booking-form-input, .booking-form-select {
                padding: 1rem;
                font-size: 1rem;
                border-radius: 10px;
                min-height: 50px; /* Better touch targets */
            }

            .price-breakdown {
                padding: 1rem;
                border-radius: 10px;
                margin: 1rem 0;
            }

            .price-row {
                padding: 0.5rem 0;
                font-size: 0.95rem;
            }

            .price-total {
                font-size: 1.1rem;
                padding-top: 1rem;
                margin-top: 1rem;
            }

            /* Mobile Footer */
            .footer {
                padding: 2rem 0 1rem;
            }

            .footer-content {
                grid-template-columns: 1fr;
                gap: 2rem;
                text-align: center;
            }

            .footer-section {
                padding: 1rem 0;
                border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            }

            .footer-section:last-child {
                border-bottom: none;
            }

            /* Mobile Social Proof */
            .social-proof {
                left: 1rem;
                right: 1rem;
                max-width: none;
                padding: 0.8rem 1rem;
                border-radius: 8px;
            }

            /* Mobile Lightbox */
            .lightbox-nav {
                display: none;
            }

            .lightbox-close {
                top: -30px;
                font-size: 1.5rem;
            }

            /* Mobile Search */
            .search-container {
                width: 95%;
                padding: 1.5rem;
                border-radius: 15px;
            }

            .search-input {
                padding: 0.8rem;
                font-size: 1rem;
                border-radius: 8px;
            }

            .search-result {
                padding: 0.8rem;
                font-size: 0.9rem;
            }

            /* Mobile Forms */
            .form-input, .form-textarea {
                padding: 1rem;
                font-size: 1rem;
                border-radius: 10px;
                min-height: 50px;
            }

            .form-textarea {
                min-height: 120px;
            }

            /* Mobile Trust Badges */
            .trust-badges {
                flex-direction: column;
                gap: 1rem;
            }
        }

        /* Large Mobile/Small Tablet (769px - 1024px) */
        @media (max-width: 1024px) {
            .hero-content h1 {
                font-size: 3rem;
            }

            .section-title {
                font-size: 2.2rem;
            }

            .container {
                padding: 0 2rem;
            }

            .grid-3 {
                grid-template-columns: repeat(2, 1fr);
            }

            .grid-4 {
                grid-template-columns: repeat(3, 1fr);
            }

            .booking-modal-content {
                max-width: 600px;
            }

            .amenities-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        /* Scroll Indicator */
        .scroll-indicator {
            position: fixed;
            top: 80px;
            left: 0;
            height: 4px;
            background: var(--primary);
            z-index: 999;
            transition: width 0.3s ease;
        }

        /* Honeypot (hidden spam protection) */
        .honeypot {
            position: absolute;
            left: -9999px;
            opacity: 0;
        }

        /* Progressive Enhancement */
        .webp .hero { background-image: url('hero-background.webp'); }
        .no-webp .hero { background-image: url('hero-background.jpg'); }

        /* Reduce motion for accessibility */
        @media (prefers-reduced-motion: reduce) {
            *, *::before, *::after {
                animation-duration: 0.01ms !important;
                animation-iteration-count: 1 !important;
                transition-duration: 0.01ms !important;
            }
        }

        .btn-primary.book-now-highlight {
            outline: 1px solid #592741;
            outline-offset: 2px;
            background: #F6F1F4;
            color: #592741;
        }
    </style>
<!-- Enhanced Security & Performance Manager -->
<script>
class WebsiteSecurityManager {
    constructor() {
        this.csrfToken = '';
        this.apiCallLimits = new Map();
        this.init();
    }
    
    async init() {
        try {
            this.setupFormValidation();
            this.setupRateLimiting();
            this.monitorPerformance();
            // Console statement removed for production
        } catch (error) {
            // Console statement removed for production
        }
    }
    
    // Enhanced email validation
    validateEmail(email) {
        const emailRegex = /^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;
        return emailRegex.test(email) && email.length <= 254;
    }
    
    // Input sanitization
    sanitizeInput(input) {
        if (typeof input !== 'string') return input;
        return input
            .replace(/[<>]/g, '')
            .replace(/javascript:/gi, '')
            .replace(/on\w+=/gi, '')
            .trim();
    }
    
    // Rate limiting for API calls
    checkRateLimit(endpoint, maxCalls = 10) {
        const now = Date.now();
        const calls = this.apiCallLimits.get(endpoint) || [];
        const recentCalls = calls.filter(time => now - time < 60000);
        
        if (recentCalls.length >= maxCalls) {
            throw new Error('Rate limit exceeded. Please try again later.');
        }
        
        recentCalls.push(now);
        this.apiCallLimits.set(endpoint, recentCalls);
        return true;
    }
    
    // Form validation setup
    setupFormValidation() {
        document.addEventListener('submit', (event) => {
            const form = event.target;
            if (form.tagName === 'FORM') {
                const inputs = form.querySelectorAll('input[type="email"]');
                let isValid = true;
                
                inputs.forEach(input => {
                    if (input.value && !this.validateEmail(input.value)) {
                        isValid = false;
                        this.showFieldError(input, 'Please enter a valid email address');
                    }
                });
                
                if (!isValid) {
                    event.preventDefault();
                }
            }
        });
    }
    
    // Enhanced error display
    showFieldError(field, message) {
        const existingError = field.parentNode.querySelector('.field-error');
        if (existingError) existingError.remove();
        
        const errorDiv = document.createElement('div');
        errorDiv.className = 'field-error';
        errorDiv.style.cssText = 'color: #dc2626; font-size: 0.875rem; margin-top: 0.25rem;';
        errorDiv.textContent = message;
        
        field.parentNode.appendChild(errorDiv);
        field.style.borderColor = '#dc2626';
        
        // Clear error on input
        field.addEventListener('input', () => {
            errorDiv.remove();
            field.style.borderColor = '';
        }, { once: true });
    }
    
    // Performance monitoring
    monitorPerformance() {
        if ('PerformanceObserver' in window) {
            new PerformanceObserver((entryList) => {
                const entries = entryList.getEntries();
                const lastEntry = entries[entries.length - 1];
                if (typeof gtag !== 'undefined') {
                    gtag('event', 'web_vitals', {
                        'metric_name': 'LCP',
                        'metric_value': Math.round(lastEntry.startTime)
                    });
                }
            }).observe({entryTypes: ['largest-contentful-paint']});
        }
    }
    
    setupRateLimiting() {
        window.limitedBookingAttempt = (callback) => {
            try {
                this.checkRateLimit('booking', 5);
                callback();
            } catch (error) {
                alert('Too many booking attempts. Please wait a moment before trying again.');
            }
        };
    }
}

// Enhanced Error Handling
window.addEventListener('error', (event) => {
    // Script error caught - handled silently in production
});

window.addEventListener('unhandledrejection', (event) => {
    // Promise rejection caught - handled silently in production
});

// Initialize on DOM load
document.addEventListener('DOMContentLoaded', () => {
    window.securityManager = new WebsiteSecurityManager();
});
</script>	
</head>
<body>
    </head>
<body>
    <!-- STEP 1: Skip Navigation -->
    <a href="#mainContent" class="skip-link">Skip to main content</a>
    
    <!-- Scroll Indicator -->
    <div class="scroll-indicator" id="scrollIndicator"></div>

    <!-- Navigation -->
    <nav class="navbar" id="navbar">
        <div class="nav-container">
            <a href="#" class="logo" onclick="showPage('home')" aria-label="Go to home page">
                <img src="images/logormbg.png" alt="Lakeside Retreat Logo" class="logo-icon" />
              </a>    
            <ul class="nav-links">
                <li><a href="#" class="nav-link" onclick="showPage('home')">Home</a></li>
                <li><a href="#" class="nav-link" onclick="showPage('stay')">Stay</a></li>
                <li><a href="#" class="nav-link" onclick="showPage('gallery')">Gallery</a></li>
                <li><a href="#" class="nav-link" onclick="showPage('blog')">Guides</a></li>
                <li><a href="#" class="nav-link" onclick="showPage('reviews')">Reviews</a></li>
                <li><a href="#" class="nav-link" onclick="showPage('story')">Our Story</a></li>
                                        <li><a href="#" class="nav-link" onclick="showPage('explore')">Explore</a></li>
                        <li><a href="#" class="nav-link" onclick="showPage('voucher')">Gift Vouchers</a></li>
                        <li><a href="#" class="nav-link" onclick="showPage('contact')">Contact</a></li>
                <li><a href="#" class="nav-link" onclick="openSearch()"><i class="fas fa-search"></i></a></li>
                <li><a href="#" class="btn btn-primary book-now-highlight" onclick="openBookingModal()">Book Now</a></li>
            </ul>
            <button class="mobile-menu-btn" onclick="toggleMobileMenu()">
                <i class="fas fa-bars"></i>
            </button>
        </div>
    </nav>

    <!-- Mobile Navigation -->
    <div class="mobile-nav" id="mobileNav">
        <button class="close-mobile-menu" onclick="toggleMobileMenu()">
            <i class="fas fa-times"></i>
        </button>
        <a href="#" class="nav-link" onclick="showPage('home'); toggleMobileMenu()">Home</a>
        <a href="#" class="nav-link" onclick="showPage('stay'); toggleMobileMenu()">Stay</a>
        <a href="#" class="nav-link" onclick="showPage('gallery'); toggleMobileMenu()">Gallery</a>
        <a href="#" class="nav-link" onclick="showPage('blog'); toggleMobileMenu()">Guides</a>
        <a href="#" class="nav-link" onclick="showPage('reviews'); toggleMobileMenu()">Reviews</a>
        <a href="#" class="nav-link" onclick="showPage('story'); toggleMobileMenu()">Our Story</a>
        <a href="#" class="nav-link" onclick="showPage('explore'); toggleMobileMenu()">Explore</a>
        <a href="#" class="nav-link" onclick="showPage('contact'); toggleMobileMenu()">Contact</a>
        <a href="#" class="btn btn-primary book-now-highlight" onclick="openBookingModal(); toggleMobileMenu()">Book Now</a>
    </div>

    <!-- Search Overlay -->
    <div class="search-overlay" id="searchOverlay">
        <div class="search-container">
            <button class="close-search" onclick="closeSearch()">
                <i class="fas fa-times"></i>
            </button>
            <input type="text" class="search-input" id="searchInput" placeholder="Search accommodations, amenities, activities..." oninput="performSearch()">
            <div class="search-results" id="searchResults"></div>
        </div>
    </div>

    <!-- Cookie Consent -->
    <div class="cookie-consent" id="cookieConsent">
        <div>
            <strong>We use cookies</strong> to enhance your experience and analyse our website traffic. 
            <a href="#" style="color: #2dd4bf;">Learn more</a>
        </div>
        <div>
            <button class="btn btn-primary" onclick="acceptCookies()" style="margin-right: 1rem;">Accept</button>
            <button class="btn btn-outline" onclick="declineCookies()">Decline</button>
        </div>
    </div>

    <!-- Social Proof Notification -->
    <div class="social-proof" id="socialProof">
        <div style="display: flex; align-items: center; gap: 1rem;">
            <div style="width: 40px; height: 40px; border-radius: 50%; background: var(--primary); display: flex; align-items: center; justify-content: center; color: white;">
                <i class="fas fa-user"></i>
            </div>
            <div>
                <div style="font-weight: 600;" id="socialProofText">Sarah from Auckland just booked Dome Pinot!</div>
                <div style="font-size: 0.8rem; opacity: 0.7;" id="socialProofTime">2 minutes ago</div>
            </div>
        </div>
    </div>

    <!-- Gallery Lightbox -->
    <div class="lightbox" id="lightbox">
        <div class="lightbox-content">
            <button class="lightbox-close" onclick="closeLightbox()">
                <i class="fas fa-times"></i>
            </button>
            <button class="lightbox-nav lightbox-prev" onclick="prevImage()">
                <i class="fas fa-chevron-left"></i>
            </button>
            <img class="lightbox-image" id="lightboxImage" alt="Gallery Image">
            <button class="lightbox-nav lightbox-next" onclick="nextImage()">
                <i class="fas fa-chevron-right"></i>
            </button>
        </div>
    </div>

    <!-- VOUCHER PURCHASE MODAL -->
    <div class="booking-modal" id="voucherPurchaseModal">
        <div class="booking-modal-content">
            <div class="booking-modal-header">
                <h2>🎁 Purchase Gift Voucher</h2>
                <button class="close-booking-modal" onclick="closeVoucherPurchaseModal()">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            
            <div class="booking-modal-body">
                <div class="voucher-purchase-step active" id="voucherStep1">
                    <h3 style="color: var(--brand-teal); margin-bottom: 1.5rem;">Choose Your Voucher Amount</h3>
                    
                    <div class="voucher-options-grid">
                        <div class="voucher-option" data-amount="200" onclick="selectVoucherAmount(200)">
                            <div class="voucher-option-header">
                                <div style="font-size: 2rem; margin-bottom: 0.5rem;">💝</div>
                                <h4>Partial Payment</h4>
                                <div class="voucher-price">$200</div>
                            </div>
                            <p>Perfect for contributing towards any stay</p>
                        </div>
                        
                        <div class="voucher-option selected" data-amount="450" onclick="selectVoucherAmount(450)">
                            <div class="voucher-option-header">
                                <div style="font-size: 2rem; margin-bottom: 0.5rem;">🏕️</div>
                                <h4>One Night Dome</h4>
                                <div class="voucher-price">$450</div>
                                <div style="background: var(--primary); color: white; padding: 0.25rem 0.5rem; border-radius: 10px; font-size: 0.7rem; margin-top: 0.5rem;">MOST POPULAR</div>
                            </div>
                            <p>Complete one-night stay in any dome</p>
                        </div>
                        
                        <div class="voucher-option" data-amount="900" onclick="selectVoucherAmount(900)">
                            <div class="voucher-option-header">
                                <div style="font-size: 2rem; margin-bottom: 0.5rem;">🏡</div>
                                <h4>Two Night Stay</h4>
                                <div class="voucher-price">$900</div>
                            </div>
                            <p>Complete two-night stay package</p>
                        </div>
                        
                        <div class="voucher-option custom" data-amount="custom" onclick="selectVoucherAmount('custom')">
                            <div class="voucher-option-header">
                                <div style="font-size: 2rem; margin-bottom: 0.5rem;">🎁</div>
                                <h4>Custom Amount</h4>
                                <div class="voucher-price">Your Choice</div>
                            </div>
                            <p>Perfect for specific budgets</p>
                        </div>
                    </div>

                    <div id="customAmountInput" style="display: none; margin-top: 1rem;">
                        <div class="booking-form-group">
                            <label class="booking-form-label" for="customVoucherAmount">Custom Amount (NZD)</label>
                            <input type="number" class="booking-form-input" id="customVoucherAmount" placeholder="Enter amount" min="50" step="50">
                        </div>
                    </div>

                    <div id="voucherDetails" style="background: rgba(45, 90, 90, 0.05); padding: 1.5rem; border-radius: 10px; margin: 1.5rem 0;">
                        <h4 style="color: var(--brand-teal); margin-bottom: 1rem;">Voucher Benefits</h4>
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 0.5rem; font-size: 0.9rem;">
                            <div>✓ Valid for 12 months</div>
                            <div>✓ Flexible booking dates</div>
                            <div>✓ All accommodation types</div>
                            <div>✓ No booking fees</div>
                            <div>✓ Personal message included</div>
                            <div>✓ Instant digital delivery</div>
                        </div>
                    </div>

                    <button class="btn btn-primary" style="width: 100%;" onclick="goToVoucherStep(2)">
                        Continue to Personalization
                    </button>
                </div>

                <div class="voucher-purchase-step" id="voucherStep2">
                    <h3 style="color: var(--brand-teal); margin-bottom: 1.5rem;">Personalize Your Gift</h3>
                    
                    <div class="booking-form-group">
                        <label class="booking-form-label" for="voucherRecipientName">Recipient Name</label>
                        <input type="text" class="booking-form-input" id="voucherRecipientName" placeholder="Who is this gift for?" required>
                    </div>

                    <div class="booking-form-group">
                        <label class="booking-form-label" for="voucherRecipientEmail">Recipient Email</label>
                        <input type="email" class="booking-form-input" id="voucherRecipientEmail" placeholder="Where should we send the voucher?" required onblur="validateEmail(this)" oninput="clearEmailError(this)">
                        <div class="email-error-message" id="voucherRecipientEmailError" style="display: none; color: #dc2626; font-size: 0.85rem; margin-top: 0.25rem;"></div>
                    </div>

                    <div class="booking-form-group">
                        <label class="booking-form-label" for="voucherMessage">Personal Message (Optional)</label>
                        <textarea class="booking-form-input" id="voucherMessage" rows="4" placeholder="Add a special message for the recipient..."></textarea>
                    </div>

                    <div class="booking-form-group">
                        <label class="booking-form-label" for="voucherOccasion">Occasion (Optional)</label>
                        <select class="booking-form-select" id="voucherOccasion">
                            <option value="">Select occasion</option>
                            <option value="birthday">Birthday</option>
                            <option value="anniversary">Anniversary</option>
                            <option value="wedding">Wedding</option>
                            <option value="celebration">Celebration</option>
                            <option value="corporate">Corporate Gift</option>
                            <option value="just-because">Just Because</option>
                        </select>
                    </div>

                    <div id="voucherSummary" style="background: white; border: 2px solid var(--border); padding: 1.5rem; border-radius: 10px; margin: 1.5rem 0;">
                        <h4 style="color: var(--brand-teal); margin-bottom: 1rem;">Voucher Summary</h4>
                        <div style="display: flex; justify-content: space-between; margin-bottom: 0.5rem;">
                            <span>Voucher Amount:</span>
                            <span id="summaryAmount">$450</span>
                        </div>
                        <div style="display: flex; justify-content: space-between; margin-bottom: 0.5rem;">
                            <span>Recipient:</span>
                            <span id="summaryRecipient">-</span>
                        </div>
                        <div style="display: flex; justify-content: space-between; margin-bottom: 0.5rem;">
                            <span>Occasion:</span>
                            <span id="summaryOccasion">-</span>
                        </div>
                        <div style="border-top: 1px solid var(--border); padding-top: 0.5rem; margin-top: 0.5rem;">
                            <div style="display: flex; justify-content: space-between; font-weight: 600;">
                                <span>Total:</span>
                                <span id="summaryTotal">$450</span>
                            </div>
                        </div>
                    </div>

                    <div style="display: flex; gap: 1rem;">
                        <button class="btn btn-outline" style="flex: 1;" onclick="goToVoucherStep(1)">
                            Back
                        </button>
                        <button class="btn btn-primary" style="flex: 1;" onclick="goToVoucherStep(3)">
                            Continue to Payment
                        </button>
                    </div>
                </div>

                <div class="voucher-purchase-step" id="voucherStep3">
                    <h3 style="color: var(--brand-teal); margin-bottom: 1.5rem;">Complete Your Purchase</h3>
                    
                    <div class="booking-form-group">
                        <label class="booking-form-label" for="voucherPurchaserName">Your Name</label>
                        <input type="text" class="booking-form-input" id="voucherPurchaserName" placeholder="Who is purchasing this voucher?" required>
                    </div>

                    <div class="booking-form-group">
                        <label class="booking-form-label" for="voucherPurchaserEmail">Your Email</label>
                        <input type="email" class="booking-form-input" id="voucherPurchaserEmail" placeholder="Your email address" required onblur="validateEmail(this)" oninput="clearEmailError(this)">
                        <div class="email-error-message" id="voucherPurchaserEmailError" style="display: none; color: #dc2626; font-size: 0.85rem; margin-top: 0.25rem;"></div>
                    </div>

                    <div class="booking-form-group">
                        <label class="booking-form-label" for="voucherPurchaserPhone">Your Phone</label>
                        <input type="tel" class="booking-form-input" id="voucherPurchaserPhone" placeholder="Your phone number" required>
                    </div>

                    <div style="background: #f8f9fa; padding: 1rem; border-radius: 10px; margin: 1rem 0; font-size: 0.9rem; color: #666;">
                        <p style="margin: 0;"><strong>🎁 Instant Delivery:</strong> Your voucher will be delivered immediately via email after payment.</p>
                        <p style="margin: 0.5rem 0 0;"><strong>📧 Recipient Notification:</strong> The recipient will receive the voucher directly to their email.</p>
                    </div>

                    <div style="display: flex; gap: 1rem;">
                        <button class="btn btn-outline" style="flex: 1;" onclick="goToVoucherStep(2)">
                            Back
                        </button>
                        <button class="btn btn-primary" style="flex: 1;" onclick="processVoucherPurchase()">
                            Purchase Voucher
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- STREAMLINED 3-BUTTON BOOKING MODAL -->
    <div class="booking-modal" id="bookingModal">
        <div class="booking-modal-content">
            <div class="booking-modal-header">
                <h2>Book Your Commercial-Grade Solar Experience</h2>
                <button class="close-booking-modal" onclick="closeBookingModal()">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            
            <div class="booking-modal-body">
                <!-- Step 1: Accommodation & Dates -->
                <div class="booking-step active" id="bookingStep1">
                    <h3 style="color: var(--brand-teal); margin-bottom: 1.5rem;">Choose Your Energy-Positive Experience</h3>
                    
                    <div class="booking-accommodation-selector">
                        <div class="accommodation-option" data-accommodation="dome-pinot" onclick="selectAccommodation('dome-pinot')">
                            <h4>Dome Pinot</h4>
                            <p>Flagship 50sqm luxury dome with panoramic views and private spa</p>
                            <div class="accommodation-price">From $450/night</div>
                        </div>
                        
                        <div class="accommodation-option" data-accommodation="dome-rose" onclick="selectAccommodation('dome-rose')">
                            <h4>Dome Rosé</h4>
                            <p>Romantic 40sqm retreat perfect for couples</p>
                            <div class="accommodation-price">From $380/night</div>
                        </div>
                        
                        <div class="accommodation-option" data-accommodation="lakeside-cottage" onclick="selectAccommodation('lakeside-cottage')">
                            <h4>Lakeside Cottage</h4>
                            <p>Family-friendly cottage with direct lake access</p>
                            <div class="accommodation-price">From $580/night</div>
                        </div>
                    </div>

                    <div class="booking-date-row">
                        <div class="booking-form-group">
                            <label class="booking-form-label" for="bookingCheckin">Check-in</label>
                            <input type="date" class="booking-form-input" id="bookingCheckin" required>
                        </div>
                        <div class="booking-form-group">
                            <label class="booking-form-label" for="bookingCheckout">Check-out</label>
                            <input type="date" class="booking-form-input" id="bookingCheckout" required>
                        </div>
                    </div>

                    <div class="booking-guests-row">
                        <div class="booking-form-group">
                            <label class="booking-form-label" for="bookingAdults">Adults</label>
                            <select class="booking-form-select" id="bookingAdults" required>
                                <option value="1">1 Adult</option>
                                <option value="2" selected>2 Adults</option>
                                <option value="3">3 Adults</option>
                                <option value="4">4 Adults</option>
                                <option value="5">5 Adults</option>
                                <option value="6">6 Adults</option>
                            </select>
                        </div>
                        <div class="booking-form-group">
                            <label class="booking-form-label" for="bookingChildren">Children</label>
                            <select class="booking-form-select" id="bookingChildren">
                                <option value="0" selected>0 Children</option>
                                <option value="1">1 Child</option>
                                <option value="2">2 Children</option>
                                <option value="3">3 Children</option>
                                <option value="4">4 Children</option>
                            </select>
                        </div>
                    </div>

                    <div style="display: flex; gap: 1rem; margin-top: 1rem;">
                        <button class="btn btn-primary" style="flex: 2;" onclick="instantBookingWithPayment()">
                            Check Availability & Book Instantly
                        </button>
                        <button class="btn btn-outline" style="flex: 1;" onclick="switchToVoucherModal()">
                            🎁 Gift Voucher
                        </button>
                    </div>
                </div>

                <!-- Step 2: Combined Availability, Pricing & Guest Details -->
                <div class="booking-step" id="bookingStep2">
                    <h3 style="color: var(--brand-teal); margin-bottom: 1.5rem;">Availability & Guest Information</h3>
                    
                    <div id="selectedDetailsDisplay" style="background: rgba(45, 90, 90, 0.05); padding: 1rem; border-radius: 10px; margin-bottom: 1.5rem;">
                        <!-- Selected accommodation and dates will be displayed here -->
                    </div>

                    <div id="availabilityResult" class="availability-result">
                        <!-- Availability status will be shown here -->
                    </div>

                    <div id="pricingBreakdown" class="price-breakdown" style="display: none;">
                        <h4 style="color: var(--brand-teal); margin-bottom: 1rem;">Price Breakdown (NZD)</h4>
                        <div class="price-row">
                            <span>Accommodation Rate:</span>
                            <span id="accommodationRate">$0</span>
                        </div>
                        <div class="price-row">
                            <span>Number of Nights:</span>
                            <span id="numberOfNights">0</span>
                        </div>
                        <div class="price-row">
                            <span>Subtotal:</span>
                            <span id="subtotal">$0</span>
                        </div>
                        <div class="price-row" id="extraGuestRow" style="display: none;">
                            <span>Extra Guest Charge:</span>
                            <span id="extraGuestCharge">$0</span>
                        </div>
                        <div class="price-row" id="petFeeRow" style="display: none;">
                            <span>Pet Cleaning Fee:</span>
                            <span id="petFee">$0</span>
                        </div>
                        <div class="price-row">
                            <span>Cleaning Fee:</span>
                            <span id="cleaningFee">$75</span>
                        </div>
                        <div class="price-row">
                            <span>Service Fee:</span>
                            <span id="serviceFee">$0</span>
                        </div>
                        <div class="price-row">
                            <span>GST (15%):</span>
                            <span id="gst">$0</span>
                        </div>
                        <div class="price-row price-total">
                            <span>Total Amount (NZD):</span>
                            <span id="totalAmount">$0</span>
                        </div>
                    </div>

                    <div id="guestDetailsSection" style="display: none;">
                        <h4 style="color: var(--brand-teal); margin: 2rem 0 1rem;">Guest Information</h4>
                        
                        <div class="guest-details-form">
                            <div class="guest-form-row">
                                <div class="booking-form-group">
                                    <label class="booking-form-label" for="guestFirstName">First Name</label>
                                    <input type="text" class="booking-form-input" id="guestFirstName" required>
                                </div>
                                <div class="booking-form-group">
                                    <label class="booking-form-label" for="guestLastName">Last Name</label>
                                    <input type="text" class="booking-form-input" id="guestLastName" required>
                                </div>
                            </div>

                            <div class="booking-form-group">
                                <label class="booking-form-label" for="guestEmail">Email Address</label>
                                <input type="email" class="booking-form-input" id="guestEmail" required onblur="validateEmail(this)" oninput="clearEmailError(this)">
                                <div class="email-error-message" id="guestEmailError" style="display: none; color: #dc2626; font-size: 0.85rem; margin-top: 0.25rem;"></div>
                            </div>

                            <div class="booking-form-group">
                                <label class="booking-form-label" for="guestPhone">Phone Number</label>
                                <input type="tel" class="booking-form-input" id="guestPhone" required>
                            </div>

                            <div class="booking-form-group">
                                <label class="booking-form-label" for="specialRequests">Special Requests (Optional)</label>
                                <input type="text" class="booking-form-input" id="specialRequests" placeholder="Early check-in, dietary requirements, etc.">
                            </div>

                            <!-- Pet Option for Lakeside Cottage -->
                            <div id="petOptionSection" style="display: none; background: #dcfdf7; border: 1px solid #10b981; padding: 1rem; border-radius: 10px; margin-top: 1rem;">
                                <div style="display: flex; align-items: center; gap: 0.5rem; margin-bottom: 0.5rem;">
                                    <span style="font-size: 1.2rem;">🐾</span>
                                    <h5 style="margin: 0; color: #047857; font-size: 1rem;">Pet-Friendly Option</h5>
                                </div>
                                <p style="margin: 0 0 1rem 0; color: #047857; font-size: 0.9rem;">Lakeside Cottage welcomes well-behaved pets with prior approval.</p>
                                
                                <div class="booking-form-group">
                                    <label class="booking-form-label" for="petDetails">Pet Details (Optional)</label>
                                    <input type="text" class="booking-form-input" id="petDetails" placeholder="Breed, size, special requirements">
                                </div>
                                
                                <div style="background: #f0fdf4; padding: 0.75rem; border-radius: 8px; margin-top: 0.5rem; font-size: 0.85rem; color: #166534;">
                                    <p style="margin: 0;"><strong>Pet Policy:</strong> Maximum 2 pets. $25 cleaning fee per pet. Pets must be supervised and not left alone in the cottage.</p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Secure Payment Section -->
                    <div id="instantPaymentSection" style="display: none; margin-top: 2rem;">
                        <h4 style="color: var(--brand-teal); margin-bottom: 1rem;">Secure Payment with Stripe</h4>
                        
                        <div id="securePaymentContainer">
                            <!-- Secure payment form will be loaded here -->
                        </div>
                        
                        <div style="background: #f8f9fa; padding: 1rem; border-radius: 10px; margin: 1rem 0; font-size: 0.9rem; color: #666;">
                            <p style="margin: 0;"><strong>🔒 Secure Payment:</strong> Your payment is processed securely through Stripe. We never store your card details.</p>
                            <p style="margin: 0.5rem 0 0;"><strong>💳 Accepted Cards:</strong> Visa, Mastercard, American Express</p>
                            <p style="margin: 0.5rem 0 0;"><strong>🔐 SSL Encrypted:</strong> All data is encrypted in transit</p>
                        </div>
                    </div>

                    <div style="display: flex; gap: 1rem; margin-top: 1.5rem;">
                        <button class="btn btn-outline" style="flex: 1;" onclick="goToBookingStep(1)">
                            Back to Selection
                        </button>
                    </div>
                </div>

                <!-- Step 3: Payment & Confirmation (Combined) -->
                <div class="booking-step" id="bookingStep3">
                    <h3 style="color: var(--brand-teal); margin-bottom: 1.5rem;">Complete Your Booking</h3>
                    
                    <div class="price-breakdown">
                        <h4 style="color: var(--brand-teal); margin-bottom: 1rem;">Booking Summary</h4>
                        <div class="price-row">
                            <span>Accommodation:</span>
                            <span id="finalAccommodationName">-</span>
                        </div>
                        <div class="price-row">
                            <span>Dates:</span>
                            <span id="finalDates">-</span>
                        </div>
                        <div class="price-row">
                            <span>Guests:</span>
                            <span id="finalGuests">-</span>
                        </div>
                        <div class="price-row">
                            <span>Duration:</span>
                            <span id="finalNights">-</span>
                        </div>
                    </div>

                    <div class="price-breakdown">
                        <h4 style="color: var(--brand-teal); margin-bottom: 1rem;">Price Breakdown (NZD)</h4>
                        <div class="price-row">
                            <span>Accommodation Rate:</span>
                            <span id="finalAccommodationRate">$0</span>
                        </div>
                        <div class="price-row">
                            <span>Number of Nights:</span>
                            <span id="finalNumberOfNights">0</span>
                        </div>
                        <div class="price-row">
                            <span>Subtotal:</span>
                            <span id="finalSubtotal">$0</span>
                        </div>
                        <div class="price-row">
                            <span>Cleaning Fee:</span>
                            <span id="finalCleaningFee">$75</span>
                        </div>
                        <div class="price-row">
                            <span>Service Fee:</span>
                            <span id="finalServiceFee">$0</span>
                        </div>
                        <div class="price-row">
                            <span style="font-weight: 600;">GST (15%):</span>
                            <span id="finalGST" style="font-weight: 600;">$0</span>
                        </div>
                        <div class="price-row price-total">
                            <span>Total Amount (NZD):</span>
                            <span id="finalTotalAmount">$0</span>
                        </div>
                    </div>

                    <div style="background: #fee2e2; border: 1px solid #f87171; padding: 1rem; border-radius: 10px; margin: 1.5rem 0;">
                        <p style="margin: 0; color: #dc2626; font-size: 0.9rem;"><strong>Payment Integration:</strong> This demo shows the booking flow. In production, this would integrate with Stripe/PayPal for secure payment processing.</p>
                    </div>

                    <div id="bookingResultSection">
                        <!-- This will show either booking success or form for additional info -->
                    </div>

                    <div style="display: flex; gap: 1rem; margin-top: 1.5rem;">
                        <button class="btn btn-outline" style="flex: 1;" onclick="goToBookingStep(2)">
                            Back to Details
                        </button>
                        <button class="btn btn-primary" style="flex: 1;" onclick="processBookingAndConfirm()">
                            Confirm & Pay
                        </button>
                    </div>
                </div>

                <div class="booking-security-badges">
                    <span>🔒 Secure SSL Encryption</span>
                    <span>✓ Instant Confirmation</span>
                    <span>📞 24/7 Support</span>
                    <span>💯 100% Uplisting Integration</span>
                </div>
            </div>
        </div>
    </div>

    <!-- Main Content -->
    <main id="mainContent">
        <!-- Breadcrumbs -->
        <div class="breadcrumbs">
            <div class="container">
                <span class="breadcrumb-item">Home</span>
                <span class="breadcrumb-item active" id="currentPage">Lakeside Retreat</span>
            </div>
        </div>

        <!-- Home Page -->
        <div class="page active" id="homePage">
            <!-- Streamlined Hero Section -->
            <section class="hero" style="background-image: linear-gradient(rgba(255, 255, 255, 0.1), rgba(255, 255, 255, 0.1)), url('images/vineyard.jpeg'); background-size: cover; background-position: center; background-repeat: no-repeat; min-height: 75vh;">
                <div class="container">
                    <div class="hero-content">
                        <h1>Lake Dunstan Meets Wine Country Magic</h1>
                    </div>
                </div>
            </section>

            <!-- Simple Introduction -->
            <section class="section" style="padding: 3rem 0;">
                <div class="container">
                    <div style="text-align: center; max-width: 800px; margin: 0 auto;">
                        <h2 style="font-family: 'Playfair Display', serif; font-size: 2.5rem; margin-bottom: 1.5rem; color: var(--brand-teal);">Luxury Domes & Cottage on Lake Dunstan</h2>
                        <p style="font-size: 1.2rem; margin-bottom: 2rem; line-height: 1.7;">Just 55 minutes from Queenstown and 30 minutes from Wanaka! Grid-tied solar with battery backup powers our luxury domes and cottage with panoramic lake views. Private spas, stargazing skylights, and direct cycle trail access. Skip expensive city hotels - enjoy peaceful luxury with zero environmental impact.</p>
                        
                        <div style="display: flex; justify-content: center; gap: 1rem; flex-wrap: wrap;">
                            <a href="#" class="btn btn-primary" onclick="openBookingModal()">Book Your Stay</a>
                            <a href="#" class="btn btn-outline" onclick="showPage('gallery')">View Gallery</a>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Simple Trust Badges -->
            <section class="section" style="background: rgba(45, 90, 90, 0.05); padding: 2rem 0;">
                <div class="container">
                    <div style="background: Blush beige; border-radius: 20px; padding: 2rem; box-shadow: var(--shadow); text-align: center;">
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 2rem;">
                            <div>
                                <div style="font-size: 2.5rem; font-weight: 700; color: var(--brand-teal);">4.9</div>
                                <div style="color: #fbbf24;">★★★★★</div>
                                <div style="font-size: 0.9rem; opacity: 0.8;">127 Reviews</div>
                            </div>
                            <div>
                                <div style="font-size: 2.5rem; font-weight: 700; color: var(--brand-teal);">98%</div>
                                <div style="font-size: 0.9rem; opacity: 0.8;">Would Recommend</div>
                            </div>
                            <div>
                                <div style="font-size: 2.5rem; font-weight: 700; color: var(--brand-teal);">45%</div>
                                <div style="font-size: 0.9rem; opacity: 0.8;">Return Guests</div>
                            </div>
                            <div>
                                <div style="font-size: 2.5rem; font-weight: 700; color: var(--brand-teal);">100%</div>
                                <div style="font-size: 0.9rem; opacity: 0.8;">Grid-Tied Solar</div>
                            </div>
                        </div>
                        
                        <div style="display: flex; justify-content: center; gap: 2rem; flex-wrap: wrap; padding-top: 1.5rem; border-top: 1px solid var(--border); margin-top: 1.5rem;">
                            <span style="background: #ff5a5f; color: white; padding: 0.4rem 0.8rem; border-radius: 6px; font-size: 0.8rem; font-weight: 600;">Airbnb Superhost</span>
                            <span style="background: #003580; color: white; padding: 0.4rem 0.8rem; border-radius: 6px; font-size: 0.8rem; font-weight: 600;">Booking.com 9.8/10</span>
                            <span style="background: #10b981; color: white; padding: 0.4rem 0.8rem; border-radius: 6px; font-size: 0.8rem; font-weight: 600;">300m to Cycle Trail</span>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Simple Story Teaser -->
            <section class="section" style="background: rgba(45, 212, 191, 0.05); padding: 3rem 0;">
                <div class="container">
                    <div class="grid grid-2" style="align-items: center;">
                        <div>
                            <h2 style="font-family: 'Playfair Display', serif; font-size: 2rem; margin-bottom: 1rem; color: var(--brand-teal);">Stephen & Sandy's Story</h2>
                            <p style="font-size: 1.1rem; line-height: 1.6; margin-bottom: 2rem;">From Wellington I.T. professionals to Central Otago hosts. A wrong turn in 2019 led us to this magical lakefront vineyard—and we never looked back.</p>
                            <a href="#" onclick="showPage('story')" class="btn btn-primary">Read Our Full Journey</a>
                        </div>
                        <div>
                            <div style="background: white; border-radius: 20px; padding: 2rem; box-shadow: var(--shadow); text-align: center;">
                                <div style="width: 80px; height: 80px; border-radius: 50%; background: var(--primary); margin: 0 auto 1rem; display: flex; align-items: center; justify-content: center; color: white; font-size: 2rem;">
                                    <i class="fas fa-heart"></i>
                                </div>
                                <h3 style="color: var(--brand-teal); margin-bottom: 1rem;">Your Hosts</h3>
                                <p style="margin: 0; line-height: 1.6;">Five years of sharing our slice of Central Otago paradise with guests from around the world.</p>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Accommodations Section -->
            <section class="section">
                <div class="container">
                    <div class="section-header">
                        <h2 class="section-title">Three Unique Experiences</h2>
                        <p class="section-subtitle">Luxury domes for couples, family cottage with lake access. All sustainably powered with zero environmental impact.</p>
                    </div>
                    
                    <!-- Clean accommodation cards with key highlights only -->
                    <div class="grid grid-3">
                        <div class="card">
                            <img src="images/pinotinternal.jpeg" alt="Dome Pinot luxury glamping accommodation with Lake Dunstan views Central Otago" class="card-image" onclick="openLightbox(this.src)">
                            <div class="card-content">
                                <h3 class="card-title">Dome Pinot</h3>
                                <p class="card-text">50sqm luxury dome with panoramic Lake Dunstan views, private spa, and stargazing skylight.</p>
                                
                                <div style="display: flex; flex-wrap: wrap; gap: 0.5rem; margin: 1rem 0; font-size: 0.85rem; color: var(--brand-teal);">
                                    <span>• Lake Views</span>
                                    <span>• Private Spa</span>
                                    <span>• Breakfast Included</span>
                                    <span>• Reliable Power</span>
                                </div>
                                
                                <div style="display: flex; justify-content: space-between; align-items: center; margin-top: 1.5rem;">
                                    <span style="font-weight: 600; color: var(--dark); font-size: 1.1rem;">From $450/night</span>
                                    <div style="display: flex; gap: 0.5rem;">
                                        <a href="#" class="btn btn-outline" onclick="showPage('stay')">View Details</a>
                                    <a href="#" class="btn btn-primary" onclick="openBookingModal('dome-pinot')">Book Now</a>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="card">
                            <img src="images/dome-rose-spa1.jpeg" alt="Dome Rosé romantic glamping accommodation Central Otago wine country" class="card-image" onclick="openLightbox(this.src)">
                            <div class="card-content">
                                <h3 class="card-title">Dome Rosé</h3>
                                <p class="card-text">40sqm romantic retreat with vineyard views, private spa, and full kitchen facilities.</p>
                                
                                <div style="display: flex; flex-wrap: wrap; gap: 0.5rem; margin: 1rem 0; font-size: 0.85rem; color: #be185d;">
                                    <span>• Vineyard Views</span>
                                    <span>• Private Spa</span>
                                    <span>• Breakfast Included</span>
                                    <span>• Always Powered</span>
                                </div>
                                
                                <div style="display: flex; justify-content: space-between; align-items: center; margin-top: 1.5rem;">
                                    <span style="font-weight: 600; color: var(--dark); font-size: 1.1rem;">From $380/night</span>
                                    <div style="display: flex; gap: 0.5rem;">
                                        <a href="#" class="btn btn-outline" onclick="showPage('stay')">View Details</a>
                                    <a href="#" class="btn btn-primary" onclick="openBookingModal('dome-rose')">Book Now</a>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="card">
                            <img src="images/lakeside-cottage-exterior.jpeg" alt="Lakeside Cottage family accommodation Lake Dunstan Central Otago" class="card-image" onclick="openLightbox(this.src)">
                            <div class="card-content">
                                <h3 class="card-title">Lakeside Cottage</h3>
                                <p class="card-text">Family cottage with direct lake access, wood-fired spa, and full kitchen facilities.</p>
                                
                                <div style="display: flex; flex-wrap: wrap; gap: 0.5rem; margin: 1rem 0; font-size: 0.85rem; color: var(--brand-teal);">
                                    <span>• Lake Access</span>
                                    <span>• Wood-Fired Spa</span>
                                    <span>• Family Friendly</span>
                                    <span>• Reliable Power</span>
                                </div>
                                
                                <div style="display: flex; justify-content: space-between; align-items: center; margin-top: 1.5rem;">
                                    <span style="font-weight: 600; color: var(--dark); font-size: 1.1rem;">From $580/night</span>
                                    <div style="display: flex; gap: 0.5rem;">
                                        <a href="#" class="btn btn-outline" onclick="showPage('stay')">View Details</a>
                                    <a href="#" class="btn btn-primary" onclick="openBookingModal('lakeside-cottage')">Book Now</a>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div style="text-align: center; margin-top: 3rem;">
                        <a href="#" onclick="showPage('stay')" class="btn btn-outline">View Full Details & Energy Systems</a>
                    </div>
                </div>
            </section>

            <!-- Local Area SEO Section -->
            <section class="section" style="background: rgba(251, 113, 133, 0.05); padding: 3rem 0;">
                <div class="container">
                    <div class="section-header">
                        <h2 class="section-title">Central Otago's Premier Location</h2>
                        <p class="section-subtitle">Perfectly positioned in New Zealand's world-famous wine region</p>
                    </div>
                    
                    <div class="grid grid-2">
                        <div class="card">
                            <div class="card-content">
                                <h3 class="card-title">🍷 Cromwell Wine Country</h3>
                                <p class="card-text">Located just 12km from <strong>Cromwell town centre</strong> in the heart of <strong>Central Otago wine country</strong>. Our vineyard accommodation puts you within walking distance of award-winning <strong>Central Otago Pinot Noir</strong> producers including nearby cellar doors and tasting rooms.</p>
                                <div style="margin-top: 1rem;">
                                    <a href="#" onclick="showPage('explore')" style="color: var(--brand-teal); text-decoration: none; font-weight: 500;">Explore Wine Country Activities →</a>
                                </div>
                            </div>
                        </div>
                        
                        <div class="card">
                            <div class="card-content">
                                <h3 class="card-title">🚴 Lake Dunstan Cycle Trail</h3>
                                <p class="card-text">Step directly from our <strong>Lake Dunstan accommodation</strong> onto the famous <strong>Cromwell to Clyde cycle trail</strong> - just 300 metres from your door. This scenic route follows the lake shore through <strong>Central Otago's</strong> dramatic landscapes, perfect for all skill levels.</p>
                                <div style="margin-top: 1rem;">
                                    <a href="#" onclick="showPage('explore')" style="color: var(--brand-teal); text-decoration: none; font-weight: 500;">View Cycling Information →</a>
                                </div>
                            </div>
                        </div>
                        
                        <div class="card">
                            <div class="card-content">
                                <h3 class="card-title">🏔️ Alpine Adventure Access</h3>
                                <p class="card-text">Perfect <strong>Cromwell accommodation</strong> base for exploring <strong>Central Otago</strong>. Queenstown adventures (55 min), Wanaka activities (30 min), and five ski fields within driving distance. Experience the best of the South Island from our <strong>Lake Dunstan</strong> location.</p>
                                <div style="margin-top: 1rem;">
                                    <a href="#" onclick="showPage('explore')" style="color: var(--brand-teal); text-decoration: none; font-weight: 500;">Plan Your Adventures →</a>
                                </div>
                            </div>
                        </div>
                        
                        <div class="card">
                            <div class="card-content">
                                <h3 class="card-title">🌅 Lake Dunstan Views</h3>
                                <p class="card-text">Wake to panoramic <strong>Lake Dunstan views</strong> from every accommodation. Our <strong>sustainable accommodation Central Otago</strong> offers uninterrupted lake and mountain vistas, with direct water access from the cottage and lake views from all luxury domes.</p>
                                <div style="margin-top: 1rem;">
                                    <a href="#" onclick="showPage('gallery')" style="color: var(--brand-teal); text-decoration: none; font-weight: 500;">View Gallery →</a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Simplified Reviews Preview -->
			<!-- Queenstown Wanaka Section -->
<section class="section" style="background: rgba(59, 130, 246, 0.05); padding: 3rem 0;">
    <div class="container">
        <div class="section-header">
            <h2 class="section-title">Smart Base for Queenstown & Wanaka</h2>
            <p class="section-subtitle">Adventure by day, peaceful luxury by night</p>
        </div>
        
        <div class="grid grid-2">
            <div class="card">
                <div class="card-content">
                    <h3 class="card-title">🏔️ Queenstown Adventures (55 min)</h3>
                    <p class="card-text">Experience bungy jumping, skydiving, and jet boats, then return to peaceful luxury. Save 40-60% vs expensive Queenstown hotels while enjoying our unique solar-powered experience.</p>
                </div>
            </div>
            
            <div class="card">
                <div class="card-content">
                    <h3 class="card-title">🌊 Wanaka Gateway (30 min)</h3>
                    <p class="card-text">Perfect for Roy's Peak hiking and That Wanaka Tree photos. Enjoy Wanaka's beauty without the accommodation booking rush - guaranteed availability in our energy-positive sanctuary.</p>
                </div>
            </div>
        </div>
    </div>
</section>
            <section class="section" style="background: rgba(251, 113, 133, 0.05);">
                <div class="container">
                    <div class="section-header">
                        <h2 class="section-title">What Our Guests Say</h2>
                        <p class="section-subtitle">127 five-star reviews and counting</p>
                    </div>
                    
                    <div class="grid grid-2">
                        <div class="card">
                            <div class="card-content">
                                <div style="color: #fbbf24; margin-bottom: 1rem;">★★★★★</div>
                                <h4 style="font-weight: 600; margin-bottom: 1rem; color: var(--dark);">Commercial-Grade Impressive</h4>
                                <p class="card-text">"Stephen and Sandy have created something truly special here. The dome was immaculate, their 16kW commercial-grade solar system is incredibly impressive, and waking up to Lake Dunstan views was magical. We'll definitely be back!"</p>
                                <div style="display: flex; align-items: center; gap: 1rem; margin-top: 1.5rem;">
                                    <div style="width: 40px; height: 40px; border-radius: 50%; background: var(--primary); color: white; display: flex; align-items: center; justify-content: center; font-weight: 600;">M</div>
                                    <div>
                                        <div style="font-weight: 600;">Michael R.</div>
                                        <div style="font-size: 0.9rem; opacity: 0.7;">Auckland, New Zealand • March 2024</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="card">
                            <div class="card-content">
                                <div style="color: #fbbf24; margin-bottom: 1rem;">★★★★★</div>
                                <h4 style="font-weight: 600; margin-bottom: 1rem; color: var(--dark);">Sustainable Luxury Excellence</h4>
                                <p class="card-text">"Perfect family holiday! Kids loved the lake access and we appreciated the advanced renewable energy approach. The hybrid system with real-time monitoring is incredibly sophisticated—luxury with zero environmental guilt."</p>
                                <div style="display: flex; align-items: center; gap: 1rem; margin-top: 1.5rem;">
                                    <div style="width: 40px; height: 40px; border-radius: 50%; background: var(--secondary); color: white; display: flex; align-items: center; justify-content: center; font-weight: 600;">K</div>
                                    <div>
                                        <div style="font-weight: 600;">Kelly T.</div>
                                        <div style="font-size: 0.9rem; opacity: 0.7;">Melbourne, Australia • February 2024</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div style="text-align: center; margin-top: 2rem;">
                        <a href="#" class="btn btn-outline" onclick="showPage('reviews')">Read All 127 Reviews</a>
                    </div>
                </div>
            </section>
        </div>

        <!-- Stay Page -->
        <div class="page" id="stayPage">
            <section class="hero">
                <div class="container">
                    <div class="hero-content">
                        <h1>Three Unique Luxury Experiences in Nature's Embrace</h1>
                        <div class="tagline">Dome Pinot • Dome Rosé • Lakeside Cottage</div>
                        <p>Each accommodation is powered by our sophisticated 16.72kW solar array with 16kWh Signergy battery storage. Couples escape to stargazing domes with private spas. Families create memories in our lakefront cottage with direct water access. All powered by energy-positive operations, all designed for five-star comfort, all positioned for Central Otago's most breathtaking views.</p>
                        
                        <!-- EVERY STAY INCLUDES SECTION - ENHANCED -->
                        <div style="background: linear-gradient(135deg, #2d5a5a 0%, #1a3a3a 100%); padding: 3rem; border-radius: 20px; margin: 3rem 0; max-width: 900px; margin-left: auto; margin-right: auto; box-shadow: 0 20px 40px rgba(0,0,0,0.3); position: relative; overflow: hidden; border: 2px solid #4a7c7c;">
                            <!-- Decorative circles -->
                            <div style="position: absolute; top: -50px; right: -50px; width: 150px; height: 150px; background: rgba(255, 255, 255, 0.1); border-radius: 50%;"></div>
                            <div style="position: absolute; bottom: -30px; left: -30px; width: 100px; height: 100px; background: rgba(255, 255, 255, 0.1); border-radius: 50%;"></div>
                            
                            <!-- Header -->
                            <div style="text-align: center; margin-bottom: 2.5rem;">
                                <div style="font-size: 3rem; margin-bottom: 1rem;">🌟</div>
                                <h3 style="color: white; font-size: 2.2rem; margin-bottom: 0.5rem; font-family: 'Playfair Display', serif; text-shadow: 0 2px 4px rgba(0,0,0,0.3);">Every Stay Includes</h3>
                                <p style="color: rgba(255, 255, 255, 0.95); font-size: 1.2rem; font-weight: 300;">Premium amenities and experiences included with every booking</p>
                            </div>
                            
                            <!-- Features Grid -->
                            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 1.5rem; text-align: left;">
                                <div style="background: rgba(255, 255, 255, 0.15); padding: 1.5rem; border-radius: 15px; backdrop-filter: blur(10px); border: 1px solid rgba(255, 255, 255, 0.2); box-shadow: 0 8px 16px rgba(0,0,0,0.1);">
                                    <div style="display: flex; align-items: center; gap: 1rem;">
                                        <div style="width: 35px; height: 35px; background: rgba(255, 255, 255, 0.25); border-radius: 50%; display: flex; align-items: center; justify-content: center; color: white; font-weight: 600; font-size: 1.1rem;">✓</div>
                                        <span style="color: white; font-weight: 600; font-size: 1.1rem;">Commercial-grade renewable energy</span>
                                    </div>
                                </div>
                                <div style="background: rgba(255, 255, 255, 0.15); padding: 1.5rem; border-radius: 15px; backdrop-filter: blur(10px); border: 1px solid rgba(255, 255, 255, 0.2); box-shadow: 0 8px 16px rgba(0,0,0,0.1);">
                                    <div style="display: flex; align-items: center; gap: 1rem;">
                                        <div style="width: 35px; height: 35px; background: rgba(255, 255, 255, 0.25); border-radius: 50%; display: flex; align-items: center; justify-content: center; color: white; font-weight: 600; font-size: 1.1rem;">✓</div>
                                        <span style="color: white; font-weight: 600; font-size: 1.1rem;">Private spa access (domes include breakfast)</span>
                                    </div>
                                </div>
                                <div style="background: rgba(255, 255, 255, 0.15); padding: 1.5rem; border-radius: 15px; backdrop-filter: blur(10px); border: 1px solid rgba(255, 255, 255, 0.2); box-shadow: 0 8px 16px rgba(0,0,0,0.1);">
                                    <div style="display: flex; align-items: center; gap: 1rem;">
                                        <div style="width: 35px; height: 35px; background: rgba(255, 255, 255, 0.25); border-radius: 50%; display: flex; align-items: center; justify-content: center; color: white; font-weight: 600; font-size: 1.1rem;">✓</div>
                                        <span style="color: white; font-weight: 600; font-size: 1.1rem;">300m to cycle trail access</span>
                                    </div>
                                </div>
                                <div style="background: rgba(255, 255, 255, 0.15); padding: 1.5rem; border-radius: 15px; backdrop-filter: blur(10px); border: 1px solid rgba(255, 255, 255, 0.2); box-shadow: 0 8px 16px rgba(0,0,0,0.1);">
                                    <div style="display: flex; align-items: center; gap: 1rem;">
                                        <div style="width: 35px; height: 35px; background: rgba(255, 255, 255, 0.25); border-radius: 50%; display: flex; align-items: center; justify-content: center; color: white; font-weight: 600; font-size: 1.1rem;">✓</div>
                                        <span style="color: white; font-weight: 600; font-size: 1.1rem;">Real-time energy monitoring tour</span>
                                    </div>
                                </div>
                                <div style="background: rgba(255, 255, 255, 0.15); padding: 1.5rem; border-radius: 15px; backdrop-filter: blur(10px); border: 1px solid rgba(255, 255, 255, 0.2); box-shadow: 0 8px 16px rgba(0,0,0,0.1);">
                                    <div style="display: flex; align-items: center; gap: 1rem;">
                                        <div style="width: 35px; height: 35px; background: rgba(255, 255, 255, 0.25); border-radius: 50%; display: flex; align-items: center; justify-content: center; color: white; font-weight: 600; font-size: 1.1rem;">✓</div>
                                        <span style="color: white; font-weight: 600; font-size: 1.1rem;">Onsite vineyard setting</span>
                                    </div>
                                </div>
                                <div style="background: rgba(255, 255, 255, 0.15); padding: 1.5rem; border-radius: 15px; backdrop-filter: blur(10px); border: 1px solid rgba(255, 255, 255, 0.2); box-shadow: 0 8px 16px rgba(0,0,0,0.1);">
                                    <div style="display: flex; align-items: center; gap: 1rem;">
                                        <div style="width: 35px; height: 35px; background: rgba(255, 255, 255, 0.25); border-radius: 50%; display: flex; align-items: center; justify-content: center; color: white; font-weight: 600; font-size: 1.1rem;">✓</div>
                                        <span style="color: white; font-weight: 600; font-size: 1.1rem;">Stephen & Sandy's expert service</span>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Footer -->
                            <div style="text-align: center; margin-top: 2.5rem; padding-top: 2rem; border-top: 2px solid rgba(255, 255, 255, 0.3);">
                                <p style="color: rgba(255, 255, 255, 0.95); font-size: 1rem; margin: 0; font-weight: 500;">All amenities included • No hidden fees • Premium experience guaranteed</p>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <section class="section">
                <div class="container">
                    <div class="section-header">
                        <h2 class="section-title">Detailed Accommodations</h2>
                        <p class="section-subtitle">All accommodations feature our 16.72kW solar array with 20kW hybrid inverter and smart energy management. Dome bookings include continental breakfast and private spa access. Cottage guests enjoy kitchenette facilities and direct lake access. Stephen & Sandy provide technical energy system tours upon request.</p>
                    </div>
                    <!-- Full detailed accommodation content remains the same This is the stay page-->
                    <div class="grid grid-3">
                        <div class="card">
                            <img src="images/PinotLakeView.jpeg" alt="Dome Pinot" class="card-image" onclick="openLightbox(this.src)">
                            <div class="card-content">
                                <h3 class="card-title">Dome Pinot</h3>
                                <p class="card-text">Welcome to Lakeside Glamping's flagship experience! Our largest and most spacious luxury dome offers an unforgettable 50sqm open living space, where the serenity of nature combines seamlessly with five-star accommodation comforts. Purposely built for couples seeking the ultimate romantic escape.</p>
                                
                                <!-- Compact Key Features -->
                                <div style="background: rgba(45, 90, 90, 0.05); padding: 1.5rem; border-radius: 10px; margin: 1.5rem 0;">
                                    <h4 style="color: var(--brand-teal); margin-bottom: 1rem; font-size: 1.1rem;">Key Features</h4>
                                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 0.5rem; font-size: 0.9rem;">
                                        <div><i class="fas fa-bed"></i> Super king bed</div>
                                        <div><i class="fas fa-bath"></i> Private spa</div>
                                        <div><i class="fas fa-utensils"></i> Full kitchen</div>
                                        <div><i class="fas fa-fire"></i> Weber BBQ</div>
                                        <div><i class="fas fa-wifi"></i> Free WiFi</div>
                                        <div><i class="fas fa-parking"></i> Free parking</div>
                                        <div><i class="fas fa-snowflake"></i> Air conditioning</div>
                                        <div><i class="fas fa-tv"></i> 55" OLED TV</div>
                                        <div><i class="fas fa-leaf"></i> Mountain & lake views</div>
                                        <div><i class="fas fa-route"></i> Cycle trail 300m</div>
                                    </div>
                                </div>

                                <!-- Quick Policies -->
                                <div style="background: #fef3c7; border: 1px solid #f59e0b; padding: 1rem; border-radius: 10px; margin: 1rem 0;">
                                    <div style="display: flex; justify-content: space-between; align-items: center; font-size: 0.9rem; color: #92400e;">
                                        <span><i class="fas fa-users"></i> 2 guests max</span>
                                        <span><i class="fas fa-clock"></i> Check-in 3PM</span>
                                        <span><i class="fas fa-clock"></i> Check-out 10AM</span>
                                        <span><i class="fas fa-paw"></i> No pets</span>
                                </div>
                                </div>

                                <div style="display: flex; justify-content: space-between; align-items: center; margin-top: 1.5rem;">
                                    <span style="font-weight: 600; color: var(--dark); font-size: 1.1rem;">From $450/night</span>
                                    <a href="#" class="btn btn-primary" onclick="openBookingModal('dome-pinot')">Book Now</a>
                                </div>
                            </div>
                        </div>
                        <div class="card">
                            <img src="images/dome-rose-spa1.jpeg" alt="Dome Rosé" class="card-image" onclick="openLightbox(this.src)">
                            <div class="card-content">
                                <h3 class="card-title">Dome Rosé</h3>
                                <p class="card-text">Welcome to Lakeside Glamping, where luxury meets nature in perfect harmony. Dome Rosé offers an intimate 40sqm open living space, purposely built for couples seeking a unique romantic getaway that combines the serenity of nature with five-star accommodation comforts.</p>
                                
                                <!-- Compact Key Features -->
                                <div style="background: rgba(251, 113, 133, 0.05); padding: 1.5rem; border-radius: 10px; margin: 1.5rem 0;">
                                    <h4 style="color: #be185d; margin-bottom: 1rem; font-size: 1.1rem;">Key Features</h4>
                                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 0.5rem; font-size: 0.9rem;">
                                        <div><i class="fas fa-bed"></i> Super king bed</div>
                                        <div><i class="fas fa-bath"></i> Private spa</div>
                                        <div><i class="fas fa-utensils"></i> Full kitchen</div>
                                        <div><i class="fas fa-fire"></i> Weber BBQ</div>
                                        <div><i class="fas fa-wifi"></i> Free WiFi</div>
                                        <div><i class="fas fa-parking"></i> Free parking</div>
                                        <div><i class="fas fa-snowflake"></i> Air conditioning</div>
                                        <div><i class="fas fa-tv"></i> 55" OLED TV</div>
                                        <div><i class="fas fa-leaf"></i> Vineyard views</div>
                                        <div><i class="fas fa-route"></i> Cycle trail 300m</div>
                                </div>
                                </div>

                                <!-- Quick Policies -->
                                <div style="background: #fee2e2; border: 1px solid #f87171; padding: 1rem; border-radius: 10px; margin: 1rem 0;">
                                    <div style="display: flex; justify-content: space-between; align-items: center; font-size: 0.9rem; color: #dc2626;">
                                        <span><i class="fas fa-users"></i> 2 adults only</span>
                                        <span><i class="fas fa-clock"></i> Check-in 3PM</span>
                                        <span><i class="fas fa-clock"></i> Check-out 10AM</span>
                                        <span><i class="fas fa-paw"></i> No pets</span>
                                    </div>
                                </div>

                                <div style="display: flex; justify-content: space-between; align-items: center; margin-top: 1.5rem;">
                                    <span style="font-weight: 600; color: var(--dark); font-size: 1.1rem;">From $380/night</span>
                                    <a href="#" class="btn btn-primary" onclick="openBookingModal('dome-rose')">Book Now</a>
                                </div>
                            </div>
                        </div>
                        <div class="card">
                            <img src="images/lakeside-cottage-exterior.jpeg" alt="Lakeside Cottage" class="card-image" onclick="openLightbox(this.src)">
                            <div class="card-content">
                                <h3 class="card-title">Lakeside Cottage</h3>
                                <p class="card-text">Welcome to your luxurious Central Otago escape! This stunning self-contained cottage offers breathtaking panoramic views over Lake Dunstan with the epic backdrop of Mt Pisa. Nestled in our boutique vineyard on the shores of Lake Dunstan, just 10 minutes from central Cromwell, 30 minutes from Wanaka, and 55 minutes from Queenstown.</p>
                                
                                <!-- Compact Key Features -->
                                <div style="background: rgba(45, 90, 90, 0.05); padding: 1.5rem; border-radius: 10px; margin: 1.5rem 0;">
                                    <h4 style="color: var(--brand-teal); margin-bottom: 1rem; font-size: 1.1rem;">Key Features</h4>
                                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 0.5rem; font-size: 0.9rem;">
                                        <div><i class="fas fa-bed"></i> Queen bed + sofa bed</div>
                                        <div><i class="fas fa-bath"></i> Private hot tub</div>
                                        <div><i class="fas fa-utensils"></i> Full kitchenette</div>
                                        <div><i class="fas fa-fire"></i> Weber BBQ</div>
                                        <div><i class="fas fa-wifi"></i> Free WiFi</div>
                                        <div><i class="fas fa-parking"></i> Garage parking</div>
                                        <div><i class="fas fa-snowflake"></i> Air conditioning</div>
                                        <div><i class="fas fa-tv"></i> TV</div>
                                        <div><i class="fas fa-leaf"></i> Lake & mountain views</div>
                                        <div><i class="fas fa-route"></i> Cycle trail 300m</div>
                                        <div><i class="fas fa-tshirt"></i> Washing machine</div>
                                        <div><i class="fas fa-paw"></i> Pet friendly</div>
                                    </div>
                                </div>

                                <!-- Quick Policies -->
                                <div style="background: #dcfdf7; border: 1px solid #10b981; padding: 1rem; border-radius: 10px; margin: 1rem 0;">
                                    <div style="display: flex; justify-content: space-between; align-items: center; font-size: 0.9rem; color: #047857;">
                                        <span><i class="fas fa-users"></i> Up to 3 guests</span>
                                        <span><i class="fas fa-clock"></i> Check-in 3PM</span>
                                        <span><i class="fas fa-clock"></i> Check-out 10AM</span>
                                        <span><i class="fas fa-paw"></i> Pets welcome</span>
                                </div>
                                </div>

                                <div style="display: flex; justify-content: space-between; align-items: center; margin-top: 1.5rem;">
                                    <span style="font-weight: 600; color: var(--dark); font-size: 1.1rem;">From $580/night</span>
                                    <a href="#" class="btn btn-primary" onclick="openBookingModal('lakeside-cottage')">Book Now</a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
        </div>

        <!-- Gallery Page for the stay-->
        <div class="page" id="galleryPage">
            <section class="hero">
                <div class="container">
                    <div class="hero-content">
                        <h1>See What 127 Five-Star Reviews Are Talking About</h1>
                        <div class="tagline">Lake Views • Commercial-Grade Solar Innovation • Wine Country Setting</div>
                        <p>Panoramic Lake Dunstan vistas from every accommodation. Innovative 16.72kW solar technology that powers luxury without compromise. Central Otago's premier wine region as your backyard. These aren't just photos—they're glimpses into experiences that earn 98% guest recommendation rates.</p>
                        
                        <div style="background: white; border-radius: 15px; padding: 1.5rem; margin: 2rem 0; max-width: 500px; margin-left: auto; margin-right: auto; box-shadow: 0 4px 6px rgba(0,0,0,0.1);">
                            <div style="color: var(--brand-teal); font-weight: 600; margin-bottom: 1rem;">Most Photographed Moments:</div>
                            <div style="text-align: left; line-height: 1.8;">
                                🌅 Sunrise over Lake Dunstan from dome skylights<br>
                                🍷 Private spa sessions with vineyard views<br>
                                ⭐ Stargazing through panoramic dome windows<br>
                                🚴 Cycle trail access directly from property<br>
                                🔋 38 solar panels powering luxury amenities<br>
                                📊 Real-time energy monitoring displays
                            </div>
                        </div>
                    </div>
                </div>
            </section>
            <section class="section"> //this is gallery page
                <div class="container">
                    <div class="grid grid-3">
                        <div class="card">
                            <img src="images/pinotexternal2.jpeg" alt="Luxury glamping dome accommodation with Lake Dunstan views Central Otago New Zealand" class="card-image" onclick="openLightbox(this.src)">
                        </div>
                        <div class="card">
                            <img src="images/rosefront.jpeg" alt="Romantic dome accommodation Central Otago wine country with vineyard views" class="card-image" onclick="openLightbox(this.src)">
                        </div>
                        <div class="card">
                            <img src="images/lakeside-cottage-lake-view.jpeg" alt="Family cottage accommodation Lake Dunstan Central Otago with lake access" class="card-image" onclick="openLightbox(this.src)">
                        </div>
                        <div class="card">
                            <img src="images/galleryrainbow.jpeg" alt="Lake Dunstan panoramic views from luxury accommodation Central Otago" class="card-image" onclick="openLightbox(this.src)">
                        </div>
                        <div class="card">
                            <img src="images/FontView1200.jpeg" alt="Central Otago vineyard setting luxury glamping accommodation near Cromwell" class="card-image" onclick="openLightbox(this.src)">
                        </div>
                        <div class="card">
                            <img src="images/Frontmountainview.jpeg" alt="Private spa luxury accommodation Central Otago with mountain views" class="card-image" onclick="openLightbox(this.src)">
                        </div>
                    </div>
                </div>
            </section>
        </div>

        <!-- Blog Page -->
        <div class="page" id="blogPage">
            <section class="hero">
                <div class="container">
                    <div class="hero-content">
                        <h1>Local Secrets from Stephen & Sandy</h1>
                        <div class="tagline">Five Years Living Here • 500+ Guests Guided • Commercial-Grade Energy Experts</div>
                        <p>From I.T. professionals to Central Otago hosts and renewable energy innovators—we've learned every cellar door worth visiting, every cycle route that takes your breath away, every season's hidden gems, plus how to design and maintain commercial-grade solar systems. Our comprehensive guides come from hosting guests from 20+ countries and calling this magical region home.</p>
                        
                        <div style="background: rgba(45, 90, 90, 0.05); padding: 1.5rem; border-radius: 15px; margin: 2rem 0; max-width: 600px; margin-left: auto; margin-right: auto;">
                            <div style="font-weight: 600; color: var(--brand-teal); margin-bottom: 1rem;">Guides Coming Soon:</div>
                            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 0.5rem; text-align: left; font-size: 0.95rem;">
                                <div>📍 Walking-distance wineries from our property</div>
                                <div>🔋 Behind-the-scenes: Our 16.72kW system design</div>
                                <div>🚴 Cycle trail connections & difficulty levels</div>
                                <div>🏔️ Seasonal activity calendar by month</div>
                                <div>🍽️ Restaurant recommendations by budget</div>
                                <div>📊 Energy monitoring for tech enthusiasts</div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
            <section class="section">
                <div class="container">
                    <div class="section-header">
                        <h2 class="section-title">Local Expertise & Energy Innovation</h2>
                        <p class="section-subtitle">Comprehensive guides from your hosts Stephen & Sandy, combining local knowledge with renewable energy expertise</p>
                    </div>
                    <div class="grid grid-2">
                        <div class="card">
                            <div class="card-content">
                                <div style="background: var(--primary); height: 4px; border-radius: 2px; margin-bottom: 1.5rem;"></div>
                                <h3 class="card-title">Ultimate Central Otago Guide</h3>
                                <p class="card-text">Your comprehensive guide to Central Otago's best wineries, restaurants, activities and hidden gems. Written from our experience hosting guests and living in this stunning region for five years.</p>
                                <div style="display: flex; justify-content: space-between; align-items: center; margin-top: 1.5rem;">
                                    <span style="color: var(--brand-teal); font-size: 0.9rem; font-weight: 500;">15 min read • Essential Guide</span>
                                    <a href="#" class="btn btn-outline" onclick="alert('Full guide coming soon!')">Read Guide</a>
                                </div>
                            </div>
                        </div>

                        <div class="card">
                            <div class="card-content">
                                <div style="background: #10b981; height: 4px; border-radius: 2px; margin-bottom: 1.5rem;"></div>
                                <h3 class="card-title">Commercial-Grade Solar: Our 16.72kW Journey</h3>
                                <p class="card-text">From I.T. professional to renewable energy designer - Sandy's technical story of achieving commercial-grade energy independence while maintaining five-star comfort. 38 x 440W Helios panels, 16kWh Signergy storage, and real-time monitoring.</p>
                                <div style="display: flex; justify-content: space-between; align-items: center; margin-top: 1.5rem;">
                                    <span style="color: var(--brand-teal); font-size: 0.9rem; font-weight: 500;">12 min read • Technology Deep Dive</span>
                                    <a href="#" class="btn btn-outline" onclick="alert('Technical specs coming soon!')">Read Story</a>
                                </div>
                            </div>
                        </div>

                        <div class="card">
                            <div class="card-content">
                                <div style="background: #f59e0b; height: 4px; border-radius: 2px; margin-bottom: 1.5rem;"></div>
                                <h3 class="card-title">Seasonal Central Otago: When to Visit</h3>
                                <p class="card-text">Month-by-month guide to Central Otago's seasons. From spring blossoms to winter skiing, discover the perfect time for your interests and see what each season offers at our energy-positive retreat.</p>
                                <div style="display: flex; justify-content: space-between; align-items: center; margin-top: 1.5rem;">
                                    <span style="color: var(--brand-teal); font-size: 0.9rem; font-weight: 500;">12 min read • Planning</span>
                                    <a href="#" class="btn btn-outline" onclick="alert('Seasonal guide coming soon!')">Read Guide</a>
                                </div>
                            </div>
                        </div>

                        <div class="card">
                            <div class="card-content">
                                <div style="background: #8b5cf6; height: 4px; border-radius: 2px; margin-bottom: 1.5rem;"></div>
                                <h3 class="card-title">Wine Country from Our Doorstep</h3>
                                <p class="card-text">A vineyard owner's perspective on Central Otago's world-class wine scene. Discover which cellar doors are walking distance, harvest season insights, and wine tasting tips from local experts.</p>
                                <div style="display: flex; justify-content: space-between; align-items: center; margin-top: 1.5rem;">
                                    <span style="color: var(--brand-teal); font-size: 0.9rem; font-weight: 500;">10 min read • Wine Country</span>
                                    <a href="#" class="btn btn-outline" onclick="alert('Wine guide coming soon!')">Read Guide</a>
                                </div>
                            </div>
                        </div>

                        <div class="card">
                            <div class="card-content">
                                <div style="background: #06b6d4; height: 4px; border-radius: 2px; margin-bottom: 1.5rem;"></div>
                                <h3 class="card-title">Energy Independence: Technical Deep Dive</h3>
                                <p class="card-text">How we designed New Zealand's most advanced accommodation energy system. Technical specifications, performance data, and lessons learned from our 20kW hybrid inverter and Signergy battery management.</p>
                                <div style="display: flex; justify-content: space-between; align-items: center; margin-top: 1.5rem;">
                                    <span style="color: var(--brand-teal); font-size: 0.9rem; font-weight: 500;">15 min read • Technical</span>
                                    <a href="#" class="btn btn-outline" onclick="alert('Technical guide coming soon!')">Read Guide</a>
                                </div>
                            </div>
                        </div>

                        <div class="card">
                            <div class="card-content">
                                <div style="background: #ec4899; height: 4px; border-radius: 2px; margin-bottom: 1.5rem;"></div>
                                <h3 class="card-title">Choosing Your Perfect Energy-Positive Stay</h3>
                                <p class="card-text">Honest guide to our three unique accommodations powered by commercial-grade renewable energy. What makes the domes perfect for couples, why families love the cottage, and how to choose the right sustainable luxury experience.</p>
                                <div style="display: flex; justify-content: space-between; align-items: center; margin-top: 1.5rem;">
                                    <span style="color: var(--brand-teal); font-size: 0.9rem; font-weight: 500;">8 min read • Accommodation</span>
                                    <a href="#" class="btn btn-outline" onclick="alert('Accommodation guide coming soon!')">Read Guide</a>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Resource Hub Notice -->
                    <div style="text-align: center; margin-top: 3rem;">
                        <div class="card" style="max-width: 600px; margin: 0 auto; background: rgba(45, 90, 90, 0.05);">
                            <div class="card-content">
                                <h3 style="color: var(--brand-teal); margin-bottom: 1rem;">📚 Comprehensive Travel & Energy Resources</h3>
                                <p style="margin-bottom: 1.5rem; line-height: 1.6;">These in-depth guides are being developed based on five years of hosting guests, living in Central Otago, and operating New Zealand's most advanced accommodation energy system. Each guide will be comprehensive, practical, and designed to enhance your stay.</p>
                                <div style="display: flex; gap: 1rem; justify-content: center; flex-wrap: wrap;">
                                    <a href="#" class="btn btn-outline" onclick="showPage('contact')">Get Notified When Published</a>
                                    <a href="#" class="btn btn-primary" onclick="showPage('contact')">Ask a Specific Question</a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
        </div>

        <!-- Reviews Page -->
        <div class="page" id="reviewsPage">
            <section class="hero">
                <div class="container">
                    <div class="hero-content">
                        <h1>4.9 Stars • 127 Stories • 45% Return Rate</h1>
                        <div class="tagline">Airbnb • Booking.com • Direct Bookings • All Platforms</div>
                        <p>Read why guests choose Lakeside Retreat again and again. From first-time visitors amazed by our commercial-grade solar innovation to returning families who've made this their annual tradition. Every review tells the story of sustainable luxury that doesn't compromise on comfort.</p>
                        
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 2rem; margin: 2rem 0; background: white; padding: 2rem; border-radius: 15px; box-shadow: 0 4px 6px rgba(0,0,0,0.1);">
                            <div style="text-align: center;">
                                <div style="font-size: 2.5rem; font-weight: 700; color: var(--brand-teal);">98%</div>
                                <div style="font-size: 0.9rem; opacity: 0.8;">Would Recommend</div>
                            </div>
                            <div style="text-align: center;">
                                <div style="font-size: 2.5rem; font-weight: 700; color: var(--brand-teal);">45%</div>
                                <div style="font-size: 0.9rem; opacity: 0.8;">Return Guests</div>
                            </div>
                            <div style="text-align: center;">
                                <div style="font-size: 2.5rem; font-weight: 700; color: var(--brand-teal);">127</div>
                                <div style="font-size: 0.9rem; opacity: 0.8;">Verified Reviews</div>
                            </div>
                            <div style="text-align: center;">
                                <div style="font-size: 2.5rem; font-weight: 700; color: var(--brand-teal);">16.72kW</div>
                                <div style="font-size: 0.9rem; opacity: 0.8;">Solar System</div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
            <section class="section">
                <div class="container">
                    <!-- Review Statistics -->
                    <div style="background: white; border-radius: 20px; padding: 2rem; box-shadow: var(--shadow); margin-bottom: 3rem;">
                        <div class="stats" style="margin: 0;">
                            <div class="stat">
                                <div class="stat-number">4.9</div>
                                <div class="stat-label">Average Rating</div>
                            </div>
                            <div class="stat">
                                <div class="stat-number">127</div>
                                <div class="stat-label">Reviews</div>
                            </div>
                            <div class="stat">
                                <div class="stat-number">98%</div>
                                <div class="stat-label">Would Recommend</div>
                            </div>
                            <div class="stat">
                                <div class="stat-number">45%</div>
                                <div class="stat-label">Return Guests</div>
                            </div>
                        </div>
                        
                        <!-- Platform Verification Badges -->
                        <div style="text-align: center; margin-top: 2rem; padding-top: 2rem; border-top: 1px solid var(--border);">
                            <p style="margin-bottom: 1rem; color: var(--text); opacity: 0.8;">Also verified on:</p>
                            <div style="display: flex; justify-content: center; gap: 2rem; flex-wrap: wrap;">
                                <a href="#" style="display: flex; align-items: center; gap: 0.5rem; color: var(--brand-teal); text-decoration: none; font-weight: 500;">
                                    <span style="background: #ff5a5f; color: white; padding: 0.25rem 0.5rem; border-radius: 4px; font-size: 0.8rem;">Airbnb</span>
                                    4.9/5.0 (67 reviews)
                                </a>
                                <a href="#" style="display: flex; align-items: center; gap: 0.5rem; color: var(--brand-teal); text-decoration: none; font-weight: 500;">
                                    <span style="background: #003580; color: white; padding: 0.25rem 0.5rem; border-radius: 4px; font-size: 0.8rem;">Booking.com</span>
                                    9.8/10 (60 reviews)
                                </a>
                            </div>
                        </div>
                    </div>

                    <!-- Guest Reviews -->
                    <div class="grid grid-2">
                        <div class="card">
                            <div class="card-content">
                                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem;">
                                    <div style="display: flex; align-items: center;">
                                        <span style="color: #fbbf24;">★★★★★</span>
                                        <span style="margin-left: 0.5rem; font-weight: 600; color: var(--brand-teal);">5.0</span>
                                    </div>
                                </div>
                                <h4 style="font-weight: 600; margin-bottom: 1rem; color: var(--dark);">Commercial-Grade System Impressive</h4>
                                <p class="card-text">"Stephen and Sandy have created something truly special here. The dome was immaculate, their 16kW commercial-grade solar system with real-time monitoring is incredibly impressive, and waking up to Lake Dunstan views was magical. We'll definitely be back!"</p>
                                <div style="display: flex; align-items: center; gap: 1rem; margin-top: 1.5rem;">
                                    <div style="width: 40px; height: 40px; border-radius: 50%; background: var(--primary); color: white; display: flex; align-items: center; justify-content: center; font-weight: 600;">M</div>
                                    <div>
                                        <div style="font-weight: 600;">Michael R.</div>
                                        <div style="font-size: 0.9rem; opacity: 0.7;">Auckland, New Zealand • March 2024</div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="card">
                            <div class="card-content">
                                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem;">
                                    <div style="display: flex; align-items: center;">
                                        <span style="color: #fbbf24;">★★★★★</span>
                                        <span style="margin-left: 0.5rem; font-weight: 600; color: var(--brand-teal);">5.0</span>
                                    </div>
                                </div>
                                <h4 style="font-weight: 600; margin-bottom: 1rem; color: var(--dark);">Sustainable Luxury Excellence</h4>
                                <p class="card-text">"The cottage was perfect for our family of four. Kids loved having direct access to the lake, and we appreciated the advanced renewable energy approach. The commercial-grade hybrid system generating way more power than they use is incredibly sophisticated."</p>
                                <div style="display: flex; align-items: center; gap: 1rem; margin-top: 1.5rem;">
                                    <div style="width: 40px; height: 40px; border-radius: 50%; background: var(--secondary); color: white; display: flex; align-items: center; justify-content: center; font-weight: 600;">K</div>
                                    <div>
                                        <div style="font-weight: 600;">Kelly T.</div>
                                        <div style="font-size: 0.9rem; opacity: 0.7;">Melbourne, Australia • February 2024</div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="card">
                            <div class="card-content">
                                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem;">
                                    <div style="display: flex; align-items: center;">
                                        <span style="color: #fbbf24;">★★★★★</span>
                                        <span style="margin-left: 0.5rem; font-weight: 600; color: var(--brand-teal);">5.0</span>
                                    </div>
                                </div>
                                <h4 style="font-weight: 600; margin-bottom: 1rem; color: var(--dark);">Energy Innovation Fascinating</h4>
                                <p class="card-text">"Dome Rosé was absolutely perfect for our anniversary. The attention to detail, sunset views, and champagne welcome made it unforgettable. Sandy's technical explanation of their 38-panel solar array was fascinating. Highly recommend for couples!"</p>
                                <div style="display: flex; align-items: center; gap: 1rem; margin-top: 1.5rem;">
                                    <div style="width: 40px; height: 40px; border-radius: 50%; background: #be185d; color: white; display: flex; align-items: center; justify-content: center; font-weight: 600;">L</div>
                                    <div>
                                        <div style="font-weight: 600;">Lisa & James D.</div>
                                        <div style="font-size: 0.9rem; opacity: 0.7;">Christchurch, New Zealand • January 2024</div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="card">
                            <div class="card-content">
                                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem;">
                                    <div style="display: flex; align-items: center;">
                                        <span style="color: #fbbf24;">★★★★★</span>
                                        <span style="margin-left: 0.5rem; font-weight: 600; color: var(--brand-teal);">5.0</span>
                                    </div>
                                </div>
                                <h4 style="font-weight: 600; margin-bottom: 1rem; color: var(--dark);">Tech Innovation Done Right</h4>
                                <p class="card-text">"As someone passionate about renewable technology, I was thrilled to find luxury accommodation that's genuinely energy-positive with commercial-grade equipment. The education about their Signergy battery management system was fascinating. Luxury with zero environmental guilt."</p>
                                <div style="display: flex; align-items: center; gap: 1rem; margin-top: 1.5rem;">
                                    <div style="width: 40px; height: 40px; border-radius: 50%; background: #047857; color: white; display: flex; align-items: center; justify-content: center; font-weight: 600;">A</div>
                                    <div>
                                        <div style="font-weight: 600;">Alex P.</div>
                                        <div style="font-size: 0.9rem; opacity: 0.7;">Wellington, New Zealand • December 2023</div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="card">
                            <div class="card-content">
                                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem;">
                                    <div style="display: flex; align-items: center;">
                                        <span style="color: #fbbf24;">★★★★★</span>
                                        <span style="margin-left: 0.5rem; font-weight: 600; color: var(--brand-teal);">5.0</span>
                                    </div>
                                </div>
                                <h4 style="font-weight: 600; margin-bottom: 1rem; color: var(--dark);">Advanced Energy Paradise</h4>
                                <p class="card-text">"The location for cycling is unbeatable - step out the door and you're on the trail. After a day exploring Central Otago, coming back to their energy-positive accommodation with live monitoring dashboard was perfect. Stephen's energy system tour was incredibly educational."</p>
                                <div style="display: flex; align-items: center; gap: 1rem; margin-top: 1.5rem;">
                                    <div style="width: 40px; height: 40px; border-radius: 50%; background: #1d4ed8; color: white; display: flex; align-items: center; justify-content: center; font-weight: 600;">D</div>
                                    <div>
                                        <div style="font-weight: 600;">David M.</div>
                                        <div style="font-size: 0.9rem; opacity: 0.7;">Sydney, Australia • November 2023</div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="card">
                            <div class="card-content">
                                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem;">
                                    <div style="display: flex; align-items: center;">
                                        <span style="color: #fbbf24;">★★★★★</span>
                                        <span style="margin-left: 0.5rem; font-weight: 600; color: var(--brand-teal);">5.0</span>
                                    </div>
                                </div>
                                <h4 style="font-weight: 600; margin-bottom: 1rem; color: var(--dark);">Third Time Visitors</h4>
                                <p class="card-text">"This was our third stay and it just keeps getting better. Stephen and Sandy's hospitality is unmatched, and we love supporting their advanced sustainable approach. Watching their energy dashboard show they're contributing to the grid while we enjoy luxury is amazing. Already booked for next year!"</p>
                                <div style="display: flex; align-items: center; gap: 1rem; margin-top: 1.5rem;">
                                    <div style="width: 40px; height: 40px; border-radius: 50%; background: var(--primary); color: white; display: flex; align-items: center; justify-content: center; font-weight: 600;">C</div>
                                    <div>
                                        <div style="font-weight: 600;">Claire & Rob S.</div>
                                        <div style="font-size: 0.9rem; opacity: 0.7;">Auckland, New Zealand • October 2023</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Load More Reviews Button -->
                    <div style="text-align: center; margin-top: 3rem;">
                        <button class="btn btn-outline" onclick="loadMoreReviews()">Load More Reviews</button>
                    </div>
                </div>
            </section>
        </div>

        <!-- Story Page -->
        <div class="page" id="storyPage">
            <section class="hero">
                <div class="container">
                    <div class="hero-content">
                        <h1>From Wrong Turn to Grid-Tied Energy Pioneers</h1>
                        <div class="tagline">April 2019 • One Accidental Discovery • Five Years Perfecting Reliable Energy Innovation</div>
                        <p>Wellington I.T. professionals Stephen & Sandy took the wrong turn on Smiths Way in 2019. Three hours later, sitting by Lake Dunstan surrounded by established Pinot Noir vines, they knew they'd found something extraordinary. Five years later, their "wrong turn" has become New Zealand's most innovative grid-tied renewable energy accommodation experience.</p>
                        
                        <div style="background: rgba(45, 90, 90, 0.05); padding: 2rem; border-radius: 15px; margin: 2rem 0; max-width: 700px; margin-left: auto; margin-right: auto;">
                            <div style="text-align: center; font-style: italic; font-size: 1.1rem; line-height: 1.7; color: var(--text);">
                                "We sat on that lake shore for three hours, just talking about what if. What if we could wake up to this view every day? What if we could create something genuinely sustainable here using grid-tied technology that never compromises on reliability? What if that wrong turn was actually the right turn all along?"
                            </div>
                            <div style="text-align: center; margin-top: 1rem; font-weight: 600; color: var(--brand-teal);">
                                — Stephen & Sandy, Grid-Tied Energy Innovators
                            </div>
                        </div>
                    </div>
                </div>
            </section>
            <section class="section">
                <div class="container" style="max-width: 800px;">
                    <div class="card">
                        <div class="card-content">
                            <div style="text-align: center; margin-bottom: 2rem;">
                                <h2 style="font-family: 'Playfair Display', serif; color: var(--brand-teal); margin-bottom: 0.5rem;">Stephen & Sandy</h2>
                                <p style="font-style: italic; color: var(--text); opacity: 0.8;">Your Energy Technology Expert Hosts at Lakeside Retreat</p>
                            </div>

                            <h3 style="font-family: 'Playfair Display', serif; color: var(--brand-teal); margin-top: 2rem; margin-bottom: 1rem;">The Wrong Turn That Changed Everything</h3>
                            <p style="line-height: 1.8;">It was April 2019, and we were utterly exhausted. Sandy was working in I.T. in Wellington, and Stephen had spent years in retail. We desperately needed a weekend away from the city, so we loaded up the car and headed for Central Otago, thinking we'd find a nice hotel and do some wine tasting.</p>
                            
                            <p style="line-height: 1.8;">That's when we took the wrong turn on Smiths Way.</p>
                            
                            <p style="line-height: 1.8;">Instead of reaching our planned accommodation, we found ourselves pulling over at what can only be described as the most beautiful lakefront vineyard we'd ever seen. Five hectares of established Pinot Noir vines rolling down to the shores of Lake Dunstan, with the Remarkables rising majestically in the distance. There was a small 'For Sale' sign barely visible amongst the vines.</p>
                            
                            <blockquote style="border-left: 4px solid var(--brand-teal); padding-left: 1.5rem; margin: 2rem 0; font-style: italic; color: var(--text); opacity: 0.9;">
                                "We sat on that lake shore for three hours, just talking about what if. What if we could wake up to this view every day? What if we could create something genuinely sustainable here using our technical backgrounds?"
                            </blockquote>

                            <h3 style="font-family: 'Playfair Display', serif; color: var(--brand-teal); margin-top: 2rem; margin-bottom: 1rem;">Taking the Leap Into Energy Innovation</h3>
                            <p style="line-height: 1.8;">Six months later, we owned 96 Smiths Way. It wasn't a rational decision by any measure. Sandy continued her I.T. work remotely, whilst Stephen left retail to focus on transforming this stunning vineyard into something extraordinary.</p>
                            
                            <p style="line-height: 1.8;">We found the perfect solution for the vineyard: leasing it to experienced local wine growers who understand this terroir. This allows the vines to continue producing exceptional fruit under expert care, whilst we focus entirely on creating unforgettable renewable energy experiences for our guests.</p>
                            
                            <p style="line-height: 1.8;">The sustainable approach wasn't just marketing – it was personal mission. Sandy's I.T. background proved invaluable for designing our commercial-grade solar systems, whilst Stephen's retail experience meant he understood exactly what guests would want from their stay.</p>

                            <h3 style="font-family: 'Playfair Display', serif; color: var(--brand-teal); margin-top: 2rem; margin-bottom: 1rem;">Building Our 16.72kW Commercial-Grade System</h3>
                            <p style="line-height: 1.8;">The commercial-grade solar installation was our biggest challenge and greatest achievement. We spent months researching, calculating angles, and learning about hybrid inverter systems. Sandy approached it like debugging complex I.T. infrastructure, whilst Stephen focused on ensuring our guests would never notice any compromise in comfort.</p>
                            
                            <blockquote style="border-left: 4px solid var(--brand-teal); padding-left: 1.5rem; margin: 2rem 0; font-style: italic; color: var(--text); opacity: 0.9;">
                                "The day our 38 x 440W Helios panels went live and we achieved 16.72kW commercial-grade capacity was more satisfying than any I.T. system I'd ever optimised."
                            </blockquote>
                            
                            <p style="line-height: 1.8;">Our first guest review mentioned the 'rustic charm' of having no hot water. We learned quickly that commercial-grade solar systems need sophisticated backup plans – and that YouTube University only gets you so far. That's when we invested in our 16kWh Signergy battery storage and 20kW hybrid inverter system.</p>

                            <h3 style="font-family: 'Playfair Display', serif; color: var(--brand-teal); margin-top: 2rem; margin-bottom: 1rem;">From I.T. Professional to Energy Designer</h3>
                            <p style="line-height: 1.8;">Sandy's technical journey from I.T. to renewable energy system design has been remarkable. The skills transferred perfectly – both require systematic thinking, troubleshooting complex problems, and ensuring reliable 24/7 operation. Our Signergy Energy Gateway monitoring system provides real-time data that would make any I.T. professional proud.</p>
                            
                            <p style="line-height: 1.8;">Each accommodation tells a different story. Stephen designed Dome Pinot as the flagship experience – the views from the bed encompass the entire lake and surrounding mountains. The engineering challenge of creating panoramic windows whilst maintaining energy efficiency with our advanced heating and cooling systems kept us both awake for weeks.</p>
                            
                            <p style="line-height: 1.8;">Dome Rosé became our romantic retreat. Sandy's idea to include the saltwater spa proved inspired – watching couples relax whilst enjoying sunset over Central Otago, all powered by clean energy, never gets old.</p>
                            
                            <p style="line-height: 1.8;">The Lakeside Cottage was Sandy's solution for families. Direct lake access, full kitchen, and space for six people, all without compromising our energy-positive capability. The private spa overlooking the vineyard has become the most photographed spot on the property.</p>

                            <h3 style="font-family: 'Playfair Display', serif; color: var(--brand-teal); margin-top: 2rem; margin-bottom: 1rem;">Why We Share Our Energy Innovation</h3>
                            <p style="line-height: 1.8;">Every guest who chooses Lakeside Retreat is supporting our experiment in commercial-grade sustainable luxury. You're proving that travellers care about environmental impact whilst still expecting exceptional experiences. Our real-time monitoring dashboard shows guests exactly how much clean energy we're generating and contributing to New Zealand's grid.</p>
                            
                            <p style="line-height: 1.8;">Sandy continues her I.T. work remotely, bringing her technical expertise to optimising our energy management systems. Stephen has found his calling in hospitality – his favourite part of each day is showing guests our energy monitoring dashboard and seeing their amazement when they realise they're staying at an energy-positive accommodation.</p>
                            
                            <blockquote style="border-left: 4px solid var(--brand-teal); padding-left: 1.5rem; margin: 2rem 0; font-style: italic; color: var(--text); opacity: 0.9;">
                                "We're not just offering accommodation – we're sharing our experiment in commercial-grade sustainable living. Every guest becomes part of our renewable energy story."
                            </blockquote>

                            <h3 style="font-family: 'Playfair Display', serif; color: var(--brand-teal); margin-top: 2rem; margin-bottom: 1rem;">Today and Tomorrow</h3>
                            <p style="line-height: 1.8;">Five years later, we're still pinching ourselves. We wake up to Lake Dunstan literally at our doorstep every morning. Our 16.72kW solar system now produces more power than we use daily, contributing excess energy to New Zealand's renewable grid. The established vineyard continues to produce beautiful Pinot Noir grapes that our wine-growing partners transform into exceptional bottles.</p>
                            
                            <p style="line-height: 1.8;">Most importantly, we've learned that luxury and commercial-grade sustainability aren't contradictory – they're complementary. Our guests consistently tell us that knowing their stay is not only carbon-neutral but actually energy-positive enhances their relaxation. Watching our real-time energy dashboard show we're contributing to the grid while they enjoy five-star comfort gives them a sense of purpose.</p>
                            
                            <p style="line-height: 1.8;">When you stay with us, you're not just booking accommodation. You're joining our ongoing experiment in proving that commercial-grade renewable energy can power absolutely extraordinary hospitality experiences. You're supporting local wine growers who understand this special terroir. And you're experiencing Central Otago from one of its most magical vantage points, all while contributing to New Zealand's renewable energy future.</p>
                            
                            <p style="line-height: 1.8; font-weight: 600; color: var(--brand-teal);">Come and be part of our energy-positive story.</p>
                            
                            <div style="text-align: center; margin-top: 3rem; padding-top: 2rem; border-top: 1px solid var(--border);">
                                <p style="font-weight: 600; color: var(--brand-teal); margin-bottom: 0.5rem;">Stephen & Sandy</p>
                                <p style="font-style: italic; color: var(--text); opacity: 0.8; margin-bottom: 0;">Renewable Energy Technology Experts & Founders, Lakeside Retreat</p>
                                <p style="font-size: 0.9rem; color: var(--text); opacity: 0.7;">96 Smiths Way, Mount Pisa • 16.72kW Solar Array • 16kWh Battery Storage</p>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
        </div>

        <!-- Explore Page -->
        <div class="page" id="explorePage">
            <section class="hero">
                <div class="container">
                    <div class="hero-content">
                        <h1>Adventure Starts at Your Energy-Positive Doorstep</h1>
                        <div class="tagline">300m to Cycle Trail • Wine Country Centre • Five Ski Fields Within Range</div>
                        <p>Step from commercial-grade solar-powered luxury directly onto the Lake Dunstan Trail. Cycle to world-class wineries, hike dramatic alpine routes, or use our peaceful energy-positive vineyard as your base for Queenstown day trips. Central Otago's adventure playground surrounds you—we're perfectly positioned for it all, with zero environmental impact.</p>
                        
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1.5rem; margin: 2rem 0;">
                            <div style="background: white; padding: 1.5rem; border-radius: 15px; text-align: center; box-shadow: 0 4px 6px rgba(0,0,0,0.1);">
                                <div style="font-size: 2rem; margin-bottom: 0.5rem;">🚴</div>
                                <div style="font-weight: 600; color: var(--brand-teal);">300 metres</div>
                                <div style="font-size: 0.9rem;">to Lake Dunstan Trail</div>
                            </div>
                            <div style="background: white; padding: 1.5rem; border-radius: 15px; text-align: center; box-shadow: 0 4px 6px rgba(0,0,0,0.1);">
                                <div style="font-size: 2rem; margin-bottom: 0.5rem;">🍷</div>
                                <div style="font-weight: 600; color: var(--brand-teal);">15+ wineries</div>
                                <div style="font-size: 0.9rem;">within 15km radius</div>
                            </div>
                            <div style="background: white; padding: 1.5rem; border-radius: 15px; text-align: center; box-shadow: 0 4px 6px rgba(0,0,0,0.1);">
                                <div style="font-size: 2rem; margin-bottom: 0.5rem;">🏔️</div>
                                <div style="font-weight: 600; color: var(--brand-teal);">55 minutes</div>
                                <div style="font-size: 0.9rem;">to Queenstown adventures</div>
                            </div>
                            <div style="background: white; padding: 1.5rem; border-radius: 15px; text-align: center; box-shadow: 0 4px 6px rgba(0,0,0,0.1);">
                                <div style="font-size: 2rem; margin-bottom: 0.5rem;">⚡</div>
                                <div style="font-weight: 600; color: var(--brand-teal);">16.72kW</div>
                                <div style="font-size: 0.9rem;">energy-positive base</div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
            <section class="section">
                <div class="container">
                    <div class="grid grid-2">
                        <div class="card">
                            <div class="card-content">
                                <h3 class="card-title">🚴 Cycle the Lake Dunstan Trail</h3>
                                <p class="card-text">Step directly from our energy-positive property onto the historic Cromwell-Clyde Trail. This flat, family-friendly route follows the lake shore with stunning mountain views.</p>
                                <div style="color: var(--brand-teal); font-weight: 600; margin-top: 1rem;">Distance from property: 300 metres</div>
                            </div>
                        </div>
                        <div class="card">
                            <div class="card-content">
                                <h3 class="card-title">🍷 World-Class Wineries</h3>
                                <p class="card-text">Central Otago produces some of the world's finest Pinot Noir. Visit renowned cellar doors including Gibbston Valley, Chard Farm, and Mt Difficulty. Return to your carbon-positive accommodation.</p>
                                <div style="color: var(--brand-teal); font-weight: 600; margin-top: 1rem;">Multiple wineries within 15km</div>
                            </div>
                        </div>
                        <div class="card">
                            <div class="card-content">
                                <h3 class="card-title">🥾 Hiking & Walking</h3>
                                <p class="card-text">Explore dramatic landscapes from gentle lake walks to challenging alpine hikes. The Pisa Range and Crown Range offer spectacular views and photography opportunities.</p>
                                <div style="color: var(--brand-teal); font-weight: 600; margin-top: 1rem;">Various difficulty levels available</div>
                            </div>
                        </div>
                        <div class="card">
                            <div class="card-content">
                                <h3 class="card-title">🏊 Lake Activities</h3>
                                <p class="card-text">Lake Dunstan offers swimming, kayaking, and fishing. Our cottage guests have direct lake access, whilst dome guests can easily reach the shore from our solar-powered sanctuary.</p>
                                <div style="color: var(--brand-teal); font-weight: 600; margin-top: 1rem;">Direct lake access from cottage</div>
                            </div>
                        </div>
                        <div class="card">
                            <div class="card-content">
                                <h3 class="card-title">🏎️ Highlands Motorsport Park</h3>
                                <p class="card-text">Experience world-class motorsport facilities with driving experiences, karting, and events. Perfect for car enthusiasts and adrenaline seekers looking for something unique.</p>
                                <div style="color: var(--brand-teal); font-weight: 600; margin-top: 1rem;">Short drive from property</div>
                            </div>
                        </div>
                        <div class="card">
                            <div class="card-content">
                                <h3 class="card-title">⛷️ Winter Ski Fields</h3>
                                <p class="card-text">Five fantastic ski fields within comfortable driving distance: Coronet Peak, The Remarkables, Cardrona, Treble Cone, and Snow Park. From beginner slopes to expert terrain.</p>
                                <div style="color: var(--brand-teal); font-weight: 600; margin-top: 1rem;">45-90 minutes drive • June-September</div>
                            </div>
                        </div>
                        <div class="card">
                            <div class="card-content">
                                <h3 class="card-title">🏘️ Cromwell Town</h3>
                                <p class="card-text">Historic Cromwell offers cafes, restaurants, boutique shopping, and the famous fruit stalls. Perfect for stocking up on local produce and artisan goods.</p>
                                <div style="color: var(--brand-teal); font-weight: 600; margin-top: 1rem;">12km to town centre</div>
                            </div>
                        </div>
                        <div class="card">
                            <div class="card-content">
                                <h3 class="card-title">🏔️ Queenstown Day Trips</h3>
                                <p class="card-text">Adventure capital of New Zealand with bungy jumping, skydiving, jet boats, restaurants, and shopping. Use our peaceful energy-positive vineyard as your base and avoid expensive city accommodation.</p>
                                <div style="color: var(--brand-teal); font-weight: 600; margin-top: 1rem;">55 minutes drive • Full day trip</div>
                            </div>
                        </div>
                        <div class="card">
                            <div class="card-content">
                                <h3 class="card-title">🌊 Wanaka Day Trips</h3>
                                <p class="card-text">Stunning lake town famous for the Wanaka Tree, Roy's Peak hike, lavender farm, and relaxed alpine atmosphere. Perfect for photography and peaceful lake activities.</p>
                                <div style="color: var(--brand-teal); font-weight: 600; margin-top: 1rem;">30 minutes drive • Half or full day</div>
                            </div>
                        </div>
                        <div class="card">
                            <div class="card-content">
                                <h3 class="card-title">🔋 Energy System Tours</h3>
                                <p class="card-text">Take a guided tour of our commercial-grade solar array and learn about Signergy battery management. Perfect for tech enthusiasts and renewable energy advocates.</p>
                                <div style="color: var(--brand-teal); font-weight: 600; margin-top: 1rem;">On-demand with Stephen & Sandy</div>
                            </div>
                        </div>
                    </div>
                    
                    <div style="text-align: center; margin-top: 3rem;">
                        <div class="card" style="max-width: 600px; margin: 0 auto;">
                            <div class="card-content">
                                <h3 class="card-title">Planning Your Energy-Positive Central Otago Adventure?</h3>
                                <p class="card-text">We're happy to help you plan the perfect itinerary based on your interests and the season of your visit. Plus, we love sharing insights about renewable energy technology!</p>
                                <a href="#" class="btn btn-primary" onclick="showPage('contact')">Get Local & Tech Recommendations</a>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
        </div>

        <!-- Contact Page -->
        <div class="page" id="contactPage">
            <section class="hero">
                <div class="container">
                    <div class="hero-content">
                        <h1>Connect with Stephen & Sandy</h1>
                        <div class="tagline">Personal Service • Local Knowledge • Energy Technology Expertise</div>
                        <p>Planning your Central Otago escape? Have questions about our commercial-grade solar systems? Need recommendations for wine tastings or cycle routes? As your onsite energy technology expert hosts, we're here to ensure your stay exceeds every expectation. Real people, real responses, real local and renewable energy expertise.</p>
                        
                        <div style="background: rgba(45, 90, 90, 0.05); padding: 2rem; border-radius: 15px; margin: 2rem 0; max-width: 600px; margin-left: auto; margin-right: auto;">
                            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 1.5rem; text-align: left;">
                                <div>
                                    <div style="font-weight: 600; color: var(--brand-teal); margin-bottom: 0.5rem;">Quick Response Guarantee</div>
                                    <div style="font-size: 0.95rem;">📧 Email replies within 4 hours<br>📱 Phone availability 8am-8pm<br>💬 WhatsApp for instant queries</div>
                                </div>
                                <div>
                                    <div style="font-weight: 600; color: var(--brand-teal); margin-bottom: 0.5rem;">We Love Helping With:</div>
                                    <div style="font-size: 0.95rem;">🗓️ Activity planning & bookings<br>🍷 Winery recommendations<br>🔋 Energy system tours & tech talks<br>🚴 Cycle route mapping</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
            <section class="section">
                <div class="container" style="max-width: 800px;">
                    <div class="grid grid-2">
                        <div class="card">
                            <div class="card-content">
                                <h3 class="card-title">Get in Touch</h3>
                                <p><strong>Email:</strong> info@lakesideretreat.co.nz</p>
                                <p><strong>Phone:</strong> 021 368 682 | 021 870 018</p>
                                <p><strong>International:</strong> +64 21 368 682 | +64 21 870 018</p>
                                <p><strong>Address:</strong><br>96 Smiths Way, Mount Pisa<br>Cromwell, Otago 9310<br>New Zealand</p>
                                <p><strong>Energy System:</strong><br>16.72kW Solar Array<br>16kWh Signergy Battery Storage<br>20kW Hybrid Inverter</p>
                            </div>
                        </div>
                        <div class="card">
                            <div class="card-content">
                                <h3 class="card-title">Send us a Message</h3>
                                <form>
                                    <div class="form-group">
                                        <input type="text" class="form-input" placeholder="Your Name" required>
                                    </div>
                                    <div class="form-group">
                                        <input type="email" class="form-input" placeholder="Your Email" required onblur="validateEmail(this)" oninput="clearEmailError(this)">
                        <div class="email-error-message" id="contactEmailError" style="display: none; color: #dc2626; font-size: 0.85rem; margin-top: 0.25rem;"></div>
                                    </div>
                                    <div class="form-group">
                                        <textarea class="form-textarea" rows="4" placeholder="Your Message (let us know if you're interested in our energy system tours!)" required></textarea>
                                    </div>
                                    <button type="submit" class="btn btn-primary">Send Message</button>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
        </div>

        <!-- Voucher Page -->
        <div class="page" id="voucherPage">
            <section class="hero" style="background-image: linear-gradient(rgba(45, 90, 90, 0.8), rgba(45, 90, 90, 0.8)), url('images/vineyard.jpeg'); background-size: cover; background-position: center;">
                <div class="container">
                    <div class="hero-content">
                        <h1>🎁 Gift Vouchers</h1>
                        <div class="tagline">Give the Gift of Luxury Central Otago Experiences</div>
                        <p>Perfect for birthdays, anniversaries, weddings, or just because. Our gift vouchers offer 12-month validity, flexible booking dates, and all accommodation types. Create unforgettable memories for your loved ones.</p>
                        
                        <div style="display: flex; justify-content: center; gap: 1rem; flex-wrap: wrap; margin-top: 2rem;">
                            <a href="#" class="btn btn-primary" onclick="openVoucherPurchaseModal()">Purchase Voucher</a>
                            <a href="#" class="btn btn-outline" onclick="showPage('gallery')">View Gallery</a>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Voucher Options Section -->
            <section class="section">
                <div class="container">
                    <div class="section-header">
                        <h2 class="section-title">Choose Your Perfect Gift</h2>
                        <p class="section-subtitle">Flexible voucher amounts to suit any budget and occasion</p>
                    </div>
                    
                    <div class="grid grid-3">
                        <div class="card" style="text-align: center; border: 2px solid var(--border);">
                            <div style="background: var(--primary); color: white; padding: 2rem; border-radius: 15px 15px 0 0;">
                                <div style="font-size: 2.5rem; margin-bottom: 1rem;">💝</div>
                                <h3 style="margin-bottom: 0.5rem;">Partial Payment</h3>
                                <div style="font-size: 2rem; font-weight: 700;">$200</div>
                            </div>
                            <div class="card-content">
                                <p class="card-text">Perfect for contributing towards any stay. Recipients can use this towards any accommodation type.</p>
                                
                                <div style="background: rgba(45, 90, 90, 0.05); padding: 1rem; border-radius: 10px; margin: 1rem 0;">
                                    <div style="font-weight: 600; color: var(--brand-teal); margin-bottom: 0.5rem;">What's Included:</div>
                                    <div style="text-align: left; font-size: 0.9rem;">
                                        <div>✓ 12-month validity</div>
                                        <div>✓ All accommodation types</div>
                                        <div>✓ Personal message</div>
                                        <div>✓ Digital delivery</div>
                                    </div>
                                </div>
                                
                                <a href="#" class="btn btn-primary" onclick="selectVoucherAmount(200)">Select This Option</a>
                            </div>
                        </div>
                        
                        <div class="card" style="text-align: center; border: 2px solid var(--primary); position: relative;">
                            <div style="position: absolute; top: -10px; left: 50%; transform: translateX(-50%); background: var(--primary); color: white; padding: 0.5rem 1rem; border-radius: 20px; font-size: 0.8rem; font-weight: 600;">MOST POPULAR</div>
                            <div style="background: var(--primary); color: white; padding: 2rem; border-radius: 15px 15px 0 0;">
                                <div style="font-size: 2.5rem; margin-bottom: 1rem;">🏕️</div>
                                <h3 style="margin-bottom: 0.5rem;">One Night Dome</h3>
                                <div style="font-size: 2rem; font-weight: 700;">$450</div>
                            </div>
                            <div class="card-content">
                                <p class="card-text">Complete one-night stay in any of our luxury domes. Includes breakfast and private spa access.</p>
                                
                                <div style="background: rgba(45, 90, 90, 0.05); padding: 1rem; border-radius: 10px; margin: 1rem 0;">
                                    <div style="font-weight: 600; color: var(--brand-teal); margin-bottom: 0.5rem;">What's Included:</div>
                                    <div style="text-align: left; font-size: 0.9rem;">
                                        <div>✓ 12-month validity</div>
                                        <div>✓ Dome Pinot or Rosé</div>
                                        <div>✓ Continental breakfast</div>
                                        <div>✓ Private spa access</div>
                                        <div>✓ Personal message</div>
                                        <div>✓ Digital delivery</div>
                                    </div>
                                </div>
                                
                                <a href="#" class="btn btn-primary" onclick="selectVoucherAmount(450)">Select This Option</a>
                            </div>
                        </div>
                        
                        <div class="card" style="text-align: center; border: 2px solid var(--border);">
                            <div style="background: var(--secondary); color: white; padding: 2rem; border-radius: 15px 15px 0 0;">
                                <div style="font-size: 2.5rem; margin-bottom: 1rem;">🏡</div>
                                <h3 style="margin-bottom: 0.5rem;">Two Night Stay</h3>
                                <div style="font-size: 2rem; font-weight: 700;">$900</div>
                            </div>
                            <div class="card-content">
                                <p class="card-text">Complete two-night stay package. Choose from any accommodation type for the ultimate experience.</p>
                                
                                <div style="background: rgba(122, 132, 113, 0.05); padding: 1rem; border-radius: 10px; margin: 1rem 0;">
                                    <div style="font-weight: 600; color: var(--brand-sage); margin-bottom: 0.5rem;">What's Included:</div>
                                    <div style="text-align: left; font-size: 0.9rem;">
                                        <div>✓ 12-month validity</div>
                                        <div>✓ Any accommodation type</div>
                                        <div>✓ All amenities included</div>
                                        <div>✓ Personal message</div>
                                        <div>✓ Digital delivery</div>
                                    </div>
                                </div>
                                
                                <a href="#" class="btn btn-primary" onclick="selectVoucherAmount(900)">Select This Option</a>
                            </div>
                        </div>
                    </div>
                    
                    <div style="text-align: center; margin-top: 3rem;">
                        <div style="background: white; border-radius: 20px; padding: 2rem; box-shadow: var(--shadow); max-width: 600px; margin: 0 auto;">
                            <h3 style="color: var(--brand-teal); margin-bottom: 1rem;">Custom Amount</h3>
                            <p style="margin-bottom: 1.5rem;">Need a different amount? We can create a custom voucher for any value. Perfect for specific budgets or special occasions.</p>
                            <a href="#" class="btn btn-outline" onclick="openCustomVoucherModal()">Request Custom Amount</a>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Voucher Benefits Section -->
            <section class="section" style="background: rgba(45, 90, 90, 0.05);">
                <div class="container">
                    <div class="section-header">
                        <h2 class="section-title">Why Choose Our Gift Vouchers?</h2>
                        <p class="section-subtitle">The perfect way to give luxury Central Otago experiences</p>
                    </div>
                    
                    <div class="grid grid-2">
                        <div>
                            <div style="background: white; border-radius: 20px; padding: 2rem; box-shadow: var(--shadow);">
                                <h3 style="color: var(--brand-teal); margin-bottom: 1.5rem;">Voucher Benefits</h3>
                                
                                <div style="display: flex; flex-direction: column; gap: 1rem;">
                                    <div style="display: flex; align-items: center; gap: 1rem;">
                                        <div style="width: 40px; height: 40px; background: var(--primary); border-radius: 50%; display: flex; align-items: center; justify-content: center; color: white; font-size: 1.2rem;">
                                            <i class="fas fa-calendar-check"></i>
                                        </div>
                                        <div>
                                            <h4 style="color: var(--brand-teal); margin-bottom: 0.25rem;">12-Month Validity</h4>
                                            <p style="font-size: 0.9rem; color: var(--text);">Plenty of time to plan the perfect getaway</p>
                                        </div>
                                    </div>
                                    
                                    <div style="display: flex; align-items: center; gap: 1rem;">
                                        <div style="width: 40px; height: 40px; background: var(--secondary); border-radius: 50%; display: flex; align-items: center; justify-content: center; color: white; font-size: 1.2rem;">
                                            <i class="fas fa-home"></i>
                                        </div>
                                        <div>
                                            <h4 style="color: var(--brand-sage); margin-bottom: 0.25rem;">All Accommodation Types</h4>
                                            <p style="font-size: 0.9rem; color: var(--text);">Choose from domes or cottage</p>
                                        </div>
                                    </div>
                                    
                                    <div style="display: flex; align-items: center; gap: 1rem;">
                                        <div style="width: 40px; height: 40px; background: linear-gradient(135deg, #be185d 0%, #ec4899 100%); border-radius: 50%; display: flex; align-items: center; justify-content: center; color: white; font-size: 1.2rem;">
                                            <i class="fas fa-gift"></i>
                                        </div>
                                        <div>
                                            <h4 style="color: #be185d; margin-bottom: 0.25rem;">Personal Message</h4>
                                            <p style="font-size: 0.9rem; color: var(--text);">Include your own special message</p>
                                        </div>
                                    </div>
                                    
                                    <div style="display: flex; align-items: center; gap: 1rem;">
                                        <div style="width: 40px; height: 40px; background: linear-gradient(135deg, #f59e0b 0%, #fbbf24 100%); border-radius: 50%; display: flex; align-items: center; justify-content: center; color: white; font-size: 1.2rem;">
                                            <i class="fas fa-envelope"></i>
                                        </div>
                                        <div>
                                            <h4 style="color: #d97706; margin-bottom: 0.25rem;">Instant Digital Delivery</h4>
                                            <p style="font-size: 0.9rem; color: var(--text);">Receive your voucher immediately</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div>
                            <div style="background: white; border-radius: 20px; padding: 2rem; box-shadow: var(--shadow);">
                                <h3 style="color: var(--brand-teal); margin-bottom: 1.5rem;">Perfect For</h3>
                                
                                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem;">
                                    <div style="text-align: center; padding: 1rem; background: rgba(45, 90, 90, 0.05); border-radius: 10px;">
                                        <div style="font-size: 1.5rem; margin-bottom: 0.5rem;">💝</div>
                                        <div style="font-weight: 600; color: var(--brand-teal);">Birthdays</div>
                                    </div>
                                    <div style="text-align: center; padding: 1rem; background: rgba(122, 132, 113, 0.05); border-radius: 10px;">
                                        <div style="font-size: 1.5rem; margin-bottom: 0.5rem;">💕</div>
                                        <div style="font-weight: 600; color: var(--brand-sage);">Anniversaries</div>
                                    </div>
                                    <div style="text-align: center; padding: 1rem; background: rgba(251, 113, 133, 0.05); border-radius: 10px;">
                                        <div style="font-size: 1.5rem; margin-bottom: 0.5rem;">💒</div>
                                        <div style="font-weight: 600; color: #be185d;">Weddings</div>
                                    </div>
                                    <div style="text-align: center; padding: 1rem; background: rgba(251, 191, 36, 0.05); border-radius: 10px;">
                                        <div style="font-size: 1.5rem; margin-bottom: 0.5rem;">🎉</div>
                                        <div style="font-weight: 600; color: #d97706;">Celebrations</div>
                                    </div>
                                    <div style="text-align: center; padding: 1rem; background: rgba(59, 130, 246, 0.05); border-radius: 10px;">
                                        <div style="font-size: 1.5rem; margin-bottom: 0.5rem;">🏢</div>
                                        <div style="font-weight: 600; color: #3b82f6;">Corporate</div>
                                    </div>
                                    <div style="text-align: center; padding: 1rem; background: rgba(16, 185, 129, 0.05); border-radius: 10px;">
                                        <div style="font-size: 1.5rem; margin-bottom: 0.5rem;">🎁</div>
                                        <div style="font-weight: 600; color: #10b981;">Just Because</div>
                                    </div>
                                </div>
                                
                                <div style="background: var(--primary); color: white; padding: 1.5rem; border-radius: 15px; margin-top: 1.5rem;">
                                    <h4 style="margin-bottom: 1rem;">How It Works</h4>
                                    <div style="display: flex; flex-direction: column; gap: 0.5rem; font-size: 0.9rem;">
                                        <div>1. Choose your voucher amount</div>
                                        <div>2. Add your personal message</div>
                                        <div>3. Complete payment securely</div>
                                        <div>4. Receive instant digital voucher</div>
                                        <div>5. Recipient books their perfect stay</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Contact Section -->
            <section class="section">
                <div class="container">
                    <div style="text-align: center; max-width: 800px; margin: 0 auto;">
                        <h2 style="color: var(--brand-teal); margin-bottom: 1rem;">Ready to Purchase?</h2>
                        <p style="font-size: 1.1rem; margin-bottom: 2rem; line-height: 1.6;">Our gift vouchers make the perfect present for any occasion. Contact us directly for personalized service or use our online system.</p>
                        
                        <div style="display: flex; justify-content: center; gap: 2rem; flex-wrap: wrap;">
                            <div style="text-align: center;">
                                <div style="width: 60px; height: 60px; background: var(--primary); border-radius: 50%; display: flex; align-items: center; justify-content: center; color: white; font-size: 1.5rem; margin: 0 auto 1rem;">
                                    <i class="fas fa-envelope"></i>
                                </div>
                                <h4 style="color: var(--brand-teal); margin-bottom: 0.5rem;">Email Us</h4>
                                <p style="font-size: 0.9rem;">info@lakesideretreat.co.nz</p>
                            </div>
                            
                            <div style="text-align: center;">
                                <div style="width: 60px; height: 60px; background: var(--secondary); border-radius: 50%; display: flex; align-items: center; justify-content: center; color: white; font-size: 1.5rem; margin: 0 auto 1rem;">
                                    <i class="fas fa-phone"></i>
                                </div>
                                <h4 style="color: var(--brand-sage); margin-bottom: 0.5rem;">Call Us</h4>
                                <p style="font-size: 0.9rem;">+64-21-368-682</p>
                            </div>
                            
                            <div style="text-align: center;">
                                <div style="width: 60px; height: 60px; background: linear-gradient(135deg, #be185d 0%, #ec4899 100%); border-radius: 50%; display: flex; align-items: center; justify-content: center; color: white; font-size: 1.5rem; margin: 0 auto 1rem;">
                                    <i class="fas fa-shopping-cart"></i>
                                </div>
                                <h4 style="color: #be185d; margin-bottom: 0.5rem;">Online Purchase</h4>
                                <p style="font-size: 0.9rem;">Instant digital delivery</p>
                            </div>
                        </div>
                        
                        <div style="margin-top: 3rem;">
                            <a href="#" class="btn btn-primary" onclick="openVoucherPurchaseModal()">Purchase Voucher Now</a>
                        </div>
                    </div>
                </div>
            </section>
        </div>
    </main>

    <!-- Enhanced Footer with Advanced Internal Linking -->
    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <!-- Company Info -->
                <div class="footer-section">
                    <h3>Lakeside Retreat Central Otago</h3>
                    <p>New Zealand's premier solar-powered luxury glamping accommodation on beautiful Lake Dunstan featuring commercial-grade solar array and batteries storage.</p>
                    <div style="margin-top: 1rem;">
                        <a href="https://facebook.com/lakesideretreatnz" style="margin-right: 1rem; color: rgba(255, 255, 255, 0.8);">Facebook</a>
                        <a href="https://instagram.com/lakesideretreatnz" style="margin-right: 1rem; color: rgba(255, 255, 255, 0.8);">Instagram</a>
                        <a href="mailto:info@lakesideretreat.co.nz" style="color: rgba(255, 255, 255, 0.8);">Email</a>
                    </div>
                </div>

                <!-- Accommodation Links -->
                <div class="footer-section">
                    <h3>Accommodation</h3>
                    <a href="#" onclick="showPage('stay')">Solar-Powered Eco Domes</a>
                    <a href="#" onclick="showPage('stay')">Central Otago Glamping</a>
                    <a href="#" onclick="showPage('stay')">Lake Dunstan Accommodation</a>
                    <a href="#" onclick="showPage('stay')">Cromwell Luxury Lodging</a>
                    <a href="#" onclick="showPage('stay')">Sustainable Accommodation</a>
                    <a href="#" onclick="showPage('stay')">Wine Country Stays</a>
                </div>

                <!-- Activities & Local -->
                <div class="footer-section">
                    <h3>Central Otago Experiences</h3>
                    <a href="#" onclick="showPage('explore')">Otago Rail Trail Cycling</a>
                    <a href="#" onclick="showPage('explore')">Wine Tours & Tastings</a>
                    <a href="#" onclick="showPage('explore')">Lake Dunstan Activities</a>
                    <a href="#" onclick="showPage('explore')">Cromwell Attractions</a>
                    <a href="#" onclick="showPage('explore')">Gibbston Valley Tours</a>
                    <a href="#" onclick="showPage('explore')">Premium Winery Visits</a>
                </div>



                <!-- Legal Information -->
                <div class="footer-section">
                    <h3>Legal Information</h3>
                    <a href="#" onclick="showLegalPage('terms')">Terms & Conditions</a>
                    <a href="#" onclick="showLegalPage('privacy')">Privacy Policy</a>
                    <a href="#" onclick="showLegalPage('booking')">Booking Policy</a>
                    <a href="#" onclick="showLegalPage('cancellation')">Cancellation Policy</a>
                </div>
            </div>

            <!-- Bottom Footer -->
            <div class="footer-bottom">
                <div style="display: grid; grid-template-columns: 1fr auto; gap: 2rem; align-items: center;">
                    <div style="font-size: 0.9rem;">
                        <p>&copy; 2024 Lakeside Retreat Central Otago. All rights reserved.</p>
                        <p style="margin-top: 0.5rem;">96 Smiths Way, Mount Pisa, Cromwell, Central Otago 9310, New Zealand</p>
                        <p style="margin-top: 0.5rem;">⚡ Powered by 16.72kW commercial-grade solar array with 16kWh battery storage</p>
                    </div>
                    <div>
                        <div style="font-size: 0.8rem;">
                            <span>Phone: </span><a href="tel:+6421368682" style="color: rgba(255, 255, 255, 0.8);">+64 21 368 682</a><br>
                            <span>Email: </span><a href="mailto:info@lakesideretreat.co.nz" style="color: rgba(255, 255, 255, 0.8);">info@lakesideretreat.co.nz</a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </footer>

    <script>
        // Global variables
        let currentPage = 'home';
        let currentImageIndex = 0;
        let socialProofIndex = 0;
        let reviewsLoaded = 6;
        let touchStartX = 0;
        let touchEndX = 0;

        // Booking system variables
        let selectedAccommodation = null;
        let currentBookingStep = 1;
        let bookingData = {};

        // Mock Uplisting API rates (NZD)
        const accommodationRates = {
            'dome-pinot': { base: 450, peak: 530, offPeak: 350 },
            'dome-rose': { base: 380, peak: 450, offPeak: 300 },
            'lakeside-cottage': { base: 580, peak: 680, offPeak: 480 }
        };

        const accommodationNames = {
            'dome-pinot': 'Dome Pinot',
            'dome-rose': 'Dome Rosé',
            'lakeside-cottage': 'Lakeside Cottage'
        };

        // Page navigation data
        const pages = ['home', 'stay', 'gallery', 'blog', 'reviews', 'story', 'explore', 'contact'];

        // Gallery images from stay page click
        const galleryImages = [
            'images/galerryrose.jpeg',
            'images/gallerydecksideview.jpeg',
            'images/gallerydecksitting.jpeg',
            'images/gallerypinotbed.jpeg',
            'images/dome-pinot-hero.jpeg',
            'images/dome-pinot-interior.jpeg',
            'images/dome-rose-interior.jpeg',
            'images/gallerydeck.jpeg',
            'images/gallerypinotbed.jpeg',
	    'images/GallerySwingChair.jpeg',
        ];

        // Search data
        const searchData = [
            { title: 'Central Otago Accommodation', page: 'stay', description: 'Luxury glamping domes and cottage with Lake Dunstan views' },
            { title: 'Cromwell Accommodation', page: 'stay', description: 'Premium accommodation 12km from Cromwell town centre' },
            { title: 'Lake Dunstan Accommodation', page: 'stay', description: 'Waterfront luxury with direct lake access and panoramic views' },
            { title: 'Dome Pinot', page: 'stay', description: '50sqm luxury dome with Lake Dunstan views and private spa' },
            { title: 'Dome Rosé', page: 'stay', description: 'Romantic retreat perfect for couples in wine country' },
            { title: 'Lakeside Cottage', page: 'stay', description: 'Family-friendly accommodation with direct lake access' },
            { title: 'Central Otago Wine Country', page: 'explore', description: 'World-class Pinot Noir wineries within 15km' },
            { title: 'Cycle Trail Accommodation', page: 'explore', description: 'Lake Dunstan Trail access 300m from accommodation' },
            { title: 'Sustainable Accommodation', page: 'home', description: 'Grid-tied solar powered luxury with battery backup' },
            { title: 'Cromwell to Clyde Cycle Trail', page: 'explore', description: 'Direct access to scenic cycling routes' }
        ];

        // Social proof messages
        const socialProofMessages = [
            { name: 'Sarah from Auckland', action: 'just booked Dome Pinot', time: '2 minutes ago' },
            { name: 'Mike from Melbourne', action: 'just booked Lakeside Cottage', time: '5 minutes ago' },
            { name: 'Lisa from Wellington', action: 'just booked Dome Rosé', time: '8 minutes ago' },
            { name: 'David from Sydney', action: 'just booked an energy system tour', time: '12 minutes ago' },
            { name: 'Emma from Christchurch', action: 'just booked Lakeside Cottage', time: '15 minutes ago' }
        ];

        // CSRF Token Management
        let csrfToken = '';

        async function getCSRFToken() {
          try {
            const response = await fetch('/api/csrf-token', {
              credentials: 'include'
            });
            const data = await response.json();
            csrfToken = data.csrfToken;
            return csrfToken;
          } catch (error) {
            // Console statement removed for production
            return null;
          }
        }

        // Initialize website
        document.addEventListener('DOMContentLoaded', async function() {
          // Get CSRF token on page load
          await getCSRFToken();
          
          initializeWebsite();
        });

        function initializeWebsite() {
            // Set minimum dates for booking
            const today = new Date().toISOString().split('T')[0];
            document.getElementById('bookingCheckin').min = today;
            document.getElementById('bookingCheckout').min = today;
            
            // Ensure calendar appears when clicking date inputs
            const checkinInput = document.getElementById('bookingCheckin');
            const checkoutInput = document.getElementById('bookingCheckout');
            
            checkinInput.addEventListener('click', function() {
                this.showPicker();
            });
            
            checkoutInput.addEventListener('click', function() {
                this.showPicker();
            });

            // Initialize mobile optimizations
            detectTouch();
            setMobileViewportHeight();
            enhanceMobileMenu();

            // Show cookie consent
            setTimeout(() => {
                document.getElementById('cookieConsent').classList.add('active');
            }, 2000);

            // Initialize social proof
            setTimeout(showSocialProof, 5000);

            // Initialize scroll animations
            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.classList.add('visible');
                    }
                });
            }, { threshold: 0.1 });

            document.querySelectorAll('.card').forEach(card => {
                observer.observe(card);
            });

            // Initialize scroll indicator
            window.addEventListener('scroll', updateScrollIndicator);

            // Initialize touch gestures for page navigation
            document.getElementById('mainContent').addEventListener('touchstart', handleTouchStart, { passive: true });
            document.getElementById('mainContent').addEventListener('touchend', handleTouchEnd, { passive: true });

            // Auto-close mobile menu on scroll
            window.addEventListener('scroll', () => {
                const mobileNav = document.getElementById('mobileNav');
                if (mobileNav.classList.contains('active')) {
                    toggleMobileMenu();
                }
            });

            // Booking form event listeners
            document.getElementById('bookingCheckin').addEventListener('change', updateCheckoutMinDate);
            
            // Mobile-specific performance optimizations
            if (window.innerWidth <= 768) {
                // Reduce animation frequency on mobile
                const reducedMotionQuery = window.matchMedia('(prefers-reduced-motion: reduce)');
                if (reducedMotionQuery.matches) {
                    document.body.classList.add('reduce-motion');
                }
                
                // Optimize touch scrolling
                document.body.style.touchAction = 'pan-y';
                document.body.style.webkitOverflowScrolling = 'touch';
            }
        }

        // Mobile optimization functions
        let isTouch = false;
        let touchStartY = 0;
        let touchEndY = 0;
        let touchDevice = false;

        function detectTouch() {
            touchDevice = 'ontouchstart' in window || navigator.maxTouchPoints > 0;
            if (touchDevice) {
                document.body.classList.add('touch-device');
            }
        }

        function setMobileViewportHeight() {
            const vh = window.innerHeight * 0.01;
            document.documentElement.style.setProperty('--vh', `${vh}px`);
            
            window.addEventListener('resize', () => {
                const vh = window.innerHeight * 0.01;
                document.documentElement.style.setProperty('--vh', `${vh}px`);
            });
        }

        function enhanceMobileMenu() {
            const mobileNav = document.getElementById('mobileNav');
            const mobileMenuBtn = document.querySelector('.mobile-menu-btn');
            
            if (mobileMenuBtn) {
                mobileMenuBtn.addEventListener('touchstart', function() {
                    this.style.opacity = '0.7';
                }, { passive: true });
                
                mobileMenuBtn.addEventListener('touchend', function() {
                    this.style.opacity = '1';
                }, { passive: true });
            }
            
            if (mobileNav) {
                mobileNav.addEventListener('touchmove', function(e) {
                    if (this.classList.contains('active')) {
                        e.preventDefault();
                    }
                }, { passive: false });
            }
        }

        // === VOUCHER SYSTEM ===
        
        function openVoucherModal() {
            // Console statement removed for production
            // For now, redirect to a voucher purchase page or show a simple modal
            alert('Voucher purchase system coming soon! Please contact us directly to purchase gift vouchers.');
            trackEvent('voucher', 'purchase_intent');
        }

        function showVoucherInfo() {
            // Console statement removed for production
            const voucherInfo = `
🎁 Gift Vouchers - Lakeside Retreat Central Otago

Perfect for any occasion:
• Birthdays, anniversaries, weddings
• Corporate gifts and celebrations
• Just because moments

Voucher Benefits:
• Valid for 12 months from purchase
• Flexible booking dates (subject to availability)
• All accommodation types included
• No booking fees
• Personal message included
• Instant digital delivery

Voucher Amounts:
• $200 - Partial payment towards any stay
• $450 - One night in any dome
• $900 - Two night stay package
• Custom amounts available

To purchase vouchers, please contact us:
📧 info@lakesideretreat.co.nz
📞 +64-21-368-682

We'll create a personalized voucher with your message and deliver it instantly via email.
            `;
            alert(voucherInfo);
            trackEvent('voucher', 'info_viewed');
        }

        // === VOUCHER PURCHASE SYSTEM ===
        
        let selectedVoucherAmount = 450;
        let currentVoucherStep = 1;

        function openVoucherPurchaseModal() {
            // Console statement removed for production
            document.getElementById('voucherPurchaseModal').classList.add('active');
            document.body.style.overflow = 'hidden';
            resetVoucherModal();
            trackEvent('voucher', 'purchase_modal_opened');
        }

        function closeVoucherPurchaseModal() {
            document.getElementById('voucherPurchaseModal').classList.remove('active');
            document.body.style.overflow = '';
            resetVoucherModal();
        }

        function resetVoucherModal() {
            currentVoucherStep = 1;
            selectedVoucherAmount = 450;
            
            // Reset all steps
            document.querySelectorAll('.voucher-purchase-step').forEach(step => {
                step.classList.remove('active');
            });
            document.getElementById('voucherStep1').classList.add('active');
            
            // Reset voucher options
            document.querySelectorAll('.voucher-option').forEach(option => {
                option.classList.remove('selected');
            });
            document.querySelector('[data-amount="450"]').classList.add('selected');
            
            // Reset form fields
            document.getElementById('voucherRecipientName').value = '';
            document.getElementById('voucherRecipientEmail').value = '';
            document.getElementById('voucherMessage').value = '';
            document.getElementById('voucherOccasion').value = '';
            document.getElementById('voucherPurchaserName').value = '';
            document.getElementById('voucherPurchaserEmail').value = '';
            document.getElementById('voucherPurchaserPhone').value = '';
            document.getElementById('customVoucherAmount').value = '';
            
            // Hide custom amount input
            document.getElementById('customAmountInput').style.display = 'none';
            
            // Update summary
            updateVoucherSummary();
        }

        function selectVoucherAmount(amount) {
            // Console statement removed for production
            selectedVoucherAmount = amount;
            
            // Update UI
            document.querySelectorAll('.voucher-option').forEach(option => {
                option.classList.remove('selected');
            });
            
            const selectedElement = document.querySelector(`[data-amount="${amount}"]`);
            if (selectedElement) {
                selectedElement.classList.add('selected');
            }
            
            // Show/hide custom amount input
            const customInput = document.getElementById('customAmountInput');
            if (amount === 'custom') {
                customInput.style.display = 'block';
                document.getElementById('customVoucherAmount').focus();
            } else {
                customInput.style.display = 'none';
            }
            
            updateVoucherSummary();
        }

        function goToVoucherStep(step) {
            // Console statement removed for production
            currentVoucherStep = step;
            
            // Hide all steps
            document.querySelectorAll('.voucher-purchase-step').forEach(stepElement => {
                stepElement.classList.remove('active');
            });
            
            // Show current step
            document.getElementById(`voucherStep${step}`).classList.add('active');
            
            // Update summary if on step 2
            if (step === 2) {
                updateVoucherSummary();
            }
        }

        function updateVoucherSummary() {
            const amount = selectedVoucherAmount === 'custom' ? 
                parseFloat(document.getElementById('customVoucherAmount').value) || 0 : 
                selectedVoucherAmount;
            
            const recipient = document.getElementById('voucherRecipientName').value || '-';
            const occasion = document.getElementById('voucherOccasion').value || '-';
            
            document.getElementById('summaryAmount').textContent = `$${amount}`;
            document.getElementById('summaryRecipient').textContent = recipient;
            document.getElementById('summaryOccasion').textContent = occasion;
            document.getElementById('summaryTotal').textContent = `$${amount}`;
        }

        function processVoucherPurchase() {
            // Console statement removed for production
            
            const amount = selectedVoucherAmount === 'custom' ? 
                parseFloat(document.getElementById('customVoucherAmount').value) : 
                selectedVoucherAmount;
            
            const recipientName = document.getElementById('voucherRecipientName').value;
            const recipientEmailInput = document.getElementById('voucherRecipientEmail');
            const message = document.getElementById('voucherMessage').value;
            const occasion = document.getElementById('voucherOccasion').value;
            const purchaserName = document.getElementById('voucherPurchaserName').value;
            const purchaserEmailInput = document.getElementById('voucherPurchaserEmail');
            const purchaserPhone = document.getElementById('voucherPurchaserPhone').value;
            
            // Validation
            if (!amount || amount < 50) {
                alert('Please enter a valid voucher amount (minimum $50)');
                return;
            }
            
            // Validate emails
            if (!validateEmail(recipientEmailInput) || !validateEmail(purchaserEmailInput)) {
                return;
            }
            
            if (!recipientName || !purchaserName || !purchaserPhone) {
                alert('Please fill in all required fields');
                return;
            }
            
            // Simulate payment processing
            const purchaseBtn = document.querySelector('#voucherStep3 .btn-primary');
            purchaseBtn.textContent = 'Processing...';
            purchaseBtn.disabled = true;
            
            setTimeout(() => {
                // Simulate successful purchase
                alert(`🎁 Voucher Purchase Successful!

Voucher Details:
• Amount: $${amount}
• Recipient: ${recipientName}
• Email: ${recipientEmail}
• Occasion: ${occasion || 'Not specified'}

Your voucher has been sent to ${recipientEmail} and a copy has been sent to ${purchaserEmail}.

Thank you for choosing Lakeside Retreat!`);
                
                closeVoucherPurchaseModal();
                trackEvent('voucher', 'purchase_completed');
            }, 2000);
        }

        function openCustomVoucherModal() {
            openVoucherPurchaseModal();
            selectVoucherAmount('custom');
        }

        function switchToVoucherModal() {
            // Console statement removed for production
            // Close the booking modal first
            closeBookingModal();
            // Wait a moment for the modal to close, then open voucher modal
            setTimeout(() => {
                openVoucherPurchaseModal();
            }, 300);
        }

        // === STREAMLINED 3-BUTTON BOOKING SYSTEM ===

        function openBookingModal(preSelectedAccommodation = null) {
            // Console statement removed for production
            document.getElementById('bookingModal').classList.add('active');
            document.body.style.overflow = 'hidden';
            resetBookingModal();
            
            // Pre-select accommodation if specified
            if (preSelectedAccommodation) {
                selectedAccommodation = preSelectedAccommodation;
                selectAccommodation(preSelectedAccommodation);
                // Console statement removed for production
            }
        }

        function closeBookingModal() {
            document.getElementById('bookingModal').classList.remove('active');
            document.body.style.overflow = '';
            resetBookingModal();
        }

        function resetBookingModal() {
            currentBookingStep = 1;
            bookingData = {};
            
            // Reset all steps
            document.querySelectorAll('.booking-step').forEach(step => {
                step.classList.remove('active');
            });
            document.getElementById('bookingStep1').classList.add('active');
            
            // Reset accommodation selection (but keep pre-selected if any)
            document.querySelectorAll('.accommodation-option').forEach(option => {
                option.classList.remove('selected');
            });
            
            // Re-select accommodation if it was pre-selected
            if (selectedAccommodation) {
                selectAccommodation(selectedAccommodation);
            } else {
                // Reset to default form (cottage settings)
                updateBookingFormForAccommodation('cottage');
            }
            
            // Reset form
            document.getElementById('bookingCheckin').value = '';
            document.getElementById('bookingCheckout').value = '';
            document.getElementById('bookingAdults').value = '2';
            document.getElementById('bookingChildren').value = '0';
            
            // Hide sections that should be hidden initially
            document.getElementById('pricingBreakdown').style.display = 'none';
            document.getElementById('guestDetailsSection').style.display = 'none';
            document.getElementById('instantPaymentSection').style.display = 'none';
            document.getElementById('availabilityResult').innerHTML = '';
        }

        function selectAccommodation(accommodationType) {
            // Console statement removed for production
            selectedAccommodation = accommodationType;
            
            // Update UI
            document.querySelectorAll('.accommodation-option').forEach(option => {
                option.classList.remove('selected');
            });
            const selectedElement = document.querySelector(`[data-accommodation="${accommodationType}"]`);
            if (selectedElement) {
                selectedElement.classList.add('selected');
                // Console statement removed for production
            } else {
                // Console statement removed for production
            }
            
            // Update form based on accommodation type
            updateBookingFormForAccommodation(accommodationType);
        }
        
        function updateBookingFormForAccommodation(accommodationType) {
            const adultsSelect = document.getElementById('bookingAdults');
            const childrenSelect = document.getElementById('bookingChildren');
            const childrenGroup = childrenSelect.closest('.booking-form-group');
            const petOptionSection = document.getElementById('petOptionSection');
            
            if (accommodationType === 'dome-pinot' || accommodationType === 'dome-rose') {
                // Domes: Adults only (1-2), no children, no pets
                adultsSelect.innerHTML = `
                    <option value="1">1 Adult</option>
                    <option value="2" selected>2 Adults</option>
                `;
                
                // Hide children section for domes
                if (childrenGroup) {
                    childrenGroup.style.display = 'none';
                }
                
                // Hide pet option for domes
                if (petOptionSection) {
                    petOptionSection.style.display = 'none';
                }
                
                // Set children to 0 for domes
                childrenSelect.value = '0';
                
                // Console statement removed for production
            } else {
                // Cottage: Maximum 4 people total, pets allowed
                adultsSelect.innerHTML = `
                    <option value="1">1 Adult</option>
                    <option value="2" selected>2 Adults</option>
                    <option value="3">3 Adults</option>
                    <option value="4">4 Adults</option>
                `;
                
                // Show children section for cottage (max 2 children to keep total at 4)
                if (childrenGroup) {
                    childrenGroup.style.display = 'block';
                    childrenSelect.innerHTML = `
                        <option value="0" selected>0 Children</option>
                        <option value="1">1 Child</option>
                        <option value="2">2 Children</option>
                    `;
                }
                
                // Show pet option for cottage
                if (petOptionSection) {
                    petOptionSection.style.display = 'block';
                }
                
                // Console statement removed for production
            }
        }

        function updateCheckoutMinDate() {
            const checkinDate = new Date(document.getElementById('bookingCheckin').value);
            if (checkinDate) {
                checkinDate.setDate(checkinDate.getDate() + 1);
                document.getElementById('bookingCheckout').min = checkinDate.toISOString().split('T')[0];
                
                // Clear checkout if it's before new minimum
                const checkoutInput = document.getElementById('bookingCheckout');
                if (checkoutInput.value && new Date(checkoutInput.value) <= new Date(document.getElementById('bookingCheckin').value)) {
                    checkoutInput.value = '';
                }
            }
        }

        // INSTANT BOOKING: Combined availability check, pricing, and immediate payment
        async function instantBookingWithPayment() {
            // Console statement removed for production
            // Console statement removed for production
            // Console statement removed for production
            // Console statement removed for production
            
            if (!selectedAccommodation) {
                // Console statement removed for production
                alert('Please select an accommodation type');
                return;
            }

            const checkin = document.getElementById('bookingCheckin').value;
            const checkout = document.getElementById('bookingCheckout').value;
            const adults = document.getElementById('bookingAdults').value;
            const children = document.getElementById('bookingChildren').value;

            // Console statement removed for production

            if (!checkin || !checkout) {
                // Console statement removed for production
                alert('Please select both check-in and check-out dates');
                return;
            }

            const checkinDate = new Date(checkin);
            const checkoutDate = new Date(checkout);
            
            // Console statement removed for production
            
            if (checkoutDate <= checkinDate) {
                // Console statement removed for production
                alert('Check-out date must be after check-in date');
                return;
            }

            // Store booking data
            bookingData = {
                accommodation: selectedAccommodation,
                checkin: checkin,
                checkout: checkout,
                adults: parseInt(adults),
                children: parseInt(children),
                nights: Math.ceil((checkoutDate - checkinDate) / (1000 * 60 * 60 * 24))
            };

            // Console statement removed for production

            // Show loading state
            const availabilityResult = document.getElementById('availabilityResult');
            if (window.SecureFrontend) {
          window.SecureFrontend.safeSetInnerHTML(availabilityResult, '<div style="text-align: center;">Checking availability and calculating pricing <span class="loading-spinner"></span></div>');
        } else {
          availabilityResult.textContent = 'Checking availability and calculating pricing...';
        }

            // Console statement removed for production

            // Simulate API call to Uplisting
            await new Promise(resolve => setTimeout(resolve, 1500));

            // Mock availability check (90% chance of availability)
            const isAvailable = Math.random() > 0.1;
            
            // Console statement removed for production
            
            if (isAvailable) {
                // Console statement removed for production
                calculatePricingWithGST();
                updateSelectedDetails();
                if (window.SecureFrontend) {
          window.SecureFrontend.updateAvailabilityResult('Available for Instant Booking! Your selected dates are available. Complete your booking below.', true);
        } else {
          availabilityResult.textContent = '✅ Available for Instant Booking! Your selected dates are available. Complete your booking below.';
        }
                document.getElementById('pricingBreakdown').style.display = 'block';
                document.getElementById('guestDetailsSection').style.display = 'block';
                document.getElementById('instantPaymentSection').style.display = 'block';
                
                // Move to step 2 to show the booking details
                goToBookingStep(2);
                
                // Console statement removed for production
                // Console statement removed for production
            } else {
                if (window.SecureFrontend) {
          window.SecureFrontend.updateAvailabilityResult('Not Available. These dates are not available. Please try different dates.', false);
        } else {
          availabilityResult.textContent = '❌ Not Available. These dates are not available. Please try different dates.';
        }
                document.getElementById('pricingBreakdown').style.display = 'none';
                document.getElementById('guestDetailsSection').style.display = 'none';
                document.getElementById('instantPaymentSection').style.display = 'none';
            }
        }

        // ENHANCED PRICING CALCULATION WITH NZ GST
        function calculatePricingWithGST() {
            const rates = accommodationRates[selectedAccommodation];
            
            // Determine rate type based on season (mock logic)
            const checkinDate = new Date(bookingData.checkin);
            const month = checkinDate.getMonth();
            let rateType = 'base';
            if (month >= 11 || month <= 2) rateType = 'peak'; // Summer
            if (month >= 5 && month <= 8) rateType = 'offPeak'; // Winter
            
            const nightlyRate = rates[rateType];
            let subtotal = nightlyRate * bookingData.nights;
            
            // Calculate extra guest charges for cottage (beyond 2 people)
            let extraGuestCharge = 0;
            if (selectedAccommodation === 'lakeside-cottage') {
                const totalGuests = bookingData.adults + bookingData.children;
                if (totalGuests > 2) {
                    const extraGuests = totalGuests - 2;
                    extraGuestCharge = extraGuests * 100 * bookingData.nights; // $100 per extra guest per night
                    subtotal += extraGuestCharge;
                }
            }
            
            // Calculate pet fees for cottage
            let petFee = 0;
            const petDetails = document.getElementById('petDetails');
            if (selectedAccommodation === 'lakeside-cottage' && petDetails && petDetails.value.trim() !== '') {
                // Count pets based on comma-separated entries or single entry
                const petEntries = petDetails.value.split(',').filter(entry => entry.trim() !== '');
                const petCount = Math.min(petEntries.length, 2); // Maximum 2 pets
                petFee = petCount * 25; // $25 per pet
                subtotal += petFee;
            }
            
            const cleaningFee = 75;
            const serviceFee = Math.round(subtotal * 0.03); // 3% service fee
            
            // NZ GST CALCULATION (15%)
            const preGSTTotal = subtotal + cleaningFee + serviceFee;
            const gst = Math.round(preGSTTotal * 0.15);
            const total = preGSTTotal + gst;

            // Update booking data
            bookingData.nightlyRate = nightlyRate;
            bookingData.subtotal = subtotal;
            bookingData.extraGuestCharge = extraGuestCharge;
            bookingData.petFee = petFee;
            bookingData.cleaningFee = cleaningFee;
            bookingData.serviceFee = serviceFee;
            bookingData.gst = gst;
            bookingData.total = total;

            // Update UI with NZD formatting
            document.getElementById('accommodationRate').textContent = `${nightlyRate} NZD`;
            document.getElementById('numberOfNights').textContent = bookingData.nights;
            document.getElementById('subtotal').textContent = `${subtotal} NZD`;
            
            // Show/hide extra guest charge for cottage
            const extraGuestRow = document.getElementById('extraGuestRow');
            const extraGuestChargeElement = document.getElementById('extraGuestCharge');
            if (selectedAccommodation === 'lakeside-cottage' && extraGuestCharge > 0) {
                extraGuestRow.style.display = 'flex';
                extraGuestChargeElement.textContent = `${extraGuestCharge} NZD`;
            } else {
                extraGuestRow.style.display = 'none';
                extraGuestChargeElement.textContent = '$0';
            }
            
            // Show/hide pet fee for cottage
            const petFeeRow = document.getElementById('petFeeRow');
            const petFeeElement = document.getElementById('petFee');
            if (selectedAccommodation === 'lakeside-cottage' && petFee > 0) {
                if (petFeeRow) {
                    petFeeRow.style.display = 'flex';
                    petFeeElement.textContent = `${petFee} NZD`;
                }
            } else {
                if (petFeeRow) {
                    petFeeRow.style.display = 'none';
                    petFeeElement.textContent = '$0';
                }
            }
            
            document.getElementById('cleaningFee').textContent = `${cleaningFee} NZD`;
            document.getElementById('serviceFee').textContent = `${serviceFee} NZD`;
            document.getElementById('gst').textContent = `${gst} NZD`;
            document.getElementById('totalAmount').textContent = `${total} NZD`;
        }

        // SECURE PAYMENT: Process payment securely with Stripe
        async function processInstantPayment() {
            try {
                // Validate guest details are filled
                const firstName = document.getElementById('guestFirstName').value;
                const lastName = document.getElementById('guestLastName').value;
                const emailInput = document.getElementById('guestEmail');
                const phone = document.getElementById('guestPhone').value;

                // Validate email
                if (!validateEmail(emailInput)) {
                    return;
                }

                if (!firstName || !lastName || !phone) {
                    alert('Please fill in all required guest information');
                    return;
                }

                // Use secure payment processing if available
                if (window.SecurePayment && window.SecurePayment.processSecurePaymentFromForm) {
                    await window.SecurePayment.processSecurePaymentFromForm();
                } else {
                    // Fallback to secure API call
                    const bookingData = {
                        accommodation: selectedAccommodation,
                        checkIn: document.getElementById('bookingCheckin').value,
                        checkOut: document.getElementById('bookingCheckout').value,
                        guests: document.getElementById('bookingAdults').value,
                        guestName: firstName + ' ' + lastName,
                        guestEmail: emailInput.value,
                        guestPhone: phone,
                        specialRequests: document.getElementById('specialRequests').value
                    };

                    // Sanitize data if secure functions available
                    if (window.SecureFrontend && window.SecureFrontend.sanitizeFormData) {
                        const formData = new FormData();
                        Object.keys(bookingData).forEach(key => {
                            formData.append(key, bookingData[key]);
                        });
                        const sanitizedData = window.SecureFrontend.sanitizeFormData(formData);
                        Object.assign(bookingData, sanitizedData);
                    }

                    // Process payment securely
                    const response = await fetch('/api/process-booking', {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json',
                            'X-CSRF-Token': await getCSRFToken()
                        },
                        credentials: 'include',
                        body: JSON.stringify(bookingData)
                    });

                    if (!response.ok) {
                        throw new Error('Payment processing failed');
                    }

                    const result = await response.json();
                    
                    // Show success
                    if (window.SecureFrontend && window.SecureFrontend.showSuccess) {
                        window.SecureFrontend.showSuccess('Payment processed successfully! Your booking is confirmed.');
                    } else {
                        alert('Payment processed successfully! Your booking is confirmed.');
                    }

                    // Close modal and redirect
                    setTimeout(() => {
                        closeBookingModal();
                        showPage('home');
                    }, 2000);
                }
                
            } catch (error) {
                // Console statement removed for production
                
                if (window.SecureFrontend && window.SecureFrontend.handleSecurityError) {
                    window.SecureFrontend.handleSecurityError(error, 'payment_processing');
                } else {
                    alert('Payment processing failed. Please try again.');
                }
            }
        }

        // Process booking with Uplisting after successful payment
        async function processBookingWithUplisting() {
            const paymentButton = document.getElementById('instantPaymentBtn');
            paymentButton.innerHTML = 'Creating Booking with Uplisting <span class="loading-spinner"></span>';

            // Simulate Uplisting API call
            await new Promise(resolve => setTimeout(resolve, 2000));

            // Mock successful booking
            const bookingReference = 'LR' + Date.now().toString().slice(-6);
            
            // Show success message securely
            if (window.SecureFrontend && window.SecureFrontend.updateBookingResult) {
                window.SecureFrontend.updateBookingResult(true, 'Instant Booking Confirmed! Thank you for choosing Lakeside Retreat. Your booking has been instantly confirmed and you\'ll receive a confirmation email shortly.');
            } else {
                const bookingResultSection = document.getElementById('bookingResultSection');
                const successDiv = document.createElement('div');
                successDiv.className = 'booking-success';
                successDiv.innerHTML = `
                    <div class="success-icon">✅</div>
                    <h3 style="color: var(--brand-teal); margin-bottom: 1rem;">Instant Booking Confirmed!</h3>
                    <p>Thank you for choosing Lakeside Retreat. Your booking has been instantly confirmed and you'll receive a confirmation email shortly.</p>
                    <div style="background: rgba(45, 90, 90, 0.05); padding: 1rem; border-radius: 10px; margin: 1.5rem 0;">
                        <p><strong>Booking Reference:</strong> ${bookingReference}</p>
                        <p><strong>Total Paid (incl. GST):</strong> ${bookingData.total} NZD</p>
                        <p><strong>Payment Method:</strong> Credit Card via Stripe</p>
                        <p><strong>Confirmation sent to:</strong> ${document.getElementById('guestEmail').value}</p>
                    </div>
                    <button class="btn btn-primary" onclick="closeBookingModal()" style="margin-top: 1rem;">Close & Plan Your Stay</button>
                `;
                bookingResultSection.innerHTML = '';
                bookingResultSection.appendChild(successDiv);
            }

            // Hide the payment section
            document.getElementById('instantPaymentSection').style.display = 'none';
            paymentButton.parentElement.style.display = 'none';

            // In real implementation, this would:
            // 1. Process payment through Stripe API
            // 2. Create booking in Uplisting via API
            // 3. Send confirmation emails
            // 4. Update calendar availability
            // 5. Sync with all booking platforms
        }

        function updateSelectedDetails() {
            const checkinDate = new Date(bookingData.checkin);
            const checkoutDate = new Date(bookingData.checkout);
            
            document.getElementById('selectedDetailsDisplay').innerHTML = `
                <h4 style="color: var(--brand-teal); margin-bottom: 0.5rem;">Selected Energy-Positive Experience</h4>
                <p><strong>Accommodation:</strong> ${accommodationNames[selectedAccommodation]}</p>
                <p><strong>Check-in:</strong> ${checkinDate.toLocaleDateString()} | <strong>Check-out:</strong> ${checkoutDate.toLocaleDateString()}</p>
                <p><strong>Guests:</strong> ${bookingData.adults} Adults${bookingData.children > 0 ? `, ${bookingData.children} Children` : ''}</p>
                <p><strong>Duration:</strong> ${bookingData.nights} night${bookingData.nights > 1 ? 's' : ''}</p>
                <p style="color: #10b981; font-weight: 600;">✓ Powered by 16.72kW commercial-grade solar system</p>
            `;
        }

        function goToBookingStep(stepNumber) {
            currentBookingStep = stepNumber;
            
            // Hide all steps
            document.querySelectorAll('.booking-step').forEach(step => {
                step.classList.remove('active');
            });
            
            // Show selected step
            document.getElementById(`bookingStep${stepNumber}`).classList.add('active');

            // Update final booking summary if going to step 3
            if (stepNumber === 3) {
                updateFinalSummary();
            }
        }

        function updateFinalSummary() {
            const checkinDate = new Date(bookingData.checkin);
            const checkoutDate = new Date(bookingData.checkout);
            
            document.getElementById('finalAccommodationName').textContent = accommodationNames[selectedAccommodation];
            document.getElementById('finalDates').textContent = `${checkinDate.toLocaleDateString()} - ${checkoutDate.toLocaleDateString()}`;
            document.getElementById('finalGuests').textContent = `${bookingData.adults} Adults${bookingData.children > 0 ? `, ${bookingData.children} Children` : ''}`;
            document.getElementById('finalTotalAmount').textContent = `${bookingData.total} NZD`;
        }

        // BUTTON 3: Process booking and show confirmation
        async function processBookingAndConfirm() {
            // Collect guest data
            const guestData = {
                firstName: document.getElementById('guestFirstName').value,
                lastName: document.getElementById('guestLastName').value,
                email: document.getElementById('guestEmail').value,
                phone: document.getElementById('guestPhone').value,
                specialRequests: document.getElementById('specialRequests').value
            };

            // Validate email
            const emailInput = document.getElementById('guestEmail');
            if (!validateEmail(emailInput)) {
                return;
            }

            // Validate required fields
            if (!guestData.firstName || !guestData.lastName || !guestData.phone) {
                alert('Please fill in all required fields');
                return;
            }

            // Update button state
            const button = event.target;
            button.innerHTML = 'Processing Booking with Uplisting <span class="loading-spinner"></span>';
            button.disabled = true;

            // Simulate booking API call to Uplisting
            await new Promise(resolve => setTimeout(resolve, 3000));

            // Mock successful booking
            const bookingReference = 'LR' + Date.now().toString().slice(-6);
            
            // Show success directly in step 3
            document.getElementById('bookingResultSection').innerHTML = `
                <div class="booking-success">
                    <div class="success-icon">✅</div>
                    <h3 style="color: var(--brand-teal); margin-bottom: 1rem;">Booking Confirmed!</h3>
                    <p>Thank you for choosing Lakeside Retreat. You'll receive a confirmation email shortly with all the details for your stay.</p>
                    <div style="background: rgba(45, 90, 90, 0.05); padding: 1rem; border-radius: 10px; margin: 1.5rem 0;">
                        <p><strong>Booking Reference:</strong> ${bookingReference}</p>
                        <p><strong>Total Paid (incl. GST):</strong> ${bookingData.total} NZD</p>
                        <p><strong>Confirmation sent to:</strong> ${guestData.email}</p>
                    </div>
                    <button class="btn btn-primary" onclick="closeBookingModal()" style="margin-top: 1rem;">Close & Plan Your Stay</button>
                </div>
            `;

            // Hide the back/confirm buttons
            button.parentElement.style.display = 'none';

            // In real implementation, this would:
            // 1. Process payment through Stripe/PayPal
            // 2. Create booking in Uplisting via API
            // 3. Send confirmation emails
            // 4. Update calendar availability
            // 5. Sync with all booking platforms
        }

        // === EMAIL VALIDATION FUNCTIONS ===

        function validateEmail(input) {
            const email = input.value.trim();
            const errorElement = document.getElementById(input.id + 'Error');
            
            // Email regex pattern
            const emailPattern = /^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/;
            
            // Clear previous error
            if (errorElement) {
                errorElement.style.display = 'none';
                input.style.borderColor = '';
            }
            
            // Check if email is empty
            if (!email) {
                if (errorElement) {
                    errorElement.textContent = 'Please enter your email address';
                    errorElement.style.display = 'block';
                    input.style.borderColor = '#dc2626';
                }
                return false;
            }
            
            // Check email format
            if (!emailPattern.test(email)) {
                if (errorElement) {
                    errorElement.textContent = 'Please enter a valid email address (e.g., yourname@example.com)';
                    errorElement.style.display = 'block';
                    input.style.borderColor = '#dc2626';
                }
                return false;
            }
            
            // Check for common mistakes
            if (email.includes('..') || email.includes('@@') || email.startsWith('.') || email.endsWith('.')) {
                if (errorElement) {
                    errorElement.textContent = 'Please check your email address format';
                    errorElement.style.display = 'block';
                    input.style.borderColor = '#dc2626';
                }
                return false;
            }
            
            // Check domain
            const domain = email.split('@')[1];
            if (!domain || domain.length < 3) {
                if (errorElement) {
                    errorElement.textContent = 'Please enter a valid email domain';
                    errorElement.style.display = 'block';
                    input.style.borderColor = '#dc2626';
                }
                return false;
            }
            
            // Email is valid
            if (errorElement) {
                errorElement.style.display = 'none';
                input.style.borderColor = '#10b981';
            }
            return true;
        }

        function clearEmailError(input) {
            const errorElement = document.getElementById(input.id + 'Error');
            if (errorElement) {
                errorElement.style.display = 'none';
                input.style.borderColor = '';
            }
        }

        // === ORIGINAL WEBSITE FUNCTIONS ===

        function showPage(pageName) {
            document.querySelectorAll('.page').forEach(page => {
                page.classList.remove('active');
            });

            const pageElement = document.getElementById(pageName + 'Page');
            if (pageElement) {
                pageElement.classList.add('active');
            }

            document.querySelectorAll('.nav-link').forEach(link => {
                link.classList.remove('active');
            });
            
            const activeLink = document.querySelector(`[onclick="showPage('${pageName}')"]`);
            if (activeLink && activeLink.classList.contains('nav-link')) {
                activeLink.classList.add('active');
            }

            updateBreadcrumbs(pageName);
            currentPage = pageName;
            window.scrollTo({ top: 0, behavior: 'smooth' });
            trackPageView(pageName);
        }

        function showLegalPage(legalType) {
            // Create modal for legal pages
            const modal = document.createElement('div');
            modal.style.cssText = `
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: rgba(0, 0, 0, 0.8);
                z-index: 10000;
                display: flex;
                justify-content: center;
                align-items: center;
                padding: 20px;
            `;

            const legalContent = {
                terms: {
                    title: 'Terms & Conditions',
                    content: `
                        <h2>Terms & Conditions</h2>
                        <p><strong>Last updated: January 2024</strong></p>
                        
                        <h3>1. Booking & Payment</h3>
                        <p>All bookings require a valid credit card for reservation. Payment is processed through Stripe for secure transactions. Full payment is required at time of booking unless otherwise specified.</p>
                        
                        <h3>2. Cancellation Policy</h3>
                        <p>Cancellations made 14 days or more before arrival receive a full refund. Cancellations within 14 days are non-refundable. No-shows will be charged the full amount.</p>
                        
                        <h3>3. Check-in & Check-out</h3>
                        <p>Check-in is available from 3:00 PM. Check-out is required by 10:00 AM. Early check-in or late check-out may be available upon request and subject to availability.</p>
                        
                        <h3>4. Guest Responsibilities</h3>
                        <p>Guests are responsible for the accommodation during their stay. Any damage or excessive cleaning required will be charged to the guest's account. Smoking is not permitted inside any accommodation.</p>
                        
                        <h3>5. Pet Policy</h3>
                        <p>Pets are welcome in Lakeside Cottage only, subject to prior approval. A pet fee of $50 per stay applies. Pets must be well-behaved and not left unattended.</p>
                        
                        <h3>6. Solar System</h3>
                        <p>Our accommodation is powered by a commercial-grade solar system. While we maintain 99.9% uptime, we cannot guarantee uninterrupted power supply. No refunds will be given for power-related issues.</p>
                    `
                },
                privacy: {
                    title: 'Privacy Policy',
                    content: `
                        <h2>Privacy Policy</h2>
                        <p><strong>Last updated: January 2024</strong></p>
                        
                        <h3>1. Information We Collect</h3>
                        <p>We collect information you provide directly to us, such as when you make a booking, contact us, or sign up for our newsletter. This may include your name, email address, phone number, and payment information.</p>
                        
                        <h3>2. How We Use Your Information</h3>
                        <p>We use the information we collect to process your bookings, communicate with you about your stay, send you marketing materials (with your consent), and improve our services.</p>
                        
                        <h3>3. Information Sharing</h3>
                        <p>We do not sell, trade, or otherwise transfer your personal information to third parties except as described in this policy. We may share information with our booking partners (Uplisting) and payment processors (Stripe) as necessary to provide our services.</p>
                        
                        <h3>4. Data Security</h3>
                        <p>We implement appropriate security measures to protect your personal information against unauthorized access, alteration, disclosure, or destruction.</p>
                        
                        <h3>5. Cookies</h3>
                        <p>We use cookies to enhance your browsing experience and analyze website traffic. You can control cookie settings through your browser preferences.</p>
                        
                        <h3>6. Your Rights</h3>
                        <p>You have the right to access, correct, or delete your personal information. Contact us at info@lakesideretreat.co.nz to exercise these rights.</p>
                    `
                },
                booking: {
                    title: 'Booking Policy',
                    content: `
                        <h2>Booking Policy</h2>
                        <p><strong>Last updated: January 2024</strong></p>
                        
                        <h3>1. Reservation Process</h3>
                        <p>All bookings are confirmed immediately upon payment processing. You will receive a confirmation email with booking details and arrival instructions within 24 hours.</p>
                        
                        <h3>2. Payment Methods</h3>
                        <p>We accept all major credit cards through our secure Stripe payment system. Payment is processed in New Zealand Dollars (NZD).</p>
                        
                        <h3>3. Rate Information</h3>
                        <p>Rates are subject to change without notice. The rate confirmed at time of booking is guaranteed for your stay. Rates include GST (Goods and Services Tax).</p>
                        
                        <h3>4. Occupancy Limits</h3>
                        <p>Dome Pinot & Dome Rosé: Maximum 2 adults, no children permitted. Lakeside Cottage: Maximum 3 guests, children and pets welcome.</p>
                        
                        <h3>5. Minimum Stay Requirements</h3>
                        <p>Minimum 2-night stay applies during peak season (December to March). Single night bookings may be available during off-peak periods.</p>
                        
                        <h3>6. Special Requests</h3>
                        <p>Special requests (early check-in, late check-out, dietary requirements) should be made at time of booking. We will accommodate requests where possible but cannot guarantee availability.</p>
                    `
                },
                cancellation: {
                    title: 'Cancellation Policy',
                    content: `
                        <h2>Cancellation Policy</h2>
                        <p><strong>Last updated: January 2024</strong></p>
                        
                        <h3>1. Standard Cancellation</h3>
                        <p>Cancellations made 14 days or more before your scheduled arrival date will receive a full refund minus a $50 processing fee.</p>
                        
                        <h3>2. Late Cancellation</h3>
                        <p>Cancellations made within 14 days of arrival are non-refundable. We recommend travel insurance to protect against unforeseen circumstances.</p>
                        
                        <h3>3. No-Show Policy</h3>
                        <p>Guests who do not arrive on their scheduled check-in date without prior notice will be charged the full amount of their booking.</p>
                        
                        <h3>4. Weather & Natural Events</h3>
                        <p>No refunds will be given for weather-related cancellations or natural events. We recommend travel insurance for protection against such events.</p>
                        
                        <h3>5. COVID-19 Policy</h3>
                        <p>If you are unable to travel due to COVID-19 restrictions, we will offer a full refund or credit for a future stay. Proof of restriction may be required.</p>
                        
                        <h3>6. Modification Requests</h3>
                        <p>Date changes are subject to availability and may incur additional charges. Contact us directly to discuss modification options.</p>
                    `
                }
            };

            const content = legalContent[legalType];
            if (!content) return;

            modal.innerHTML = `
                <div style="background: white; max-width: 800px; max-height: 90vh; overflow-y: auto; border-radius: 15px; padding: 2rem; position: relative;">
                    <button onclick="this.closest('div[style*=\'position: fixed\']').remove()" style="position: absolute; top: 1rem; right: 1rem; background: none; border: none; font-size: 1.5rem; cursor: pointer; color: #666;">&times;</button>
                    <div style="color: #333; line-height: 1.6;">
                        ${content.content}
                    </div>
                </div>
            `;

            document.body.appendChild(modal);
            
            // Close modal when clicking outside
            modal.addEventListener('click', function(e) {
                if (e.target === modal) {
                    modal.remove();
                }
            });
        }

        function updateBreadcrumbs(pageName) {
            const breadcrumbNames = {
                home: 'Home',
                stay: 'Accommodations',
                gallery: 'Gallery',
                blog: 'Central Otago Guides',
                reviews: 'Reviews',
                story: 'Our Story',
                explore: 'Explore',
                voucher: 'Gift Vouchers',
                contact: 'Contact'
            };

            document.getElementById('currentPage').textContent = breadcrumbNames[pageName] || 'Lakeside Retreat';
        }

        function toggleMobileMenu() {
            const mobileNav = document.getElementById('mobileNav');
            mobileNav.classList.toggle('active');
            
            if (mobileNav.classList.contains('active')) {
                document.body.style.overflow = 'hidden';
            } else {
                document.body.style.overflow = '';
            }
        }

        function handleTouchStart(e) {
            touchStartX = e.touches[0].clientX;
        }

        function handleTouchEnd(e) {
            touchEndX = e.changedTouches[0].clientX;
            handleSwipe();
        }

        function handleSwipe() {
            const swipeThreshold = 100;
            const swipeDistance = touchEndX - touchStartX;
            
            if (Math.abs(swipeDistance) > swipeThreshold) {
                const currentIndex = pages.indexOf(currentPage);
                
                if (swipeDistance > 0 && currentIndex > 0) {
                    showPage(pages[currentIndex - 1]);
                } else if (swipeDistance < 0 && currentIndex < pages.length - 1) {
                    showPage(pages[currentIndex + 1]);
                }
            }
        }

        function openSearch() {
            document.getElementById('searchOverlay').classList.add('active');
            document.getElementById('searchInput').focus();
            document.body.style.overflow = 'hidden';
        }

        function closeSearch() {
            document.getElementById('searchOverlay').classList.remove('active');
            document.getElementById('searchInput').value = '';
            document.getElementById('searchResults').innerHTML = '';
            document.body.style.overflow = '';
        }

        function performSearch() {
            const query = document.getElementById('searchInput').value.toLowerCase();
            const results = searchData.filter(item => 
                item.title.toLowerCase().includes(query) || 
                item.description.toLowerCase().includes(query)
            );

            const resultsContainer = document.getElementById('searchResults');
            
            if (query.length === 0) {
                resultsContainer.innerHTML = '';
                return;
            }

            if (results.length === 0) {
                resultsContainer.innerHTML = '<div class="search-result">No results found</div>';
                return;
            }

            resultsContainer.innerHTML = results.map(result => 
                `<div class="search-result" onclick="showPage('${result.page}'); closeSearch();">
                    <strong>${result.title}</strong><br>
                    <small>${result.description}</small>
                </div>`
            ).join('');
        }

        function openLightbox(imageSrc) {
            const lightbox = document.getElementById('lightbox');
            const lightboxImage = document.getElementById('lightboxImage');
            
            lightboxImage.src = imageSrc;
            lightbox.classList.add('active');
            document.body.style.overflow = 'hidden';
            
            currentImageIndex = galleryImages.indexOf(imageSrc);
            if (currentImageIndex === -1) currentImageIndex = 0;
        }

        function closeLightbox() {
            document.getElementById('lightbox').classList.remove('active');
            document.body.style.overflow = '';
        }

        function nextImage() {
            currentImageIndex = (currentImageIndex + 1) % galleryImages.length;
            document.getElementById('lightboxImage').src = galleryImages[currentImageIndex];
        }

        function prevImage() {
            currentImageIndex = currentImageIndex === 0 ? galleryImages.length - 1 : currentImageIndex - 1;
            document.getElementById('lightboxImage').src = galleryImages[currentImageIndex];
        }

        function showSocialProof() {
            const socialProof = document.getElementById('socialProof');
            const message = socialProofMessages[socialProofIndex];
            
            document.getElementById('socialProofText').textContent = `${message.name} ${message.action}!`;
            document.getElementById('socialProofTime').textContent = message.time;
            
            socialProof.classList.add('show');
            
            setTimeout(() => {
                socialProof.classList.remove('show');
            }, 4000);
            
            socialProofIndex = (socialProofIndex + 1) % socialProofMessages.length;
            setTimeout(showSocialProof, Math.random() * 30000 + 45000);
        }

        function acceptCookies() {
            document.getElementById('cookieConsent').classList.remove('active');
            trackEvent('cookies', 'accepted');
        }

        function declineCookies() {
            document.getElementById('cookieConsent').classList.remove('active');
            trackEvent('cookies', 'declined');
        }

        function trackEvent(action, category) {
            if (typeof gtag !== 'undefined' && action === 'booking_intent') {
                trackBookingIntent(category);
            }
            // Event tracked
        }

        function trackPageView(page) {
            if (typeof gtag !== 'undefined') {
                gtag('event', 'page_view', {
                    'page_title': page,
                    'page_location': window.location.href
                });
            }
            // Page view tracked
        }

        function updateScrollIndicator() {
            const scrollHeight = document.documentElement.scrollHeight - window.innerHeight;
            const scrollTop = window.scrollY;
            const scrollPercentage = (scrollTop / scrollHeight) * 100;
            
            document.getElementById('scrollIndicator').style.width = `${scrollPercentage}%`;
        }

        function loadMoreReviews() {
            alert('Loading more reviews... (This would connect to your review database or API)');
        }

        // Accordion functionality
        function toggleAccordion(id) {
            const content = document.getElementById(id);
            const header = content.previousElementSibling;
            
            // Toggle active class
            content.classList.toggle('active');
            header.classList.toggle('active');
            
            // Close other accordions in the same container
            const container = content.closest('.accordion-container');
            const otherContents = container.querySelectorAll('.accordion-content');
            const otherHeaders = container.querySelectorAll('.accordion-header');
            
            otherContents.forEach(item => {
                if (item !== content && item.classList.contains('active')) {
                    item.classList.remove('active');
                }
            });
            
            otherHeaders.forEach(item => {
                if (item !== header && item.classList.contains('active')) {
                    item.classList.remove('active');
                }
            });
        }

        // Keyboard Navigation
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Escape') {
                closeSearch();
                closeLightbox();
                closeBookingModal();
                
                const mobileNav = document.getElementById('mobileNav');
                if (mobileNav.classList.contains('active')) {
                    toggleMobileMenu();
                }
            }
            
            if (document.getElementById('lightbox').classList.contains('active')) {
                if (e.key === 'ArrowLeft') prevImage();
                if (e.key === 'ArrowRight') nextImage();
            }
        });

        // Close overlays when clicking outside
        document.addEventListener('click', function(e) {
            const searchOverlay = document.getElementById('searchOverlay');
            const lightbox = document.getElementById('lightbox');
            const bookingModal = document.getElementById('bookingModal');
            
            if (e.target === searchOverlay) closeSearch();
            if (e.target === lightbox) closeLightbox();
            if (e.target === bookingModal) closeBookingModal();
        });

        // SEO performance monitoring
        window.addEventListener('load', () => {
            if (typeof PerformanceObserver !== 'undefined') {
                new PerformanceObserver((entryList) => {
                    for (const entry of entryList.getEntries()) {
                        if (entry.entryType === 'navigation') {
                            if (typeof gtag !== 'undefined') {
                                gtag('event', 'page_load_time', {
                                    'event_category': 'Performance',
                                    'event_label': 'Navigation',
                                    'value': Math.round(entry.loadEventEnd - entry.loadEventStart)
                                });
                            }
                        }
                    }
                }).observe({entryTypes: ['navigation']});
            }
        });
    </script>
	<!-- STEP 1: Find the end of your existing JavaScript (around line 1800-2000) -->
        
        // ... your existing functions end here
        
    </script>
    
    <!-- STEP 2: ADD THIS NEW SCRIPT SECTION RIGHT HERE -->
    <script>
        // ===========================================
        // BACKEND API CONNECTION - ADD THIS SECTION
        // ===========================================

        // Production backend URL
        const API_BASE_URL = 'https://lakeside-retreat-backend-production.up.railway.app';

        // Test backend connection on page load
        async function testBackendConnection() {
            try {
                const response = await fetch(`${API_BASE_URL}/health`);
                const data = await response.json();
                // Console statement removed for production
                
                // Optional: Show connection status for debugging
                if (window.location.search.includes('debug')) {
                    // Console statement removed for production
                }
                
                return true;
            } catch (error) {
                // Console statement removed for production
                return false;
            }
        }

        // Get CSRF token before making POST requests
        let csrfToken = null;

        async function getCSRFToken() {
            try {
                const response = await fetch(`${API_BASE_URL}/api/csrf-token`, {
                    credentials: 'include'
                });
                const data = await response.json();
                csrfToken = data.csrfToken;
                return csrfToken;
            } catch (error) {
                // Console statement removed for production
                return null;
            }
        }

        // Secure API call wrapper
        async function secureApiCall(endpoint, options = {}) {
            const url = `${API_BASE_URL}${endpoint}`;
            
            const defaultOptions = {
                credentials: 'include',
                headers: {
                    'Content-Type': 'application/json',
                    'X-Requested-With': 'XMLHttpRequest'
                }
            };
            
            // Add CSRF token for POST requests
            if (options.method === 'POST' && csrfToken) {
                defaultOptions.headers['X-CSRF-Token'] = csrfToken;
            }
            
            const finalOptions = {
                ...defaultOptions,
                ...options,
                headers: { ...defaultOptions.headers, ...options.headers }
            };
            
            try {
                const response = await fetch(url, finalOptions);
                
                if (!response.ok) {
                    throw new Error(`HTTP ${response.status}: ${response.statusText}`);
                }
                
                return await response.json();
            } catch (error) {
                // Console statement removed for production
                throw error;
            }
        }

        // Load accommodations from backend
        async function loadAccommodations() {
            try {
                const data = await secureApiCall('/api/accommodations');
                const accommodations = data.accommodations;
                
                // Console statement removed for production
                
                // Update accommodation cards with real data
                accommodations.forEach(accommodation => {
                    updateAccommodationCard(accommodation);
                });
                
                return accommodations;
            } catch (error) {
                // Console statement removed for production
                // Continue with static data - no user impact
            }
        }

        function updateAccommodationCard(accommodation) {
            // Find accommodation cards by data attribute
            const cardElement = document.querySelector(`[data-accommodation="${accommodation.id}"]`);
            
            if (cardElement) {
                // Update price
                const priceElement = cardElement.querySelector('.price, .card-price');
                if (priceElement) {
                    priceElement.textContent = `$${accommodation.price}/night`;
                }
                
                // Update description
                const descElement = cardElement.querySelector('.description, .card-text');
                if (descElement) {
                    descElement.textContent = accommodation.description;
                }
                
                // Update max guests
                const guestsElement = cardElement.querySelector('.max-guests, .guests');
                if (guestsElement) {
                    guestsElement.textContent = `Up to ${accommodation.maxGuests} guests`;
                }
            }
        }

        // Enhanced booking function (integrate with your existing booking)
        async function createBookingWithBackend(bookingData) {
            try {
                // Ensure we have a CSRF token
                if (!csrfToken) {
                    await getCSRFToken();
                }
                
                const response = await secureApiCall('/api/create-booking', {
                    method: 'POST',
                    body: JSON.stringify(bookingData)
                });
                
                // Console statement removed for production
                return response;
            } catch (error) {
                // Console statement removed for production
                // Fallback to your existing booking flow
                throw error;
            }
        }

        // Initialize backend connection when page loads
        document.addEventListener('DOMContentLoaded', async function() {
            // Console statement removed for production
            
            // Test backend connection
            const backendConnected = await testBackendConnection();
            
            if (backendConnected) {
                // Get CSRF token
                await getCSRFToken();
                
                // Load dynamic accommodations data
                await loadAccommodations();
                
                // Console statement removed for production
            } else {
                // Console statement removed for production
            }
        });

</script>
    
</body>
</html>